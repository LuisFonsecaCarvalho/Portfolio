var Jc=(m,t)=>()=>(t||m((t={exports:{}}).exports,t),t.exports);import Gh from"swiper";var kd=Jc((Nd,pr)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function e(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=e(i);fetch(i.href,r)}})();/*! jQuery v3.5.1 | (c) JS Foundation and other contributors | jquery.org/license */(function(m,t){typeof pr=="object"&&typeof pr.exports=="object"?pr.exports=m.document?t(m,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(m)})(typeof window<"u"?window:void 0,function(m,t){var e=[],n=Object.getPrototypeOf,i=e.slice,r=e.flat?function(s){return e.flat.call(s)}:function(s){return e.concat.apply([],s)},o=e.push,h=e.indexOf,c={},u=c.toString,p=c.hasOwnProperty,y=p.toString,x=y.call(Object),b={},M=function(s){return typeof s=="function"&&typeof s.nodeType!="number"},S=function(s){return s!=null&&s===s.window},v=m.document,k={type:!0,src:!0,nonce:!0,noModule:!0};function B(s,a,l){var f,g,w=(l=l||v).createElement("script");if(w.text=s,a)for(f in k)(g=a[f]||a.getAttribute&&a.getAttribute(f))&&w.setAttribute(f,g);l.head.appendChild(w).parentNode.removeChild(w)}function H(s){return s==null?s+"":typeof s=="object"||typeof s=="function"?c[u.call(s)]||"object":typeof s}var O="3.5.1",d=function(s,a){return new d.fn.init(s,a)};function Y(s){var a=!!s&&"length"in s&&s.length,l=H(s);return!M(s)&&!S(s)&&(l==="array"||a===0||typeof a=="number"&&0<a&&a-1 in s)}d.fn=d.prototype={jquery:O,constructor:d,length:0,toArray:function(){return i.call(this)},get:function(s){return s==null?i.call(this):s<0?this[s+this.length]:this[s]},pushStack:function(s){var a=d.merge(this.constructor(),s);return a.prevObject=this,a},each:function(s){return d.each(this,s)},map:function(s){return this.pushStack(d.map(this,function(a,l){return s.call(a,l,a)}))},slice:function(){return this.pushStack(i.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(d.grep(this,function(s,a){return(a+1)%2}))},odd:function(){return this.pushStack(d.grep(this,function(s,a){return a%2}))},eq:function(s){var a=this.length,l=+s+(s<0?a:0);return this.pushStack(0<=l&&l<a?[this[l]]:[])},end:function(){return this.prevObject||this.constructor()},push:o,sort:e.sort,splice:e.splice},d.extend=d.fn.extend=function(){var s,a,l,f,g,w,A=arguments[0]||{},E=1,C=arguments.length,N=!1;for(typeof A=="boolean"&&(N=A,A=arguments[E]||{},E++),typeof A=="object"||M(A)||(A={}),E===C&&(A=this,E--);E<C;E++)if((s=arguments[E])!=null)for(a in s)f=s[a],a!=="__proto__"&&A!==f&&(N&&f&&(d.isPlainObject(f)||(g=Array.isArray(f)))?(l=A[a],w=g&&!Array.isArray(l)?[]:g||d.isPlainObject(l)?l:{},g=!1,A[a]=d.extend(N,w,f)):f!==void 0&&(A[a]=f));return A},d.extend({expando:"jQuery"+(O+Math.random()).replace(/\D/g,""),isReady:!0,error:function(s){throw new Error(s)},noop:function(){},isPlainObject:function(s){var a,l;return!(!s||u.call(s)!=="[object Object]")&&(!(a=n(s))||typeof(l=p.call(a,"constructor")&&a.constructor)=="function"&&y.call(l)===x)},isEmptyObject:function(s){var a;for(a in s)return!1;return!0},globalEval:function(s,a,l){B(s,{nonce:a&&a.nonce},l)},each:function(s,a){var l,f=0;if(Y(s))for(l=s.length;f<l&&a.call(s[f],f,s[f])!==!1;f++);else for(f in s)if(a.call(s[f],f,s[f])===!1)break;return s},makeArray:function(s,a){var l=a||[];return s!=null&&(Y(Object(s))?d.merge(l,typeof s=="string"?[s]:s):o.call(l,s)),l},inArray:function(s,a,l){return a==null?-1:h.call(a,s,l)},merge:function(s,a){for(var l=+a.length,f=0,g=s.length;f<l;f++)s[g++]=a[f];return s.length=g,s},grep:function(s,a,l){for(var f=[],g=0,w=s.length,A=!l;g<w;g++)!a(s[g],g)!==A&&f.push(s[g]);return f},map:function(s,a,l){var f,g,w=0,A=[];if(Y(s))for(f=s.length;w<f;w++)(g=a(s[w],w,l))!=null&&A.push(g);else for(w in s)(g=a(s[w],w,l))!=null&&A.push(g);return r(A)},guid:1,support:b}),typeof Symbol=="function"&&(d.fn[Symbol.iterator]=e[Symbol.iterator]),d.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(s,a){c["[object "+a+"]"]=a.toLowerCase()});var q=function(s){var a,l,f,g,w,A,E,C,N,P,U,F,D,Z,Q,J,Ct,Ut,fe,Tt="sizzle"+1*new Date,rt=s.document,re=0,xt=0,Rt=zs(),Yi=zs(),Rs=zs(),pe=zs(),Gn=function(T,_){return T===_&&(U=!0),0},ai={}.hasOwnProperty,oe=[],hi=oe.pop,Se=oe.push,kt=oe.push,me=oe.slice,ye=function(T,_){for(var I=0,j=T.length;I<j;I++)if(T[I]===_)return I;return-1},Je="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",at="[\\x20\\t\\r\\n\\f]",wt="(?:\\\\[\\da-fA-F]{1,6}"+at+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Vt="\\["+at+"*("+wt+")(?:"+at+"*([*^$|!~]?=)"+at+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+wt+"))|)"+at+"*\\]",ge=":("+wt+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+Vt+")*)|.*)\\)|)",Bt=new RegExp(at+"+","g"),xe=new RegExp("^"+at+"+|((?:^|[^\\\\])(?:\\\\.)*)"+at+"+$","g"),ci=new RegExp("^"+at+"*,"+at+"*"),ks=new RegExp("^"+at+"*([>+~]|"+at+")"+at+"*"),Hc=new RegExp(at+"|>"),Uc=new RegExp(ge),Vc=new RegExp("^"+wt+"$"),Is={ID:new RegExp("^#("+wt+")"),CLASS:new RegExp("^\\.("+wt+")"),TAG:new RegExp("^("+wt+"|[*])"),ATTR:new RegExp("^"+Vt),PSEUDO:new RegExp("^"+ge),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+at+"*(even|odd|(([+-]|)(\\d*)n|)"+at+"*(?:([+-]|)"+at+"*(\\d+)|))"+at+"*\\)|)","i"),bool:new RegExp("^(?:"+Je+")$","i"),needsContext:new RegExp("^"+at+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+at+"*((?:-\\d)?\\d*)"+at+"*\\)|)(?=[^-]|$)","i")},qc=/HTML$/i,Wc=/^(?:input|select|textarea|button)$/i,Gc=/^h\d$/i,$i=/^[^{]+\{\s*\[native \w/,Xc=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Vr=/[+~]/,ln=new RegExp("\\\\[\\da-fA-F]{1,6}"+at+"?|\\\\([^\\r\\n\\f])","g"),un=function(T,_){var I="0x"+T.slice(1)-65536;return _||(I<0?String.fromCharCode(I+65536):String.fromCharCode(I>>10|55296,1023&I|56320))},Ca=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Ra=function(T,_){return _?T==="\0"?"ï¿½":T.slice(0,-1)+"\\"+T.charCodeAt(T.length-1).toString(16)+" ":"\\"+T},ka=function(){F()},Yc=Ls(function(T){return T.disabled===!0&&T.nodeName.toLowerCase()==="fieldset"},{dir:"parentNode",next:"legend"});try{kt.apply(oe=me.call(rt.childNodes),rt.childNodes),oe[rt.childNodes.length].nodeType}catch{kt={apply:oe.length?function(_,I){Se.apply(_,me.call(I))}:function(_,I){for(var j=_.length,L=0;_[j++]=I[L++];);_.length=j-1}}}function _t(T,_,I,j){var L,V,W,G,$,st,nt,it=_&&_.ownerDocument,yt=_?_.nodeType:9;if(I=I||[],typeof T!="string"||!T||yt!==1&&yt!==9&&yt!==11)return I;if(!j&&(F(_),_=_||D,Q)){if(yt!==11&&($=Xc.exec(T)))if(L=$[1]){if(yt===9){if(!(W=_.getElementById(L)))return I;if(W.id===L)return I.push(W),I}else if(it&&(W=it.getElementById(L))&&fe(_,W)&&W.id===L)return I.push(W),I}else{if($[2])return kt.apply(I,_.getElementsByTagName(T)),I;if((L=$[3])&&l.getElementsByClassName&&_.getElementsByClassName)return kt.apply(I,_.getElementsByClassName(L)),I}if(l.qsa&&!pe[T+" "]&&(!J||!J.test(T))&&(yt!==1||_.nodeName.toLowerCase()!=="object")){if(nt=T,it=_,yt===1&&(Hc.test(T)||ks.test(T))){for((it=Vr.test(T)&&Wr(_.parentNode)||_)===_&&l.scope||((G=_.getAttribute("id"))?G=G.replace(Ca,Ra):_.setAttribute("id",G=Tt)),V=(st=A(T)).length;V--;)st[V]=(G?"#"+G:":scope")+" "+Ns(st[V]);nt=st.join(",")}try{return kt.apply(I,it.querySelectorAll(nt)),I}catch{pe(T,!0)}finally{G===Tt&&_.removeAttribute("id")}}}return C(T.replace(xe,"$1"),_,I,j)}function zs(){var T=[];return function _(I,j){return T.push(I+" ")>f.cacheLength&&delete _[T.shift()],_[I+" "]=j}}function je(T){return T[Tt]=!0,T}function He(T){var _=D.createElement("fieldset");try{return!!T(_)}catch{return!1}finally{_.parentNode&&_.parentNode.removeChild(_),_=null}}function qr(T,_){for(var I=T.split("|"),j=I.length;j--;)f.attrHandle[I[j]]=_}function Ia(T,_){var I=_&&T,j=I&&T.nodeType===1&&_.nodeType===1&&T.sourceIndex-_.sourceIndex;if(j)return j;if(I){for(;I=I.nextSibling;)if(I===_)return-1}return T?1:-1}function $c(T){return function(_){return _.nodeName.toLowerCase()==="input"&&_.type===T}}function Kc(T){return function(_){var I=_.nodeName.toLowerCase();return(I==="input"||I==="button")&&_.type===T}}function za(T){return function(_){return"form"in _?_.parentNode&&_.disabled===!1?"label"in _?"label"in _.parentNode?_.parentNode.disabled===T:_.disabled===T:_.isDisabled===T||_.isDisabled!==!T&&Yc(_)===T:_.disabled===T:"label"in _&&_.disabled===T}}function Xn(T){return je(function(_){return _=+_,je(function(I,j){for(var L,V=T([],I.length,_),W=V.length;W--;)I[L=V[W]]&&(I[L]=!(j[L]=I[L]))})})}function Wr(T){return T&&typeof T.getElementsByTagName<"u"&&T}for(a in l=_t.support={},w=_t.isXML=function(T){var _=T.namespaceURI,I=(T.ownerDocument||T).documentElement;return!qc.test(_||I&&I.nodeName||"HTML")},F=_t.setDocument=function(T){var _,I,j=T?T.ownerDocument||T:rt;return j!=D&&j.nodeType===9&&j.documentElement&&(Z=(D=j).documentElement,Q=!w(D),rt!=D&&(I=D.defaultView)&&I.top!==I&&(I.addEventListener?I.addEventListener("unload",ka,!1):I.attachEvent&&I.attachEvent("onunload",ka)),l.scope=He(function(L){return Z.appendChild(L).appendChild(D.createElement("div")),typeof L.querySelectorAll<"u"&&!L.querySelectorAll(":scope fieldset div").length}),l.attributes=He(function(L){return L.className="i",!L.getAttribute("className")}),l.getElementsByTagName=He(function(L){return L.appendChild(D.createComment("")),!L.getElementsByTagName("*").length}),l.getElementsByClassName=$i.test(D.getElementsByClassName),l.getById=He(function(L){return Z.appendChild(L).id=Tt,!D.getElementsByName||!D.getElementsByName(Tt).length}),l.getById?(f.filter.ID=function(L){var V=L.replace(ln,un);return function(W){return W.getAttribute("id")===V}},f.find.ID=function(L,V){if(typeof V.getElementById<"u"&&Q){var W=V.getElementById(L);return W?[W]:[]}}):(f.filter.ID=function(L){var V=L.replace(ln,un);return function(W){var G=typeof W.getAttributeNode<"u"&&W.getAttributeNode("id");return G&&G.value===V}},f.find.ID=function(L,V){if(typeof V.getElementById<"u"&&Q){var W,G,$,st=V.getElementById(L);if(st){if((W=st.getAttributeNode("id"))&&W.value===L)return[st];for($=V.getElementsByName(L),G=0;st=$[G++];)if((W=st.getAttributeNode("id"))&&W.value===L)return[st]}return[]}}),f.find.TAG=l.getElementsByTagName?function(L,V){return typeof V.getElementsByTagName<"u"?V.getElementsByTagName(L):l.qsa?V.querySelectorAll(L):void 0}:function(L,V){var W,G=[],$=0,st=V.getElementsByTagName(L);if(L==="*"){for(;W=st[$++];)W.nodeType===1&&G.push(W);return G}return st},f.find.CLASS=l.getElementsByClassName&&function(L,V){if(typeof V.getElementsByClassName<"u"&&Q)return V.getElementsByClassName(L)},Ct=[],J=[],(l.qsa=$i.test(D.querySelectorAll))&&(He(function(L){var V;Z.appendChild(L).innerHTML="<a id='"+Tt+"'></a><select id='"+Tt+"-\r\\' msallowcapture=''><option selected=''></option></select>",L.querySelectorAll("[msallowcapture^='']").length&&J.push("[*^$]="+at+`*(?:''|"")`),L.querySelectorAll("[selected]").length||J.push("\\["+at+"*(?:value|"+Je+")"),L.querySelectorAll("[id~="+Tt+"-]").length||J.push("~="),(V=D.createElement("input")).setAttribute("name",""),L.appendChild(V),L.querySelectorAll("[name='']").length||J.push("\\["+at+"*name"+at+"*="+at+`*(?:''|"")`),L.querySelectorAll(":checked").length||J.push(":checked"),L.querySelectorAll("a#"+Tt+"+*").length||J.push(".#.+[+~]"),L.querySelectorAll("\\\f"),J.push("[\\r\\n\\f]")}),He(function(L){L.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var V=D.createElement("input");V.setAttribute("type","hidden"),L.appendChild(V).setAttribute("name","D"),L.querySelectorAll("[name=d]").length&&J.push("name"+at+"*[*^$|!~]?="),L.querySelectorAll(":enabled").length!==2&&J.push(":enabled",":disabled"),Z.appendChild(L).disabled=!0,L.querySelectorAll(":disabled").length!==2&&J.push(":enabled",":disabled"),L.querySelectorAll("*,:x"),J.push(",.*:")})),(l.matchesSelector=$i.test(Ut=Z.matches||Z.webkitMatchesSelector||Z.mozMatchesSelector||Z.oMatchesSelector||Z.msMatchesSelector))&&He(function(L){l.disconnectedMatch=Ut.call(L,"*"),Ut.call(L,"[s!='']:x"),Ct.push("!=",ge)}),J=J.length&&new RegExp(J.join("|")),Ct=Ct.length&&new RegExp(Ct.join("|")),_=$i.test(Z.compareDocumentPosition),fe=_||$i.test(Z.contains)?function(L,V){var W=L.nodeType===9?L.documentElement:L,G=V&&V.parentNode;return L===G||!(!G||G.nodeType!==1||!(W.contains?W.contains(G):L.compareDocumentPosition&&16&L.compareDocumentPosition(G)))}:function(L,V){if(V){for(;V=V.parentNode;)if(V===L)return!0}return!1},Gn=_?function(L,V){if(L===V)return U=!0,0;var W=!L.compareDocumentPosition-!V.compareDocumentPosition;return W||(1&(W=(L.ownerDocument||L)==(V.ownerDocument||V)?L.compareDocumentPosition(V):1)||!l.sortDetached&&V.compareDocumentPosition(L)===W?L==D||L.ownerDocument==rt&&fe(rt,L)?-1:V==D||V.ownerDocument==rt&&fe(rt,V)?1:P?ye(P,L)-ye(P,V):0:4&W?-1:1)}:function(L,V){if(L===V)return U=!0,0;var W,G=0,$=L.parentNode,st=V.parentNode,nt=[L],it=[V];if(!$||!st)return L==D?-1:V==D?1:$?-1:st?1:P?ye(P,L)-ye(P,V):0;if($===st)return Ia(L,V);for(W=L;W=W.parentNode;)nt.unshift(W);for(W=V;W=W.parentNode;)it.unshift(W);for(;nt[G]===it[G];)G++;return G?Ia(nt[G],it[G]):nt[G]==rt?-1:it[G]==rt?1:0}),D},_t.matches=function(T,_){return _t(T,null,null,_)},_t.matchesSelector=function(T,_){if(F(T),l.matchesSelector&&Q&&!pe[_+" "]&&(!Ct||!Ct.test(_))&&(!J||!J.test(_)))try{var I=Ut.call(T,_);if(I||l.disconnectedMatch||T.document&&T.document.nodeType!==11)return I}catch{pe(_,!0)}return 0<_t(_,D,null,[T]).length},_t.contains=function(T,_){return(T.ownerDocument||T)!=D&&F(T),fe(T,_)},_t.attr=function(T,_){(T.ownerDocument||T)!=D&&F(T);var I=f.attrHandle[_.toLowerCase()],j=I&&ai.call(f.attrHandle,_.toLowerCase())?I(T,_,!Q):void 0;return j!==void 0?j:l.attributes||!Q?T.getAttribute(_):(j=T.getAttributeNode(_))&&j.specified?j.value:null},_t.escape=function(T){return(T+"").replace(Ca,Ra)},_t.error=function(T){throw new Error("Syntax error, unrecognized expression: "+T)},_t.uniqueSort=function(T){var _,I=[],j=0,L=0;if(U=!l.detectDuplicates,P=!l.sortStable&&T.slice(0),T.sort(Gn),U){for(;_=T[L++];)_===T[L]&&(j=I.push(L));for(;j--;)T.splice(I[j],1)}return P=null,T},g=_t.getText=function(T){var _,I="",j=0,L=T.nodeType;if(L){if(L===1||L===9||L===11){if(typeof T.textContent=="string")return T.textContent;for(T=T.firstChild;T;T=T.nextSibling)I+=g(T)}else if(L===3||L===4)return T.nodeValue}else for(;_=T[j++];)I+=g(_);return I},(f=_t.selectors={cacheLength:50,createPseudo:je,match:Is,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(T){return T[1]=T[1].replace(ln,un),T[3]=(T[3]||T[4]||T[5]||"").replace(ln,un),T[2]==="~="&&(T[3]=" "+T[3]+" "),T.slice(0,4)},CHILD:function(T){return T[1]=T[1].toLowerCase(),T[1].slice(0,3)==="nth"?(T[3]||_t.error(T[0]),T[4]=+(T[4]?T[5]+(T[6]||1):2*(T[3]==="even"||T[3]==="odd")),T[5]=+(T[7]+T[8]||T[3]==="odd")):T[3]&&_t.error(T[0]),T},PSEUDO:function(T){var _,I=!T[6]&&T[2];return Is.CHILD.test(T[0])?null:(T[3]?T[2]=T[4]||T[5]||"":I&&Uc.test(I)&&(_=A(I,!0))&&(_=I.indexOf(")",I.length-_)-I.length)&&(T[0]=T[0].slice(0,_),T[2]=I.slice(0,_)),T.slice(0,3))}},filter:{TAG:function(T){var _=T.replace(ln,un).toLowerCase();return T==="*"?function(){return!0}:function(I){return I.nodeName&&I.nodeName.toLowerCase()===_}},CLASS:function(T){var _=Rt[T+" "];return _||(_=new RegExp("(^|"+at+")"+T+"("+at+"|$)"))&&Rt(T,function(I){return _.test(typeof I.className=="string"&&I.className||typeof I.getAttribute<"u"&&I.getAttribute("class")||"")})},ATTR:function(T,_,I){return function(j){var L=_t.attr(j,T);return L==null?_==="!=":!_||(L+="",_==="="?L===I:_==="!="?L!==I:_==="^="?I&&L.indexOf(I)===0:_==="*="?I&&-1<L.indexOf(I):_==="$="?I&&L.slice(-I.length)===I:_==="~="?-1<(" "+L.replace(Bt," ")+" ").indexOf(I):_==="|="&&(L===I||L.slice(0,I.length+1)===I+"-"))}},CHILD:function(T,_,I,j,L){var V=T.slice(0,3)!=="nth",W=T.slice(-4)!=="last",G=_==="of-type";return j===1&&L===0?function($){return!!$.parentNode}:function($,st,nt){var it,yt,Dt,ht,qt,Wt,ee=V!==W?"nextSibling":"previousSibling",Et=$.parentNode,Qe=G&&$.nodeName.toLowerCase(),Jt=!nt&&!G,jt=!1;if(Et){if(V){for(;ee;){for(ht=$;ht=ht[ee];)if(G?ht.nodeName.toLowerCase()===Qe:ht.nodeType===1)return!1;Wt=ee=T==="only"&&!Wt&&"nextSibling"}return!0}if(Wt=[W?Et.firstChild:Et.lastChild],W&&Jt){for(jt=(qt=(it=(yt=(Dt=(ht=Et)[Tt]||(ht[Tt]={}))[ht.uniqueID]||(Dt[ht.uniqueID]={}))[T]||[])[0]===re&&it[1])&&it[2],ht=qt&&Et.childNodes[qt];ht=++qt&&ht&&ht[ee]||(jt=qt=0)||Wt.pop();)if(ht.nodeType===1&&++jt&&ht===$){yt[T]=[re,qt,jt];break}}else if(Jt&&(jt=qt=(it=(yt=(Dt=(ht=$)[Tt]||(ht[Tt]={}))[ht.uniqueID]||(Dt[ht.uniqueID]={}))[T]||[])[0]===re&&it[1]),jt===!1)for(;(ht=++qt&&ht&&ht[ee]||(jt=qt=0)||Wt.pop())&&!((G?ht.nodeName.toLowerCase()===Qe:ht.nodeType===1)&&++jt&&(Jt&&((yt=(Dt=ht[Tt]||(ht[Tt]={}))[ht.uniqueID]||(Dt[ht.uniqueID]={}))[T]=[re,jt]),ht===$)););return(jt-=L)===j||jt%j==0&&0<=jt/j}}},PSEUDO:function(T,_){var I,j=f.pseudos[T]||f.setFilters[T.toLowerCase()]||_t.error("unsupported pseudo: "+T);return j[Tt]?j(_):1<j.length?(I=[T,T,"",_],f.setFilters.hasOwnProperty(T.toLowerCase())?je(function(L,V){for(var W,G=j(L,_),$=G.length;$--;)L[W=ye(L,G[$])]=!(V[W]=G[$])}):function(L){return j(L,0,I)}):j}},pseudos:{not:je(function(T){var _=[],I=[],j=E(T.replace(xe,"$1"));return j[Tt]?je(function(L,V,W,G){for(var $,st=j(L,null,G,[]),nt=L.length;nt--;)($=st[nt])&&(L[nt]=!(V[nt]=$))}):function(L,V,W){return _[0]=L,j(_,null,W,I),_[0]=null,!I.pop()}}),has:je(function(T){return function(_){return 0<_t(T,_).length}}),contains:je(function(T){return T=T.replace(ln,un),function(_){return-1<(_.textContent||g(_)).indexOf(T)}}),lang:je(function(T){return Vc.test(T||"")||_t.error("unsupported lang: "+T),T=T.replace(ln,un).toLowerCase(),function(_){var I;do if(I=Q?_.lang:_.getAttribute("xml:lang")||_.getAttribute("lang"))return(I=I.toLowerCase())===T||I.indexOf(T+"-")===0;while((_=_.parentNode)&&_.nodeType===1);return!1}}),target:function(T){var _=s.location&&s.location.hash;return _&&_.slice(1)===T.id},root:function(T){return T===Z},focus:function(T){return T===D.activeElement&&(!D.hasFocus||D.hasFocus())&&!!(T.type||T.href||~T.tabIndex)},enabled:za(!1),disabled:za(!0),checked:function(T){var _=T.nodeName.toLowerCase();return _==="input"&&!!T.checked||_==="option"&&!!T.selected},selected:function(T){return T.parentNode&&T.parentNode.selectedIndex,T.selected===!0},empty:function(T){for(T=T.firstChild;T;T=T.nextSibling)if(T.nodeType<6)return!1;return!0},parent:function(T){return!f.pseudos.empty(T)},header:function(T){return Gc.test(T.nodeName)},input:function(T){return Wc.test(T.nodeName)},button:function(T){var _=T.nodeName.toLowerCase();return _==="input"&&T.type==="button"||_==="button"},text:function(T){var _;return T.nodeName.toLowerCase()==="input"&&T.type==="text"&&((_=T.getAttribute("type"))==null||_.toLowerCase()==="text")},first:Xn(function(){return[0]}),last:Xn(function(T,_){return[_-1]}),eq:Xn(function(T,_,I){return[I<0?I+_:I]}),even:Xn(function(T,_){for(var I=0;I<_;I+=2)T.push(I);return T}),odd:Xn(function(T,_){for(var I=1;I<_;I+=2)T.push(I);return T}),lt:Xn(function(T,_,I){for(var j=I<0?I+_:_<I?_:I;0<=--j;)T.push(j);return T}),gt:Xn(function(T,_,I){for(var j=I<0?I+_:I;++j<_;)T.push(j);return T})}}).pseudos.nth=f.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})f.pseudos[a]=$c(a);for(a in{submit:!0,reset:!0})f.pseudos[a]=Kc(a);function Na(){}function Ns(T){for(var _=0,I=T.length,j="";_<I;_++)j+=T[_].value;return j}function Ls(T,_,I){var j=_.dir,L=_.next,V=L||j,W=I&&V==="parentNode",G=xt++;return _.first?function($,st,nt){for(;$=$[j];)if($.nodeType===1||W)return T($,st,nt);return!1}:function($,st,nt){var it,yt,Dt,ht=[re,G];if(nt){for(;$=$[j];)if(($.nodeType===1||W)&&T($,st,nt))return!0}else for(;$=$[j];)if($.nodeType===1||W)if(yt=(Dt=$[Tt]||($[Tt]={}))[$.uniqueID]||(Dt[$.uniqueID]={}),L&&L===$.nodeName.toLowerCase())$=$[j]||$;else{if((it=yt[V])&&it[0]===re&&it[1]===G)return ht[2]=it[2];if((yt[V]=ht)[2]=T($,st,nt))return!0}return!1}}function Gr(T){return 1<T.length?function(_,I,j){for(var L=T.length;L--;)if(!T[L](_,I,j))return!1;return!0}:T[0]}function Fs(T,_,I,j,L){for(var V,W=[],G=0,$=T.length,st=_!=null;G<$;G++)(V=T[G])&&(I&&!I(V,j,L)||(W.push(V),st&&_.push(G)));return W}function Xr(T,_,I,j,L,V){return j&&!j[Tt]&&(j=Xr(j)),L&&!L[Tt]&&(L=Xr(L,V)),je(function(W,G,$,st){var nt,it,yt,Dt=[],ht=[],qt=G.length,Wt=W||function(Qe,Jt,jt){for(var Ue=0,Ps=Jt.length;Ue<Ps;Ue++)_t(Qe,Jt[Ue],jt);return jt}(_||"*",$.nodeType?[$]:$,[]),ee=!T||!W&&_?Wt:Fs(Wt,Dt,T,$,st),Et=I?L||(W?T:qt||j)?[]:G:ee;if(I&&I(ee,Et,$,st),j)for(nt=Fs(Et,ht),j(nt,[],$,st),it=nt.length;it--;)(yt=nt[it])&&(Et[ht[it]]=!(ee[ht[it]]=yt));if(W){if(L||T){if(L){for(nt=[],it=Et.length;it--;)(yt=Et[it])&&nt.push(ee[it]=yt);L(null,Et=[],nt,st)}for(it=Et.length;it--;)(yt=Et[it])&&-1<(nt=L?ye(W,yt):Dt[it])&&(W[nt]=!(G[nt]=yt))}}else Et=Fs(Et===G?Et.splice(qt,Et.length):Et),L?L(null,G,Et,st):kt.apply(G,Et)})}function Yr(T){for(var _,I,j,L=T.length,V=f.relative[T[0].type],W=V||f.relative[" "],G=V?1:0,$=Ls(function(it){return it===_},W,!0),st=Ls(function(it){return-1<ye(_,it)},W,!0),nt=[function(it,yt,Dt){var ht=!V&&(Dt||yt!==N)||((_=yt).nodeType?$(it,yt,Dt):st(it,yt,Dt));return _=null,ht}];G<L;G++)if(I=f.relative[T[G].type])nt=[Ls(Gr(nt),I)];else{if((I=f.filter[T[G].type].apply(null,T[G].matches))[Tt]){for(j=++G;j<L&&!f.relative[T[j].type];j++);return Xr(1<G&&Gr(nt),1<G&&Ns(T.slice(0,G-1).concat({value:T[G-2].type===" "?"*":""})).replace(xe,"$1"),I,G<j&&Yr(T.slice(G,j)),j<L&&Yr(T=T.slice(j)),j<L&&Ns(T))}nt.push(I)}return Gr(nt)}return Na.prototype=f.filters=f.pseudos,f.setFilters=new Na,A=_t.tokenize=function(T,_){var I,j,L,V,W,G,$,st=Yi[T+" "];if(st)return _?0:st.slice(0);for(W=T,G=[],$=f.preFilter;W;){for(V in I&&!(j=ci.exec(W))||(j&&(W=W.slice(j[0].length)||W),G.push(L=[])),I=!1,(j=ks.exec(W))&&(I=j.shift(),L.push({value:I,type:j[0].replace(xe," ")}),W=W.slice(I.length)),f.filter)!(j=Is[V].exec(W))||$[V]&&!(j=$[V](j))||(I=j.shift(),L.push({value:I,type:V,matches:j}),W=W.slice(I.length));if(!I)break}return _?W.length:W?_t.error(T):Yi(T,G).slice(0)},E=_t.compile=function(T,_){var I,j,L,V,W,G,$=[],st=[],nt=Rs[T+" "];if(!nt){for(_||(_=A(T)),I=_.length;I--;)(nt=Yr(_[I]))[Tt]?$.push(nt):st.push(nt);(nt=Rs(T,(j=st,V=0<(L=$).length,W=0<j.length,G=function(it,yt,Dt,ht,qt){var Wt,ee,Et,Qe=0,Jt="0",jt=it&&[],Ue=[],Ps=N,La=it||W&&f.find.TAG("*",qt),Fa=re+=Ps==null?1:Math.random()||.1,Zc=La.length;for(qt&&(N=yt==D||yt||qt);Jt!==Zc&&(Wt=La[Jt])!=null;Jt++){if(W&&Wt){for(ee=0,yt||Wt.ownerDocument==D||(F(Wt),Dt=!Q);Et=j[ee++];)if(Et(Wt,yt||D,Dt)){ht.push(Wt);break}qt&&(re=Fa)}V&&((Wt=!Et&&Wt)&&Qe--,it&&jt.push(Wt))}if(Qe+=Jt,V&&Jt!==Qe){for(ee=0;Et=L[ee++];)Et(jt,Ue,yt,Dt);if(it){if(0<Qe)for(;Jt--;)jt[Jt]||Ue[Jt]||(Ue[Jt]=hi.call(ht));Ue=Fs(Ue)}kt.apply(ht,Ue),qt&&!it&&0<Ue.length&&1<Qe+L.length&&_t.uniqueSort(ht)}return qt&&(re=Fa,N=Ps),jt},V?je(G):G))).selector=T}return nt},C=_t.select=function(T,_,I,j){var L,V,W,G,$,st=typeof T=="function"&&T,nt=!j&&A(T=st.selector||T);if(I=I||[],nt.length===1){if(2<(V=nt[0]=nt[0].slice(0)).length&&(W=V[0]).type==="ID"&&_.nodeType===9&&Q&&f.relative[V[1].type]){if(!(_=(f.find.ID(W.matches[0].replace(ln,un),_)||[])[0]))return I;st&&(_=_.parentNode),T=T.slice(V.shift().value.length)}for(L=Is.needsContext.test(T)?0:V.length;L--&&(W=V[L],!f.relative[G=W.type]);)if(($=f.find[G])&&(j=$(W.matches[0].replace(ln,un),Vr.test(V[0].type)&&Wr(_.parentNode)||_))){if(V.splice(L,1),!(T=j.length&&Ns(V)))return kt.apply(I,j),I;break}}return(st||E(T,nt))(j,_,!Q,I,!_||Vr.test(T)&&Wr(_.parentNode)||_),I},l.sortStable=Tt.split("").sort(Gn).join("")===Tt,l.detectDuplicates=!!U,F(),l.sortDetached=He(function(T){return 1&T.compareDocumentPosition(D.createElement("fieldset"))}),He(function(T){return T.innerHTML="<a href='#'></a>",T.firstChild.getAttribute("href")==="#"})||qr("type|href|height|width",function(T,_,I){if(!I)return T.getAttribute(_,_.toLowerCase()==="type"?1:2)}),l.attributes&&He(function(T){return T.innerHTML="<input/>",T.firstChild.setAttribute("value",""),T.firstChild.getAttribute("value")===""})||qr("value",function(T,_,I){if(!I&&T.nodeName.toLowerCase()==="input")return T.defaultValue}),He(function(T){return T.getAttribute("disabled")==null})||qr(Je,function(T,_,I){var j;if(!I)return T[_]===!0?_.toLowerCase():(j=T.getAttributeNode(_))&&j.specified?j.value:null}),_t}(m);d.find=q,d.expr=q.selectors,d.expr[":"]=d.expr.pseudos,d.uniqueSort=d.unique=q.uniqueSort,d.text=q.getText,d.isXMLDoc=q.isXML,d.contains=q.contains,d.escapeSelector=q.escape;var X=function(s,a,l){for(var f=[],g=l!==void 0;(s=s[a])&&s.nodeType!==9;)if(s.nodeType===1){if(g&&d(s).is(l))break;f.push(s)}return f},tt=function(s,a){for(var l=[];s;s=s.nextSibling)s.nodeType===1&&s!==a&&l.push(s);return l},ct=d.expr.match.needsContext;function ot(s,a){return s.nodeName&&s.nodeName.toLowerCase()===a.toLowerCase()}var ut=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function dt(s,a,l){return M(a)?d.grep(s,function(f,g){return!!a.call(f,g,f)!==l}):a.nodeType?d.grep(s,function(f){return f===a!==l}):typeof a!="string"?d.grep(s,function(f){return-1<h.call(a,f)!==l}):d.filter(a,s,l)}d.filter=function(s,a,l){var f=a[0];return l&&(s=":not("+s+")"),a.length===1&&f.nodeType===1?d.find.matchesSelector(f,s)?[f]:[]:d.find.matches(s,d.grep(a,function(g){return g.nodeType===1}))},d.fn.extend({find:function(s){var a,l,f=this.length,g=this;if(typeof s!="string")return this.pushStack(d(s).filter(function(){for(a=0;a<f;a++)if(d.contains(g[a],this))return!0}));for(l=this.pushStack([]),a=0;a<f;a++)d.find(s,g[a],l);return 1<f?d.uniqueSort(l):l},filter:function(s){return this.pushStack(dt(this,s||[],!1))},not:function(s){return this.pushStack(dt(this,s||[],!0))},is:function(s){return!!dt(this,typeof s=="string"&&ct.test(s)?d(s):s||[],!1).length}});var vt,Lt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(d.fn.init=function(s,a,l){var f,g;if(!s)return this;if(l=l||vt,typeof s=="string"){if(!(f=s[0]==="<"&&s[s.length-1]===">"&&3<=s.length?[null,s,null]:Lt.exec(s))||!f[1]&&a)return!a||a.jquery?(a||l).find(s):this.constructor(a).find(s);if(f[1]){if(a=a instanceof d?a[0]:a,d.merge(this,d.parseHTML(f[1],a&&a.nodeType?a.ownerDocument||a:v,!0)),ut.test(f[1])&&d.isPlainObject(a))for(f in a)M(this[f])?this[f](a[f]):this.attr(f,a[f]);return this}return(g=v.getElementById(f[2]))&&(this[0]=g,this.length=1),this}return s.nodeType?(this[0]=s,this.length=1,this):M(s)?l.ready!==void 0?l.ready(s):s(d):d.makeArray(s,this)}).prototype=d.fn,vt=d(v);var Ft=/^(?:parents|prev(?:Until|All))/,ce={children:!0,contents:!0,next:!0,prev:!0};function ie(s,a){for(;(s=s[a])&&s.nodeType!==1;);return s}d.fn.extend({has:function(s){var a=d(s,this),l=a.length;return this.filter(function(){for(var f=0;f<l;f++)if(d.contains(this,a[f]))return!0})},closest:function(s,a){var l,f=0,g=this.length,w=[],A=typeof s!="string"&&d(s);if(!ct.test(s)){for(;f<g;f++)for(l=this[f];l&&l!==a;l=l.parentNode)if(l.nodeType<11&&(A?-1<A.index(l):l.nodeType===1&&d.find.matchesSelector(l,s))){w.push(l);break}}return this.pushStack(1<w.length?d.uniqueSort(w):w)},index:function(s){return s?typeof s=="string"?h.call(d(s),this[0]):h.call(this,s.jquery?s[0]:s):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(s,a){return this.pushStack(d.uniqueSort(d.merge(this.get(),d(s,a))))},addBack:function(s){return this.add(s==null?this.prevObject:this.prevObject.filter(s))}}),d.each({parent:function(s){var a=s.parentNode;return a&&a.nodeType!==11?a:null},parents:function(s){return X(s,"parentNode")},parentsUntil:function(s,a,l){return X(s,"parentNode",l)},next:function(s){return ie(s,"nextSibling")},prev:function(s){return ie(s,"previousSibling")},nextAll:function(s){return X(s,"nextSibling")},prevAll:function(s){return X(s,"previousSibling")},nextUntil:function(s,a,l){return X(s,"nextSibling",l)},prevUntil:function(s,a,l){return X(s,"previousSibling",l)},siblings:function(s){return tt((s.parentNode||{}).firstChild,s)},children:function(s){return tt(s.firstChild)},contents:function(s){return s.contentDocument!=null&&n(s.contentDocument)?s.contentDocument:(ot(s,"template")&&(s=s.content||s),d.merge([],s.childNodes))}},function(s,a){d.fn[s]=function(l,f){var g=d.map(this,a,l);return s.slice(-5)!=="Until"&&(f=l),f&&typeof f=="string"&&(g=d.filter(f,g)),1<this.length&&(ce[s]||d.uniqueSort(g),Ft.test(s)&&g.reverse()),this.pushStack(g)}});var bt=/[^\x20\t\r\n\f]+/g;function St(s){return s}function Pt(s){throw s}function ze(s,a,l,f){var g;try{s&&M(g=s.promise)?g.call(s).done(a).fail(l):s&&M(g=s.then)?g.call(s,a,l):a.apply(void 0,[s].slice(f))}catch(w){l.apply(void 0,[w])}}d.Callbacks=function(s){var a,l;s=typeof s=="string"?(a=s,l={},d.each(a.match(bt)||[],function(F,D){l[D]=!0}),l):d.extend({},s);var f,g,w,A,E=[],C=[],N=-1,P=function(){for(A=A||s.once,w=f=!0;C.length;N=-1)for(g=C.shift();++N<E.length;)E[N].apply(g[0],g[1])===!1&&s.stopOnFalse&&(N=E.length,g=!1);s.memory||(g=!1),f=!1,A&&(E=g?[]:"")},U={add:function(){return E&&(g&&!f&&(N=E.length-1,C.push(g)),function F(D){d.each(D,function(Z,Q){M(Q)?s.unique&&U.has(Q)||E.push(Q):Q&&Q.length&&H(Q)!=="string"&&F(Q)})}(arguments),g&&!f&&P()),this},remove:function(){return d.each(arguments,function(F,D){for(var Z;-1<(Z=d.inArray(D,E,Z));)E.splice(Z,1),Z<=N&&N--}),this},has:function(F){return F?-1<d.inArray(F,E):0<E.length},empty:function(){return E&&(E=[]),this},disable:function(){return A=C=[],E=g="",this},disabled:function(){return!E},lock:function(){return A=C=[],g||f||(E=g=""),this},locked:function(){return!!A},fireWith:function(F,D){return A||(D=[F,(D=D||[]).slice?D.slice():D],C.push(D),f||P()),this},fire:function(){return U.fireWith(this,arguments),this},fired:function(){return!!w}};return U},d.extend({Deferred:function(s){var a=[["notify","progress",d.Callbacks("memory"),d.Callbacks("memory"),2],["resolve","done",d.Callbacks("once memory"),d.Callbacks("once memory"),0,"resolved"],["reject","fail",d.Callbacks("once memory"),d.Callbacks("once memory"),1,"rejected"]],l="pending",f={state:function(){return l},always:function(){return g.done(arguments).fail(arguments),this},catch:function(w){return f.then(null,w)},pipe:function(){var w=arguments;return d.Deferred(function(A){d.each(a,function(E,C){var N=M(w[C[4]])&&w[C[4]];g[C[1]](function(){var P=N&&N.apply(this,arguments);P&&M(P.promise)?P.promise().progress(A.notify).done(A.resolve).fail(A.reject):A[C[0]+"With"](this,N?[P]:arguments)})}),w=null}).promise()},then:function(w,A,E){var C=0;function N(P,U,F,D){return function(){var Z=this,Q=arguments,J=function(){var Ut,fe;if(!(P<C)){if((Ut=F.apply(Z,Q))===U.promise())throw new TypeError("Thenable self-resolution");fe=Ut&&(typeof Ut=="object"||typeof Ut=="function")&&Ut.then,M(fe)?D?fe.call(Ut,N(C,U,St,D),N(C,U,Pt,D)):(C++,fe.call(Ut,N(C,U,St,D),N(C,U,Pt,D),N(C,U,St,U.notifyWith))):(F!==St&&(Z=void 0,Q=[Ut]),(D||U.resolveWith)(Z,Q))}},Ct=D?J:function(){try{J()}catch(Ut){d.Deferred.exceptionHook&&d.Deferred.exceptionHook(Ut,Ct.stackTrace),C<=P+1&&(F!==Pt&&(Z=void 0,Q=[Ut]),U.rejectWith(Z,Q))}};P?Ct():(d.Deferred.getStackHook&&(Ct.stackTrace=d.Deferred.getStackHook()),m.setTimeout(Ct))}}return d.Deferred(function(P){a[0][3].add(N(0,P,M(E)?E:St,P.notifyWith)),a[1][3].add(N(0,P,M(w)?w:St)),a[2][3].add(N(0,P,M(A)?A:Pt))}).promise()},promise:function(w){return w!=null?d.extend(w,f):f}},g={};return d.each(a,function(w,A){var E=A[2],C=A[5];f[A[1]]=E.add,C&&E.add(function(){l=C},a[3-w][2].disable,a[3-w][3].disable,a[0][2].lock,a[0][3].lock),E.add(A[3].fire),g[A[0]]=function(){return g[A[0]+"With"](this===g?void 0:this,arguments),this},g[A[0]+"With"]=E.fireWith}),f.promise(g),s&&s.call(g,g),g},when:function(s){var a=arguments.length,l=a,f=Array(l),g=i.call(arguments),w=d.Deferred(),A=function(E){return function(C){f[E]=this,g[E]=1<arguments.length?i.call(arguments):C,--a||w.resolveWith(f,g)}};if(a<=1&&(ze(s,w.done(A(l)).resolve,w.reject,!a),w.state()==="pending"||M(g[l]&&g[l].then)))return w.then();for(;l--;)ze(g[l],A(l),w.reject);return w.promise()}});var an=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;d.Deferred.exceptionHook=function(s,a){m.console&&m.console.warn&&s&&an.test(s.name)&&m.console.warn("jQuery.Deferred exception: "+s.message,s.stack,a)},d.readyException=function(s){m.setTimeout(function(){throw s})};var On=d.Deferred();function hn(){v.removeEventListener("DOMContentLoaded",hn),m.removeEventListener("load",hn),d.ready()}d.fn.ready=function(s){return On.then(s).catch(function(a){d.readyException(a)}),this},d.extend({isReady:!1,readyWait:1,ready:function(s){(s===!0?--d.readyWait:d.isReady)||(d.isReady=!0)!==s&&0<--d.readyWait||On.resolveWith(v,[d])}}),d.ready.then=On.then,v.readyState==="complete"||v.readyState!=="loading"&&!v.documentElement.doScroll?m.setTimeout(d.ready):(v.addEventListener("DOMContentLoaded",hn),m.addEventListener("load",hn));var Ne=function(s,a,l,f,g,w,A){var E=0,C=s.length,N=l==null;if(H(l)==="object")for(E in g=!0,l)Ne(s,a,E,l[E],!0,w,A);else if(f!==void 0&&(g=!0,M(f)||(A=!0),N&&(A?(a.call(s,f),a=null):(N=a,a=function(P,U,F){return N.call(d(P),F)})),a))for(;E<C;E++)a(s[E],l,A?f:f.call(s[E],E,a(s[E],l)));return g?s:N?a.call(s):C?a(s[0],l):w},Er=/^-ms-/,Cr=/-([a-z])/g;function xs(s,a){return a.toUpperCase()}function le(s){return s.replace(Er,"ms-").replace(Cr,xs)}var An=function(s){return s.nodeType===1||s.nodeType===9||!+s.nodeType};function Bn(){this.expando=d.expando+Bn.uid++}Bn.uid=1,Bn.prototype={cache:function(s){var a=s[this.expando];return a||(a={},An(s)&&(s.nodeType?s[this.expando]=a:Object.defineProperty(s,this.expando,{value:a,configurable:!0}))),a},set:function(s,a,l){var f,g=this.cache(s);if(typeof a=="string")g[le(a)]=l;else for(f in a)g[le(f)]=a[f];return g},get:function(s,a){return a===void 0?this.cache(s):s[this.expando]&&s[this.expando][le(a)]},access:function(s,a,l){return a===void 0||a&&typeof a=="string"&&l===void 0?this.get(s,a):(this.set(s,a,l),l!==void 0?l:a)},remove:function(s,a){var l,f=s[this.expando];if(f!==void 0){if(a!==void 0)for(l=(a=Array.isArray(a)?a.map(le):(a=le(a))in f?[a]:a.match(bt)||[]).length;l--;)delete f[a[l]];(a===void 0||d.isEmptyObject(f))&&(s.nodeType?s[this.expando]=void 0:delete s[this.expando])}},hasData:function(s){var a=s[this.expando];return a!==void 0&&!d.isEmptyObject(a)}};var et=new Bn,Yt=new Bn,bs=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ws=/[A-Z]/g;function Ms(s,a,l){var f,g;if(l===void 0&&s.nodeType===1)if(f="data-"+a.replace(ws,"-$&").toLowerCase(),typeof(l=s.getAttribute(f))=="string"){try{l=(g=l)==="true"||g!=="false"&&(g==="null"?null:g===+g+""?+g:bs.test(g)?JSON.parse(g):g)}catch{}Yt.set(s,a,l)}else l=void 0;return l}d.extend({hasData:function(s){return Yt.hasData(s)||et.hasData(s)},data:function(s,a,l){return Yt.access(s,a,l)},removeData:function(s,a){Yt.remove(s,a)},_data:function(s,a,l){return et.access(s,a,l)},_removeData:function(s,a){et.remove(s,a)}}),d.fn.extend({data:function(s,a){var l,f,g,w=this[0],A=w&&w.attributes;if(s===void 0){if(this.length&&(g=Yt.get(w),w.nodeType===1&&!et.get(w,"hasDataAttrs"))){for(l=A.length;l--;)A[l]&&(f=A[l].name).indexOf("data-")===0&&(f=le(f.slice(5)),Ms(w,f,g[f]));et.set(w,"hasDataAttrs",!0)}return g}return typeof s=="object"?this.each(function(){Yt.set(this,s)}):Ne(this,function(E){var C;if(w&&E===void 0)return(C=Yt.get(w,s))!==void 0||(C=Ms(w,s))!==void 0?C:void 0;this.each(function(){Yt.set(this,s,E)})},null,a,1<arguments.length,null,!0)},removeData:function(s){return this.each(function(){Yt.remove(this,s)})}}),d.extend({queue:function(s,a,l){var f;if(s)return a=(a||"fx")+"queue",f=et.get(s,a),l&&(!f||Array.isArray(l)?f=et.access(s,a,d.makeArray(l)):f.push(l)),f||[]},dequeue:function(s,a){a=a||"fx";var l=d.queue(s,a),f=l.length,g=l.shift(),w=d._queueHooks(s,a);g==="inprogress"&&(g=l.shift(),f--),g&&(a==="fx"&&l.unshift("inprogress"),delete w.stop,g.call(s,function(){d.dequeue(s,a)},w)),!f&&w&&w.empty.fire()},_queueHooks:function(s,a){var l=a+"queueHooks";return et.get(s,l)||et.access(s,l,{empty:d.Callbacks("once memory").add(function(){et.remove(s,[a+"queue",l])})})}}),d.fn.extend({queue:function(s,a){var l=2;return typeof s!="string"&&(a=s,s="fx",l--),arguments.length<l?d.queue(this[0],s):a===void 0?this:this.each(function(){var f=d.queue(this,s,a);d._queueHooks(this,s),s==="fx"&&f[0]!=="inprogress"&&d.dequeue(this,s)})},dequeue:function(s){return this.each(function(){d.dequeue(this,s)})},clearQueue:function(s){return this.queue(s||"fx",[])},promise:function(s,a){var l,f=1,g=d.Deferred(),w=this,A=this.length,E=function(){--f||g.resolveWith(w,[w])};for(typeof s!="string"&&(a=s,s=void 0),s=s||"fx";A--;)(l=et.get(w[A],s+"queueHooks"))&&l.empty&&(f++,l.empty.add(E));return E(),g.promise(a)}});var As=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Tn=new RegExp("^(?:([+-])=|)("+As+")([a-z%]*)$","i"),ue=["Top","Right","Bottom","Left"],de=v.documentElement,vn=function(s){return d.contains(s.ownerDocument,s)},Rr={composed:!0};de.getRootNode&&(vn=function(s){return d.contains(s.ownerDocument,s)||s.getRootNode(Rr)===s.ownerDocument});var jn=function(s,a){return(s=a||s).style.display==="none"||s.style.display===""&&vn(s)&&d.css(s,"display")==="none"};function Ts(s,a,l,f){var g,w,A=20,E=f?function(){return f.cur()}:function(){return d.css(s,a,"")},C=E(),N=l&&l[3]||(d.cssNumber[a]?"":"px"),P=s.nodeType&&(d.cssNumber[a]||N!=="px"&&+C)&&Tn.exec(d.css(s,a));if(P&&P[3]!==N){for(C/=2,N=N||P[3],P=+C||1;A--;)d.style(s,a,P+N),(1-w)*(1-(w=E()/C||.5))<=0&&(A=0),P/=w;P*=2,d.style(s,a,P+N),l=l||[]}return l&&(P=+P||+C||0,g=l[1]?P+(l[1]+1)*l[2]:+l[2],f&&(f.unit=N,f.start=P,f.end=g)),g}var ji={};function cn(s,a){for(var l,f,g,w,A,E,C,N=[],P=0,U=s.length;P<U;P++)(f=s[P]).style&&(l=f.style.display,a?(l==="none"&&(N[P]=et.get(f,"display")||null,N[P]||(f.style.display="")),f.style.display===""&&jn(f)&&(N[P]=(C=A=w=void 0,A=(g=f).ownerDocument,E=g.nodeName,(C=ji[E])||(w=A.body.appendChild(A.createElement(E)),C=d.css(w,"display"),w.parentNode.removeChild(w),C==="none"&&(C="block"),ji[E]=C)))):l!=="none"&&(N[P]="none",et.set(f,"display",l)));for(P=0;P<U;P++)N[P]!=null&&(s[P].style.display=N[P]);return s}d.fn.extend({show:function(){return cn(this,!0)},hide:function(){return cn(this)},toggle:function(s){return typeof s=="boolean"?s?this.show():this.hide():this.each(function(){jn(this)?d(this).show():d(this).hide()})}});var Le,Hn,Un=/^(?:checkbox|radio)$/i,Hi=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,vs=/^$|^module$|\/(?:java|ecma)script/i;Le=v.createDocumentFragment().appendChild(v.createElement("div")),(Hn=v.createElement("input")).setAttribute("type","radio"),Hn.setAttribute("checked","checked"),Hn.setAttribute("name","t"),Le.appendChild(Hn),b.checkClone=Le.cloneNode(!0).cloneNode(!0).lastChild.checked,Le.innerHTML="<textarea>x</textarea>",b.noCloneChecked=!!Le.cloneNode(!0).lastChild.defaultValue,Le.innerHTML="<option></option>",b.option=!!Le.lastChild;var se={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Kt(s,a){var l;return l=typeof s.getElementsByTagName<"u"?s.getElementsByTagName(a||"*"):typeof s.querySelectorAll<"u"?s.querySelectorAll(a||"*"):[],a===void 0||a&&ot(s,a)?d.merge([s],l):l}function si(s,a){for(var l=0,f=s.length;l<f;l++)et.set(s[l],"globalEval",!a||et.get(a[l],"globalEval"))}se.tbody=se.tfoot=se.colgroup=se.caption=se.thead,se.th=se.td,b.option||(se.optgroup=se.option=[1,"<select multiple='multiple'>","</select>"]);var Sn=/<|&#?\w+;/;function kr(s,a,l,f,g){for(var w,A,E,C,N,P,U=a.createDocumentFragment(),F=[],D=0,Z=s.length;D<Z;D++)if((w=s[D])||w===0)if(H(w)==="object")d.merge(F,w.nodeType?[w]:w);else if(Sn.test(w)){for(A=A||U.appendChild(a.createElement("div")),E=(Hi.exec(w)||["",""])[1].toLowerCase(),C=se[E]||se._default,A.innerHTML=C[1]+d.htmlPrefilter(w)+C[2],P=C[0];P--;)A=A.lastChild;d.merge(F,A.childNodes),(A=U.firstChild).textContent=""}else F.push(a.createTextNode(w));for(U.textContent="",D=0;w=F[D++];)if(f&&-1<d.inArray(w,f))g&&g.push(w);else if(N=vn(w),A=Kt(U.appendChild(w),"script"),N&&si(A),l)for(P=0;w=A[P++];)vs.test(w.type||"")&&l.push(w);return U}var R=/^key/,K=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,lt=/^([^.]*)(?:\.(.+)|)/;function gt(){return!0}function zt(){return!1}function Ze(s,a){return s===function(){try{return v.activeElement}catch{}}()==(a==="focus")}function Zt(s,a,l,f,g,w){var A,E;if(typeof a=="object"){for(E in typeof l!="string"&&(f=f||l,l=void 0),a)Zt(s,E,l,f,a[E],w);return s}if(f==null&&g==null?(g=l,f=l=void 0):g==null&&(typeof l=="string"?(g=f,f=void 0):(g=f,f=l,l=void 0)),g===!1)g=zt;else if(!g)return s;return w===1&&(A=g,(g=function(C){return d().off(C),A.apply(this,arguments)}).guid=A.guid||(A.guid=d.guid++)),s.each(function(){d.event.add(this,a,g,f,l)})}function Ui(s,a,l){l?(et.set(s,a,!1),d.event.add(s,a,{namespace:!1,handler:function(f){var g,w,A=et.get(this,a);if(1&f.isTrigger&&this[a]){if(A.length)(d.event.special[a]||{}).delegateType&&f.stopPropagation();else if(A=i.call(arguments),et.set(this,a,A),g=l(this,a),this[a](),A!==(w=et.get(this,a))||g?et.set(this,a,!1):w={},A!==w)return f.stopImmediatePropagation(),f.preventDefault(),w.value}else A.length&&(et.set(this,a,{value:d.event.trigger(d.extend(A[0],d.Event.prototype),A.slice(1),this)}),f.stopImmediatePropagation())}})):et.get(s,a)===void 0&&d.event.add(s,a,gt)}d.event={global:{},add:function(s,a,l,f,g){var w,A,E,C,N,P,U,F,D,Z,Q,J=et.get(s);if(An(s))for(l.handler&&(l=(w=l).handler,g=w.selector),g&&d.find.matchesSelector(de,g),l.guid||(l.guid=d.guid++),(C=J.events)||(C=J.events=Object.create(null)),(A=J.handle)||(A=J.handle=function(Ct){return typeof d<"u"&&d.event.triggered!==Ct.type?d.event.dispatch.apply(s,arguments):void 0}),N=(a=(a||"").match(bt)||[""]).length;N--;)D=Q=(E=lt.exec(a[N])||[])[1],Z=(E[2]||"").split(".").sort(),D&&(U=d.event.special[D]||{},D=(g?U.delegateType:U.bindType)||D,U=d.event.special[D]||{},P=d.extend({type:D,origType:Q,data:f,handler:l,guid:l.guid,selector:g,needsContext:g&&d.expr.match.needsContext.test(g),namespace:Z.join(".")},w),(F=C[D])||((F=C[D]=[]).delegateCount=0,U.setup&&U.setup.call(s,f,Z,A)!==!1||s.addEventListener&&s.addEventListener(D,A)),U.add&&(U.add.call(s,P),P.handler.guid||(P.handler.guid=l.guid)),g?F.splice(F.delegateCount++,0,P):F.push(P),d.event.global[D]=!0)},remove:function(s,a,l,f,g){var w,A,E,C,N,P,U,F,D,Z,Q,J=et.hasData(s)&&et.get(s);if(J&&(C=J.events)){for(N=(a=(a||"").match(bt)||[""]).length;N--;)if(D=Q=(E=lt.exec(a[N])||[])[1],Z=(E[2]||"").split(".").sort(),D){for(U=d.event.special[D]||{},F=C[D=(f?U.delegateType:U.bindType)||D]||[],E=E[2]&&new RegExp("(^|\\.)"+Z.join("\\.(?:.*\\.|)")+"(\\.|$)"),A=w=F.length;w--;)P=F[w],!g&&Q!==P.origType||l&&l.guid!==P.guid||E&&!E.test(P.namespace)||f&&f!==P.selector&&(f!=="**"||!P.selector)||(F.splice(w,1),P.selector&&F.delegateCount--,U.remove&&U.remove.call(s,P));A&&!F.length&&(U.teardown&&U.teardown.call(s,Z,J.handle)!==!1||d.removeEvent(s,D,J.handle),delete C[D])}else for(D in C)d.event.remove(s,D+a[N],l,f,!0);d.isEmptyObject(C)&&et.remove(s,"handle events")}},dispatch:function(s){var a,l,f,g,w,A,E=new Array(arguments.length),C=d.event.fix(s),N=(et.get(this,"events")||Object.create(null))[C.type]||[],P=d.event.special[C.type]||{};for(E[0]=C,a=1;a<arguments.length;a++)E[a]=arguments[a];if(C.delegateTarget=this,!P.preDispatch||P.preDispatch.call(this,C)!==!1){for(A=d.event.handlers.call(this,C,N),a=0;(g=A[a++])&&!C.isPropagationStopped();)for(C.currentTarget=g.elem,l=0;(w=g.handlers[l++])&&!C.isImmediatePropagationStopped();)C.rnamespace&&w.namespace!==!1&&!C.rnamespace.test(w.namespace)||(C.handleObj=w,C.data=w.data,(f=((d.event.special[w.origType]||{}).handle||w.handler).apply(g.elem,E))!==void 0&&(C.result=f)===!1&&(C.preventDefault(),C.stopPropagation()));return P.postDispatch&&P.postDispatch.call(this,C),C.result}},handlers:function(s,a){var l,f,g,w,A,E=[],C=a.delegateCount,N=s.target;if(C&&N.nodeType&&!(s.type==="click"&&1<=s.button)){for(;N!==this;N=N.parentNode||this)if(N.nodeType===1&&(s.type!=="click"||N.disabled!==!0)){for(w=[],A={},l=0;l<C;l++)A[g=(f=a[l]).selector+" "]===void 0&&(A[g]=f.needsContext?-1<d(g,this).index(N):d.find(g,this,null,[N]).length),A[g]&&w.push(f);w.length&&E.push({elem:N,handlers:w})}}return N=this,C<a.length&&E.push({elem:N,handlers:a.slice(C)}),E},addProp:function(s,a){Object.defineProperty(d.Event.prototype,s,{enumerable:!0,configurable:!0,get:M(a)?function(){if(this.originalEvent)return a(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[s]},set:function(l){Object.defineProperty(this,s,{enumerable:!0,configurable:!0,writable:!0,value:l})}})},fix:function(s){return s[d.expando]?s:new d.Event(s)},special:{load:{noBubble:!0},click:{setup:function(s){var a=this||s;return Un.test(a.type)&&a.click&&ot(a,"input")&&Ui(a,"click",gt),!1},trigger:function(s){var a=this||s;return Un.test(a.type)&&a.click&&ot(a,"input")&&Ui(a,"click"),!0},_default:function(s){var a=s.target;return Un.test(a.type)&&a.click&&ot(a,"input")&&et.get(a,"click")||ot(a,"a")}},beforeunload:{postDispatch:function(s){s.result!==void 0&&s.originalEvent&&(s.originalEvent.returnValue=s.result)}}}},d.removeEvent=function(s,a,l){s.removeEventListener&&s.removeEventListener(a,l)},d.Event=function(s,a){if(!(this instanceof d.Event))return new d.Event(s,a);s&&s.type?(this.originalEvent=s,this.type=s.type,this.isDefaultPrevented=s.defaultPrevented||s.defaultPrevented===void 0&&s.returnValue===!1?gt:zt,this.target=s.target&&s.target.nodeType===3?s.target.parentNode:s.target,this.currentTarget=s.currentTarget,this.relatedTarget=s.relatedTarget):this.type=s,a&&d.extend(this,a),this.timeStamp=s&&s.timeStamp||Date.now(),this[d.expando]=!0},d.Event.prototype={constructor:d.Event,isDefaultPrevented:zt,isPropagationStopped:zt,isImmediatePropagationStopped:zt,isSimulated:!1,preventDefault:function(){var s=this.originalEvent;this.isDefaultPrevented=gt,s&&!this.isSimulated&&s.preventDefault()},stopPropagation:function(){var s=this.originalEvent;this.isPropagationStopped=gt,s&&!this.isSimulated&&s.stopPropagation()},stopImmediatePropagation:function(){var s=this.originalEvent;this.isImmediatePropagationStopped=gt,s&&!this.isSimulated&&s.stopImmediatePropagation(),this.stopPropagation()}},d.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(s){var a=s.button;return s.which==null&&R.test(s.type)?s.charCode!=null?s.charCode:s.keyCode:!s.which&&a!==void 0&&K.test(s.type)?1&a?1:2&a?3:4&a?2:0:s.which}},d.event.addProp),d.each({focus:"focusin",blur:"focusout"},function(s,a){d.event.special[s]={setup:function(){return Ui(this,s,Ze),!1},trigger:function(){return Ui(this,s),!0},delegateType:a}}),d.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(s,a){d.event.special[s]={delegateType:a,bindType:a,handle:function(l){var f,g=l.relatedTarget,w=l.handleObj;return g&&(g===this||d.contains(this,g))||(l.type=w.origType,f=w.handler.apply(this,arguments),l.type=a),f}}}),d.fn.extend({on:function(s,a,l,f){return Zt(this,s,a,l,f)},one:function(s,a,l,f){return Zt(this,s,a,l,f,1)},off:function(s,a,l){var f,g;if(s&&s.preventDefault&&s.handleObj)return f=s.handleObj,d(s.delegateTarget).off(f.namespace?f.origType+"."+f.namespace:f.origType,f.selector,f.handler),this;if(typeof s=="object"){for(g in s)this.off(g,a,s[g]);return this}return a!==!1&&typeof a!="function"||(l=a,a=void 0),l===!1&&(l=zt),this.each(function(){d.event.remove(this,s,l,a)})}});var Ir=/<script|<style|<link/i,Ss=/checked\s*(?:[^=]|=\s*.checked.)/i,Fe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function ve(s,a){return ot(s,"table")&&ot(a.nodeType!==11?a:a.firstChild,"tr")&&d(s).children("tbody")[0]||s}function Vn(s){return s.type=(s.getAttribute("type")!==null)+"/"+s.type,s}function Pe(s){return(s.type||"").slice(0,5)==="true/"?s.type=s.type.slice(5):s.removeAttribute("type"),s}function _n(s,a){var l,f,g,w,A,E;if(a.nodeType===1){if(et.hasData(s)&&(E=et.get(s).events))for(g in et.remove(a,"handle events"),E)for(l=0,f=E[g].length;l<f;l++)d.event.add(a,g,E[g][l]);Yt.hasData(s)&&(w=Yt.access(s),A=d.extend({},w),Yt.set(a,A))}}function De(s,a,l,f){a=r(a);var g,w,A,E,C,N,P=0,U=s.length,F=U-1,D=a[0],Z=M(D);if(Z||1<U&&typeof D=="string"&&!b.checkClone&&Ss.test(D))return s.each(function(Q){var J=s.eq(Q);Z&&(a[0]=D.call(this,Q,J.html())),De(J,a,l,f)});if(U&&(w=(g=kr(a,s[0].ownerDocument,!1,s,f)).firstChild,g.childNodes.length===1&&(g=w),w||f)){for(E=(A=d.map(Kt(g,"script"),Vn)).length;P<U;P++)C=g,P!==F&&(C=d.clone(C,!0,!0),E&&d.merge(A,Kt(C,"script"))),l.call(s[P],C,P);if(E)for(N=A[A.length-1].ownerDocument,d.map(A,Pe),P=0;P<E;P++)C=A[P],vs.test(C.type||"")&&!et.access(C,"globalEval")&&d.contains(N,C)&&(C.src&&(C.type||"").toLowerCase()!=="module"?d._evalUrl&&!C.noModule&&d._evalUrl(C.src,{nonce:C.nonce||C.getAttribute("nonce")},N):B(C.textContent.replace(Fe,""),C,N))}return s}function Vi(s,a,l){for(var f,g=a?d.filter(a,s):s,w=0;(f=g[w])!=null;w++)l||f.nodeType!==1||d.cleanData(Kt(f)),f.parentNode&&(l&&vn(f)&&si(Kt(f,"script")),f.parentNode.removeChild(f));return s}d.extend({htmlPrefilter:function(s){return s},clone:function(s,a,l){var f,g,w,A,E,C,N,P=s.cloneNode(!0),U=vn(s);if(!(b.noCloneChecked||s.nodeType!==1&&s.nodeType!==11||d.isXMLDoc(s)))for(A=Kt(P),f=0,g=(w=Kt(s)).length;f<g;f++)E=w[f],C=A[f],(N=C.nodeName.toLowerCase())==="input"&&Un.test(E.type)?C.checked=E.checked:N!=="input"&&N!=="textarea"||(C.defaultValue=E.defaultValue);if(a)if(l)for(w=w||Kt(s),A=A||Kt(P),f=0,g=w.length;f<g;f++)_n(w[f],A[f]);else _n(s,P);return 0<(A=Kt(P,"script")).length&&si(A,!U&&Kt(s,"script")),P},cleanData:function(s){for(var a,l,f,g=d.event.special,w=0;(l=s[w])!==void 0;w++)if(An(l)){if(a=l[et.expando]){if(a.events)for(f in a.events)g[f]?d.event.remove(l,f):d.removeEvent(l,f,a.handle);l[et.expando]=void 0}l[Yt.expando]&&(l[Yt.expando]=void 0)}}}),d.fn.extend({detach:function(s){return Vi(this,s,!0)},remove:function(s){return Vi(this,s)},text:function(s){return Ne(this,function(a){return a===void 0?d.text(this):this.empty().each(function(){this.nodeType!==1&&this.nodeType!==11&&this.nodeType!==9||(this.textContent=a)})},null,s,arguments.length)},append:function(){return De(this,arguments,function(s){this.nodeType!==1&&this.nodeType!==11&&this.nodeType!==9||ve(this,s).appendChild(s)})},prepend:function(){return De(this,arguments,function(s){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var a=ve(this,s);a.insertBefore(s,a.firstChild)}})},before:function(){return De(this,arguments,function(s){this.parentNode&&this.parentNode.insertBefore(s,this)})},after:function(){return De(this,arguments,function(s){this.parentNode&&this.parentNode.insertBefore(s,this.nextSibling)})},empty:function(){for(var s,a=0;(s=this[a])!=null;a++)s.nodeType===1&&(d.cleanData(Kt(s,!1)),s.textContent="");return this},clone:function(s,a){return s=s!=null&&s,a=a??s,this.map(function(){return d.clone(this,s,a)})},html:function(s){return Ne(this,function(a){var l=this[0]||{},f=0,g=this.length;if(a===void 0&&l.nodeType===1)return l.innerHTML;if(typeof a=="string"&&!Ir.test(a)&&!se[(Hi.exec(a)||["",""])[1].toLowerCase()]){a=d.htmlPrefilter(a);try{for(;f<g;f++)(l=this[f]||{}).nodeType===1&&(d.cleanData(Kt(l,!1)),l.innerHTML=a);l=0}catch{}}l&&this.empty().append(a)},null,s,arguments.length)},replaceWith:function(){var s=[];return De(this,arguments,function(a){var l=this.parentNode;d.inArray(this,s)<0&&(d.cleanData(Kt(this)),l&&l.replaceChild(a,this))},s)}}),d.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(s,a){d.fn[s]=function(l){for(var f,g=[],w=d(l),A=w.length-1,E=0;E<=A;E++)f=E===A?this:this.clone(!0),d(w[E])[a](f),o.apply(g,f.get());return this.pushStack(g)}});var zr=new RegExp("^("+As+")(?!px)[a-z%]+$","i"),_s=function(s){var a=s.ownerDocument.defaultView;return a&&a.opener||(a=m),a.getComputedStyle(s)},ra=function(s,a,l){var f,g,w={};for(g in a)w[g]=s.style[g],s.style[g]=a[g];for(g in f=l.call(s),a)s.style[g]=w[g];return f},wc=new RegExp(ue.join("|"),"i");function qi(s,a,l){var f,g,w,A,E=s.style;return(l=l||_s(s))&&((A=l.getPropertyValue(a)||l[a])!==""||vn(s)||(A=d.style(s,a)),!b.pixelBoxStyles()&&zr.test(A)&&wc.test(a)&&(f=E.width,g=E.minWidth,w=E.maxWidth,E.minWidth=E.maxWidth=E.width=A,A=l.width,E.width=f,E.minWidth=g,E.maxWidth=w)),A!==void 0?A+"":A}function oa(s,a){return{get:function(){if(!s())return(this.get=a).apply(this,arguments);delete this.get}}}(function(){function s(){if(N){C.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",N.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",de.appendChild(C).appendChild(N);var P=m.getComputedStyle(N);l=P.top!=="1%",E=a(P.marginLeft)===12,N.style.right="60%",w=a(P.right)===36,f=a(P.width)===36,N.style.position="absolute",g=a(N.offsetWidth/3)===12,de.removeChild(C),N=null}}function a(P){return Math.round(parseFloat(P))}var l,f,g,w,A,E,C=v.createElement("div"),N=v.createElement("div");N.style&&(N.style.backgroundClip="content-box",N.cloneNode(!0).style.backgroundClip="",b.clearCloneStyle=N.style.backgroundClip==="content-box",d.extend(b,{boxSizingReliable:function(){return s(),f},pixelBoxStyles:function(){return s(),w},pixelPosition:function(){return s(),l},reliableMarginLeft:function(){return s(),E},scrollboxSize:function(){return s(),g},reliableTrDimensions:function(){var P,U,F,D;return A==null&&(P=v.createElement("table"),U=v.createElement("tr"),F=v.createElement("div"),P.style.cssText="position:absolute;left:-11111px",U.style.height="1px",F.style.height="9px",de.appendChild(P).appendChild(U).appendChild(F),D=m.getComputedStyle(U),A=3<parseInt(D.height),de.removeChild(P)),A}}))})();var aa=["Webkit","Moz","ms"],ha=v.createElement("div").style,ca={};function Nr(s){var a=d.cssProps[s]||ca[s];return a||(s in ha?s:ca[s]=function(l){for(var f=l[0].toUpperCase()+l.slice(1),g=aa.length;g--;)if((l=aa[g]+f)in ha)return l}(s)||s)}var Mc=/^(none|table(?!-c[ea]).+)/,la=/^--/,Ac={position:"absolute",visibility:"hidden",display:"block"},ua={letterSpacing:"0",fontWeight:"400"};function da(s,a,l){var f=Tn.exec(a);return f?Math.max(0,f[2]-(l||0))+(f[3]||"px"):a}function Lr(s,a,l,f,g,w){var A=a==="width"?1:0,E=0,C=0;if(l===(f?"border":"content"))return 0;for(;A<4;A+=2)l==="margin"&&(C+=d.css(s,l+ue[A],!0,g)),f?(l==="content"&&(C-=d.css(s,"padding"+ue[A],!0,g)),l!=="margin"&&(C-=d.css(s,"border"+ue[A]+"Width",!0,g))):(C+=d.css(s,"padding"+ue[A],!0,g),l!=="padding"?C+=d.css(s,"border"+ue[A]+"Width",!0,g):E+=d.css(s,"border"+ue[A]+"Width",!0,g));return!f&&0<=w&&(C+=Math.max(0,Math.ceil(s["offset"+a[0].toUpperCase()+a.slice(1)]-w-C-E-.5))||0),C}function fa(s,a,l){var f=_s(s),g=(!b.boxSizingReliable()||l)&&d.css(s,"boxSizing",!1,f)==="border-box",w=g,A=qi(s,a,f),E="offset"+a[0].toUpperCase()+a.slice(1);if(zr.test(A)){if(!l)return A;A="auto"}return(!b.boxSizingReliable()&&g||!b.reliableTrDimensions()&&ot(s,"tr")||A==="auto"||!parseFloat(A)&&d.css(s,"display",!1,f)==="inline")&&s.getClientRects().length&&(g=d.css(s,"boxSizing",!1,f)==="border-box",(w=E in s)&&(A=s[E])),(A=parseFloat(A)||0)+Lr(s,a,l||(g?"border":"content"),w,f,A)+"px"}function Oe(s,a,l,f,g){return new Oe.prototype.init(s,a,l,f,g)}d.extend({cssHooks:{opacity:{get:function(s,a){if(a){var l=qi(s,"opacity");return l===""?"1":l}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(s,a,l,f){if(s&&s.nodeType!==3&&s.nodeType!==8&&s.style){var g,w,A,E=le(a),C=la.test(a),N=s.style;if(C||(a=Nr(E)),A=d.cssHooks[a]||d.cssHooks[E],l===void 0)return A&&"get"in A&&(g=A.get(s,!1,f))!==void 0?g:N[a];(w=typeof l)=="string"&&(g=Tn.exec(l))&&g[1]&&(l=Ts(s,a,g),w="number"),l!=null&&l==l&&(w!=="number"||C||(l+=g&&g[3]||(d.cssNumber[E]?"":"px")),b.clearCloneStyle||l!==""||a.indexOf("background")!==0||(N[a]="inherit"),A&&"set"in A&&(l=A.set(s,l,f))===void 0||(C?N.setProperty(a,l):N[a]=l))}},css:function(s,a,l,f){var g,w,A,E=le(a);return la.test(a)||(a=Nr(E)),(A=d.cssHooks[a]||d.cssHooks[E])&&"get"in A&&(g=A.get(s,!0,l)),g===void 0&&(g=qi(s,a,f)),g==="normal"&&a in ua&&(g=ua[a]),l===""||l?(w=parseFloat(g),l===!0||isFinite(w)?w||0:g):g}}),d.each(["height","width"],function(s,a){d.cssHooks[a]={get:function(l,f,g){if(f)return!Mc.test(d.css(l,"display"))||l.getClientRects().length&&l.getBoundingClientRect().width?fa(l,a,g):ra(l,Ac,function(){return fa(l,a,g)})},set:function(l,f,g){var w,A=_s(l),E=!b.scrollboxSize()&&A.position==="absolute",C=(E||g)&&d.css(l,"boxSizing",!1,A)==="border-box",N=g?Lr(l,a,g,C,A):0;return C&&E&&(N-=Math.ceil(l["offset"+a[0].toUpperCase()+a.slice(1)]-parseFloat(A[a])-Lr(l,a,"border",!1,A)-.5)),N&&(w=Tn.exec(f))&&(w[3]||"px")!=="px"&&(l.style[a]=f,f=d.css(l,a)),da(0,f,N)}}}),d.cssHooks.marginLeft=oa(b.reliableMarginLeft,function(s,a){if(a)return(parseFloat(qi(s,"marginLeft"))||s.getBoundingClientRect().left-ra(s,{marginLeft:0},function(){return s.getBoundingClientRect().left}))+"px"}),d.each({margin:"",padding:"",border:"Width"},function(s,a){d.cssHooks[s+a]={expand:function(l){for(var f=0,g={},w=typeof l=="string"?l.split(" "):[l];f<4;f++)g[s+ue[f]+a]=w[f]||w[f-2]||w[0];return g}},s!=="margin"&&(d.cssHooks[s+a].set=da)}),d.fn.extend({css:function(s,a){return Ne(this,function(l,f,g){var w,A,E={},C=0;if(Array.isArray(f)){for(w=_s(l),A=f.length;C<A;C++)E[f[C]]=d.css(l,f[C],!1,w);return E}return g!==void 0?d.style(l,f,g):d.css(l,f)},s,a,1<arguments.length)}}),((d.Tween=Oe).prototype={constructor:Oe,init:function(s,a,l,f,g,w){this.elem=s,this.prop=l,this.easing=g||d.easing._default,this.options=a,this.start=this.now=this.cur(),this.end=f,this.unit=w||(d.cssNumber[l]?"":"px")},cur:function(){var s=Oe.propHooks[this.prop];return s&&s.get?s.get(this):Oe.propHooks._default.get(this)},run:function(s){var a,l=Oe.propHooks[this.prop];return this.options.duration?this.pos=a=d.easing[this.easing](s,this.options.duration*s,0,1,this.options.duration):this.pos=a=s,this.now=(this.end-this.start)*a+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),l&&l.set?l.set(this):Oe.propHooks._default.set(this),this}}).init.prototype=Oe.prototype,(Oe.propHooks={_default:{get:function(s){var a;return s.elem.nodeType!==1||s.elem[s.prop]!=null&&s.elem.style[s.prop]==null?s.elem[s.prop]:(a=d.css(s.elem,s.prop,""))&&a!=="auto"?a:0},set:function(s){d.fx.step[s.prop]?d.fx.step[s.prop](s):s.elem.nodeType!==1||!d.cssHooks[s.prop]&&s.elem.style[Nr(s.prop)]==null?s.elem[s.prop]=s.now:d.style(s.elem,s.prop,s.now+s.unit)}}}).scrollTop=Oe.propHooks.scrollLeft={set:function(s){s.elem.nodeType&&s.elem.parentNode&&(s.elem[s.prop]=s.now)}},d.easing={linear:function(s){return s},swing:function(s){return .5-Math.cos(s*Math.PI)/2},_default:"swing"},d.fx=Oe.prototype.init,d.fx.step={};var ri,Es,oi,pa,Tc=/^(?:toggle|show|hide)$/,vc=/queueHooks$/;function Fr(){Es&&(v.hidden===!1&&m.requestAnimationFrame?m.requestAnimationFrame(Fr):m.setTimeout(Fr,d.fx.interval),d.fx.tick())}function ma(){return m.setTimeout(function(){ri=void 0}),ri=Date.now()}function Cs(s,a){var l,f=0,g={height:s};for(a=a?1:0;f<4;f+=2-a)g["margin"+(l=ue[f])]=g["padding"+l]=s;return a&&(g.opacity=g.width=s),g}function ya(s,a,l){for(var f,g=(Be.tweeners[a]||[]).concat(Be.tweeners["*"]),w=0,A=g.length;w<A;w++)if(f=g[w].call(l,a,s))return f}function Be(s,a,l){var f,g,w=0,A=Be.prefilters.length,E=d.Deferred().always(function(){delete C.elem}),C=function(){if(g)return!1;for(var U=ri||ma(),F=Math.max(0,N.startTime+N.duration-U),D=1-(F/N.duration||0),Z=0,Q=N.tweens.length;Z<Q;Z++)N.tweens[Z].run(D);return E.notifyWith(s,[N,D,F]),D<1&&Q?F:(Q||E.notifyWith(s,[N,1,0]),E.resolveWith(s,[N]),!1)},N=E.promise({elem:s,props:d.extend({},a),opts:d.extend(!0,{specialEasing:{},easing:d.easing._default},l),originalProperties:a,originalOptions:l,startTime:ri||ma(),duration:l.duration,tweens:[],createTween:function(U,F){var D=d.Tween(s,N.opts,U,F,N.opts.specialEasing[U]||N.opts.easing);return N.tweens.push(D),D},stop:function(U){var F=0,D=U?N.tweens.length:0;if(g)return this;for(g=!0;F<D;F++)N.tweens[F].run(1);return U?(E.notifyWith(s,[N,1,0]),E.resolveWith(s,[N,U])):E.rejectWith(s,[N,U]),this}}),P=N.props;for(!function(U,F){var D,Z,Q,J,Ct;for(D in U)if(Q=F[Z=le(D)],J=U[D],Array.isArray(J)&&(Q=J[1],J=U[D]=J[0]),D!==Z&&(U[Z]=J,delete U[D]),(Ct=d.cssHooks[Z])&&"expand"in Ct)for(D in J=Ct.expand(J),delete U[Z],J)D in U||(U[D]=J[D],F[D]=Q);else F[Z]=Q}(P,N.opts.specialEasing);w<A;w++)if(f=Be.prefilters[w].call(N,s,P,N.opts))return M(f.stop)&&(d._queueHooks(N.elem,N.opts.queue).stop=f.stop.bind(f)),f;return d.map(P,ya,N),M(N.opts.start)&&N.opts.start.call(s,N),N.progress(N.opts.progress).done(N.opts.done,N.opts.complete).fail(N.opts.fail).always(N.opts.always),d.fx.timer(d.extend(C,{elem:s,anim:N,queue:N.opts.queue})),N}d.Animation=d.extend(Be,{tweeners:{"*":[function(s,a){var l=this.createTween(s,a);return Ts(l.elem,s,Tn.exec(a),l),l}]},tweener:function(s,a){M(s)?(a=s,s=["*"]):s=s.match(bt);for(var l,f=0,g=s.length;f<g;f++)l=s[f],Be.tweeners[l]=Be.tweeners[l]||[],Be.tweeners[l].unshift(a)},prefilters:[function(s,a,l){var f,g,w,A,E,C,N,P,U="width"in a||"height"in a,F=this,D={},Z=s.style,Q=s.nodeType&&jn(s),J=et.get(s,"fxshow");for(f in l.queue||((A=d._queueHooks(s,"fx")).unqueued==null&&(A.unqueued=0,E=A.empty.fire,A.empty.fire=function(){A.unqueued||E()}),A.unqueued++,F.always(function(){F.always(function(){A.unqueued--,d.queue(s,"fx").length||A.empty.fire()})})),a)if(g=a[f],Tc.test(g)){if(delete a[f],w=w||g==="toggle",g===(Q?"hide":"show")){if(g!=="show"||!J||J[f]===void 0)continue;Q=!0}D[f]=J&&J[f]||d.style(s,f)}if((C=!d.isEmptyObject(a))||!d.isEmptyObject(D))for(f in U&&s.nodeType===1&&(l.overflow=[Z.overflow,Z.overflowX,Z.overflowY],(N=J&&J.display)==null&&(N=et.get(s,"display")),(P=d.css(s,"display"))==="none"&&(N?P=N:(cn([s],!0),N=s.style.display||N,P=d.css(s,"display"),cn([s]))),(P==="inline"||P==="inline-block"&&N!=null)&&d.css(s,"float")==="none"&&(C||(F.done(function(){Z.display=N}),N==null&&(P=Z.display,N=P==="none"?"":P)),Z.display="inline-block")),l.overflow&&(Z.overflow="hidden",F.always(function(){Z.overflow=l.overflow[0],Z.overflowX=l.overflow[1],Z.overflowY=l.overflow[2]})),C=!1,D)C||(J?"hidden"in J&&(Q=J.hidden):J=et.access(s,"fxshow",{display:N}),w&&(J.hidden=!Q),Q&&cn([s],!0),F.done(function(){for(f in Q||cn([s]),et.remove(s,"fxshow"),D)d.style(s,f,D[f])})),C=ya(Q?J[f]:0,f,F),f in J||(J[f]=C.start,Q&&(C.end=C.start,C.start=0))}],prefilter:function(s,a){a?Be.prefilters.unshift(s):Be.prefilters.push(s)}}),d.speed=function(s,a,l){var f=s&&typeof s=="object"?d.extend({},s):{complete:l||!l&&a||M(s)&&s,duration:s,easing:l&&a||a&&!M(a)&&a};return d.fx.off?f.duration=0:typeof f.duration!="number"&&(f.duration in d.fx.speeds?f.duration=d.fx.speeds[f.duration]:f.duration=d.fx.speeds._default),f.queue!=null&&f.queue!==!0||(f.queue="fx"),f.old=f.complete,f.complete=function(){M(f.old)&&f.old.call(this),f.queue&&d.dequeue(this,f.queue)},f},d.fn.extend({fadeTo:function(s,a,l,f){return this.filter(jn).css("opacity",0).show().end().animate({opacity:a},s,l,f)},animate:function(s,a,l,f){var g=d.isEmptyObject(s),w=d.speed(a,l,f),A=function(){var E=Be(this,d.extend({},s),w);(g||et.get(this,"finish"))&&E.stop(!0)};return A.finish=A,g||w.queue===!1?this.each(A):this.queue(w.queue,A)},stop:function(s,a,l){var f=function(g){var w=g.stop;delete g.stop,w(l)};return typeof s!="string"&&(l=a,a=s,s=void 0),a&&this.queue(s||"fx",[]),this.each(function(){var g=!0,w=s!=null&&s+"queueHooks",A=d.timers,E=et.get(this);if(w)E[w]&&E[w].stop&&f(E[w]);else for(w in E)E[w]&&E[w].stop&&vc.test(w)&&f(E[w]);for(w=A.length;w--;)A[w].elem!==this||s!=null&&A[w].queue!==s||(A[w].anim.stop(l),g=!1,A.splice(w,1));!g&&l||d.dequeue(this,s)})},finish:function(s){return s!==!1&&(s=s||"fx"),this.each(function(){var a,l=et.get(this),f=l[s+"queue"],g=l[s+"queueHooks"],w=d.timers,A=f?f.length:0;for(l.finish=!0,d.queue(this,s,[]),g&&g.stop&&g.stop.call(this,!0),a=w.length;a--;)w[a].elem===this&&w[a].queue===s&&(w[a].anim.stop(!0),w.splice(a,1));for(a=0;a<A;a++)f[a]&&f[a].finish&&f[a].finish.call(this);delete l.finish})}}),d.each(["toggle","show","hide"],function(s,a){var l=d.fn[a];d.fn[a]=function(f,g,w){return f==null||typeof f=="boolean"?l.apply(this,arguments):this.animate(Cs(a,!0),f,g,w)}}),d.each({slideDown:Cs("show"),slideUp:Cs("hide"),slideToggle:Cs("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(s,a){d.fn[s]=function(l,f,g){return this.animate(a,l,f,g)}}),d.timers=[],d.fx.tick=function(){var s,a=0,l=d.timers;for(ri=Date.now();a<l.length;a++)(s=l[a])()||l[a]!==s||l.splice(a--,1);l.length||d.fx.stop(),ri=void 0},d.fx.timer=function(s){d.timers.push(s),d.fx.start()},d.fx.interval=13,d.fx.start=function(){Es||(Es=!0,Fr())},d.fx.stop=function(){Es=null},d.fx.speeds={slow:600,fast:200,_default:400},d.fn.delay=function(s,a){return s=d.fx&&d.fx.speeds[s]||s,a=a||"fx",this.queue(a,function(l,f){var g=m.setTimeout(l,s);f.stop=function(){m.clearTimeout(g)}})},oi=v.createElement("input"),pa=v.createElement("select").appendChild(v.createElement("option")),oi.type="checkbox",b.checkOn=oi.value!=="",b.optSelected=pa.selected,(oi=v.createElement("input")).value="t",oi.type="radio",b.radioValue=oi.value==="t";var ga,Wi=d.expr.attrHandle;d.fn.extend({attr:function(s,a){return Ne(this,d.attr,s,a,1<arguments.length)},removeAttr:function(s){return this.each(function(){d.removeAttr(this,s)})}}),d.extend({attr:function(s,a,l){var f,g,w=s.nodeType;if(w!==3&&w!==8&&w!==2)return typeof s.getAttribute>"u"?d.prop(s,a,l):(w===1&&d.isXMLDoc(s)||(g=d.attrHooks[a.toLowerCase()]||(d.expr.match.bool.test(a)?ga:void 0)),l!==void 0?l===null?void d.removeAttr(s,a):g&&"set"in g&&(f=g.set(s,l,a))!==void 0?f:(s.setAttribute(a,l+""),l):g&&"get"in g&&(f=g.get(s,a))!==null?f:(f=d.find.attr(s,a))==null?void 0:f)},attrHooks:{type:{set:function(s,a){if(!b.radioValue&&a==="radio"&&ot(s,"input")){var l=s.value;return s.setAttribute("type",a),l&&(s.value=l),a}}}},removeAttr:function(s,a){var l,f=0,g=a&&a.match(bt);if(g&&s.nodeType===1)for(;l=g[f++];)s.removeAttribute(l)}}),ga={set:function(s,a,l){return a===!1?d.removeAttr(s,l):s.setAttribute(l,l),l}},d.each(d.expr.match.bool.source.match(/\w+/g),function(s,a){var l=Wi[a]||d.find.attr;Wi[a]=function(f,g,w){var A,E,C=g.toLowerCase();return w||(E=Wi[C],Wi[C]=A,A=l(f,g,w)!=null?C:null,Wi[C]=E),A}});var Sc=/^(?:input|select|textarea|button)$/i,_c=/^(?:a|area)$/i;function qn(s){return(s.match(bt)||[]).join(" ")}function Wn(s){return s.getAttribute&&s.getAttribute("class")||""}function Pr(s){return Array.isArray(s)?s:typeof s=="string"&&s.match(bt)||[]}d.fn.extend({prop:function(s,a){return Ne(this,d.prop,s,a,1<arguments.length)},removeProp:function(s){return this.each(function(){delete this[d.propFix[s]||s]})}}),d.extend({prop:function(s,a,l){var f,g,w=s.nodeType;if(w!==3&&w!==8&&w!==2)return w===1&&d.isXMLDoc(s)||(a=d.propFix[a]||a,g=d.propHooks[a]),l!==void 0?g&&"set"in g&&(f=g.set(s,l,a))!==void 0?f:s[a]=l:g&&"get"in g&&(f=g.get(s,a))!==null?f:s[a]},propHooks:{tabIndex:{get:function(s){var a=d.find.attr(s,"tabindex");return a?parseInt(a,10):Sc.test(s.nodeName)||_c.test(s.nodeName)&&s.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),b.optSelected||(d.propHooks.selected={get:function(s){var a=s.parentNode;return a&&a.parentNode&&a.parentNode.selectedIndex,null},set:function(s){var a=s.parentNode;a&&(a.selectedIndex,a.parentNode&&a.parentNode.selectedIndex)}}),d.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){d.propFix[this.toLowerCase()]=this}),d.fn.extend({addClass:function(s){var a,l,f,g,w,A,E,C=0;if(M(s))return this.each(function(N){d(this).addClass(s.call(this,N,Wn(this)))});if((a=Pr(s)).length){for(;l=this[C++];)if(g=Wn(l),f=l.nodeType===1&&" "+qn(g)+" "){for(A=0;w=a[A++];)f.indexOf(" "+w+" ")<0&&(f+=w+" ");g!==(E=qn(f))&&l.setAttribute("class",E)}}return this},removeClass:function(s){var a,l,f,g,w,A,E,C=0;if(M(s))return this.each(function(N){d(this).removeClass(s.call(this,N,Wn(this)))});if(!arguments.length)return this.attr("class","");if((a=Pr(s)).length){for(;l=this[C++];)if(g=Wn(l),f=l.nodeType===1&&" "+qn(g)+" "){for(A=0;w=a[A++];)for(;-1<f.indexOf(" "+w+" ");)f=f.replace(" "+w+" "," ");g!==(E=qn(f))&&l.setAttribute("class",E)}}return this},toggleClass:function(s,a){var l=typeof s,f=l==="string"||Array.isArray(s);return typeof a=="boolean"&&f?a?this.addClass(s):this.removeClass(s):M(s)?this.each(function(g){d(this).toggleClass(s.call(this,g,Wn(this),a),a)}):this.each(function(){var g,w,A,E;if(f)for(w=0,A=d(this),E=Pr(s);g=E[w++];)A.hasClass(g)?A.removeClass(g):A.addClass(g);else s!==void 0&&l!=="boolean"||((g=Wn(this))&&et.set(this,"__className__",g),this.setAttribute&&this.setAttribute("class",g||s===!1?"":et.get(this,"__className__")||""))})},hasClass:function(s){var a,l,f=0;for(a=" "+s+" ";l=this[f++];)if(l.nodeType===1&&-1<(" "+qn(Wn(l))+" ").indexOf(a))return!0;return!1}});var Ec=/\r/g;d.fn.extend({val:function(s){var a,l,f,g=this[0];return arguments.length?(f=M(s),this.each(function(w){var A;this.nodeType===1&&((A=f?s.call(this,w,d(this).val()):s)==null?A="":typeof A=="number"?A+="":Array.isArray(A)&&(A=d.map(A,function(E){return E==null?"":E+""})),(a=d.valHooks[this.type]||d.valHooks[this.nodeName.toLowerCase()])&&"set"in a&&a.set(this,A,"value")!==void 0||(this.value=A))})):g?(a=d.valHooks[g.type]||d.valHooks[g.nodeName.toLowerCase()])&&"get"in a&&(l=a.get(g,"value"))!==void 0?l:typeof(l=g.value)=="string"?l.replace(Ec,""):l??"":void 0}}),d.extend({valHooks:{option:{get:function(s){var a=d.find.attr(s,"value");return a??qn(d.text(s))}},select:{get:function(s){var a,l,f,g=s.options,w=s.selectedIndex,A=s.type==="select-one",E=A?null:[],C=A?w+1:g.length;for(f=w<0?C:A?w:0;f<C;f++)if(((l=g[f]).selected||f===w)&&!l.disabled&&(!l.parentNode.disabled||!ot(l.parentNode,"optgroup"))){if(a=d(l).val(),A)return a;E.push(a)}return E},set:function(s,a){for(var l,f,g=s.options,w=d.makeArray(a),A=g.length;A--;)((f=g[A]).selected=-1<d.inArray(d.valHooks.option.get(f),w))&&(l=!0);return l||(s.selectedIndex=-1),w}}}}),d.each(["radio","checkbox"],function(){d.valHooks[this]={set:function(s,a){if(Array.isArray(a))return s.checked=-1<d.inArray(d(s).val(),a)}},b.checkOn||(d.valHooks[this].get=function(s){return s.getAttribute("value")===null?"on":s.value})}),b.focusin="onfocusin"in m;var xa=/^(?:focusinfocus|focusoutblur)$/,ba=function(s){s.stopPropagation()};d.extend(d.event,{trigger:function(s,a,l,f){var g,w,A,E,C,N,P,U,F=[l||v],D=p.call(s,"type")?s.type:s,Z=p.call(s,"namespace")?s.namespace.split("."):[];if(w=U=A=l=l||v,l.nodeType!==3&&l.nodeType!==8&&!xa.test(D+d.event.triggered)&&(-1<D.indexOf(".")&&(D=(Z=D.split(".")).shift(),Z.sort()),C=D.indexOf(":")<0&&"on"+D,(s=s[d.expando]?s:new d.Event(D,typeof s=="object"&&s)).isTrigger=f?2:3,s.namespace=Z.join("."),s.rnamespace=s.namespace?new RegExp("(^|\\.)"+Z.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,s.result=void 0,s.target||(s.target=l),a=a==null?[s]:d.makeArray(a,[s]),P=d.event.special[D]||{},f||!P.trigger||P.trigger.apply(l,a)!==!1)){if(!f&&!P.noBubble&&!S(l)){for(E=P.delegateType||D,xa.test(E+D)||(w=w.parentNode);w;w=w.parentNode)F.push(w),A=w;A===(l.ownerDocument||v)&&F.push(A.defaultView||A.parentWindow||m)}for(g=0;(w=F[g++])&&!s.isPropagationStopped();)U=w,s.type=1<g?E:P.bindType||D,(N=(et.get(w,"events")||Object.create(null))[s.type]&&et.get(w,"handle"))&&N.apply(w,a),(N=C&&w[C])&&N.apply&&An(w)&&(s.result=N.apply(w,a),s.result===!1&&s.preventDefault());return s.type=D,f||s.isDefaultPrevented()||P._default&&P._default.apply(F.pop(),a)!==!1||!An(l)||C&&M(l[D])&&!S(l)&&((A=l[C])&&(l[C]=null),d.event.triggered=D,s.isPropagationStopped()&&U.addEventListener(D,ba),l[D](),s.isPropagationStopped()&&U.removeEventListener(D,ba),d.event.triggered=void 0,A&&(l[C]=A)),s.result}},simulate:function(s,a,l){var f=d.extend(new d.Event,l,{type:s,isSimulated:!0});d.event.trigger(f,null,a)}}),d.fn.extend({trigger:function(s,a){return this.each(function(){d.event.trigger(s,a,this)})},triggerHandler:function(s,a){var l=this[0];if(l)return d.event.trigger(s,a,l,!0)}}),b.focusin||d.each({focus:"focusin",blur:"focusout"},function(s,a){var l=function(f){d.event.simulate(a,f.target,d.event.fix(f))};d.event.special[a]={setup:function(){var f=this.ownerDocument||this.document||this,g=et.access(f,a);g||f.addEventListener(s,l,!0),et.access(f,a,(g||0)+1)},teardown:function(){var f=this.ownerDocument||this.document||this,g=et.access(f,a)-1;g?et.access(f,a,g):(f.removeEventListener(s,l,!0),et.remove(f,a))}}});var Gi=m.location,wa={guid:Date.now()},Dr=/\?/;d.parseXML=function(s){var a;if(!s||typeof s!="string")return null;try{a=new m.DOMParser().parseFromString(s,"text/xml")}catch{a=void 0}return a&&!a.getElementsByTagName("parsererror").length||d.error("Invalid XML: "+s),a};var Cc=/\[\]$/,Ma=/\r?\n/g,Rc=/^(?:submit|button|image|reset|file)$/i,kc=/^(?:input|select|textarea|keygen)/i;function Or(s,a,l,f){var g;if(Array.isArray(a))d.each(a,function(w,A){l||Cc.test(s)?f(s,A):Or(s+"["+(typeof A=="object"&&A!=null?w:"")+"]",A,l,f)});else if(l||H(a)!=="object")f(s,a);else for(g in a)Or(s+"["+g+"]",a[g],l,f)}d.param=function(s,a){var l,f=[],g=function(w,A){var E=M(A)?A():A;f[f.length]=encodeURIComponent(w)+"="+encodeURIComponent(E??"")};if(s==null)return"";if(Array.isArray(s)||s.jquery&&!d.isPlainObject(s))d.each(s,function(){g(this.name,this.value)});else for(l in s)Or(l,s[l],a,g);return f.join("&")},d.fn.extend({serialize:function(){return d.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var s=d.prop(this,"elements");return s?d.makeArray(s):this}).filter(function(){var s=this.type;return this.name&&!d(this).is(":disabled")&&kc.test(this.nodeName)&&!Rc.test(s)&&(this.checked||!Un.test(s))}).map(function(s,a){var l=d(this).val();return l==null?null:Array.isArray(l)?d.map(l,function(f){return{name:a.name,value:f.replace(Ma,`\r
`)}}):{name:a.name,value:l.replace(Ma,`\r
`)}}).get()}});var Ic=/%20/g,zc=/#.*$/,Nc=/([?&])_=[^&]*/,Lc=/^(.*?):[ \t]*([^\r\n]*)$/gm,Fc=/^(?:GET|HEAD)$/,Pc=/^\/\//,Aa={},Br={},Ta="*/".concat("*"),jr=v.createElement("a");function va(s){return function(a,l){typeof a!="string"&&(l=a,a="*");var f,g=0,w=a.toLowerCase().match(bt)||[];if(M(l))for(;f=w[g++];)f[0]==="+"?(f=f.slice(1)||"*",(s[f]=s[f]||[]).unshift(l)):(s[f]=s[f]||[]).push(l)}}function Sa(s,a,l,f){var g={},w=s===Br;function A(E){var C;return g[E]=!0,d.each(s[E]||[],function(N,P){var U=P(a,l,f);return typeof U!="string"||w||g[U]?w?!(C=U):void 0:(a.dataTypes.unshift(U),A(U),!1)}),C}return A(a.dataTypes[0])||!g["*"]&&A("*")}function Hr(s,a){var l,f,g=d.ajaxSettings.flatOptions||{};for(l in a)a[l]!==void 0&&((g[l]?s:f||(f={}))[l]=a[l]);return f&&d.extend(!0,s,f),s}jr.href=Gi.href,d.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Gi.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Gi.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ta,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":d.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(s,a){return a?Hr(Hr(s,d.ajaxSettings),a):Hr(d.ajaxSettings,s)},ajaxPrefilter:va(Aa),ajaxTransport:va(Br),ajax:function(s,a){typeof s=="object"&&(a=s,s=void 0),a=a||{};var l,f,g,w,A,E,C,N,P,U,F=d.ajaxSetup({},a),D=F.context||F,Z=F.context&&(D.nodeType||D.jquery)?d(D):d.event,Q=d.Deferred(),J=d.Callbacks("once memory"),Ct=F.statusCode||{},Ut={},fe={},Tt="canceled",rt={readyState:0,getResponseHeader:function(xt){var Rt;if(C){if(!w)for(w={};Rt=Lc.exec(g);)w[Rt[1].toLowerCase()+" "]=(w[Rt[1].toLowerCase()+" "]||[]).concat(Rt[2]);Rt=w[xt.toLowerCase()+" "]}return Rt==null?null:Rt.join(", ")},getAllResponseHeaders:function(){return C?g:null},setRequestHeader:function(xt,Rt){return C==null&&(xt=fe[xt.toLowerCase()]=fe[xt.toLowerCase()]||xt,Ut[xt]=Rt),this},overrideMimeType:function(xt){return C==null&&(F.mimeType=xt),this},statusCode:function(xt){var Rt;if(xt)if(C)rt.always(xt[rt.status]);else for(Rt in xt)Ct[Rt]=[Ct[Rt],xt[Rt]];return this},abort:function(xt){var Rt=xt||Tt;return l&&l.abort(Rt),re(0,Rt),this}};if(Q.promise(rt),F.url=((s||F.url||Gi.href)+"").replace(Pc,Gi.protocol+"//"),F.type=a.method||a.type||F.method||F.type,F.dataTypes=(F.dataType||"*").toLowerCase().match(bt)||[""],F.crossDomain==null){E=v.createElement("a");try{E.href=F.url,E.href=E.href,F.crossDomain=jr.protocol+"//"+jr.host!=E.protocol+"//"+E.host}catch{F.crossDomain=!0}}if(F.data&&F.processData&&typeof F.data!="string"&&(F.data=d.param(F.data,F.traditional)),Sa(Aa,F,a,rt),C)return rt;for(P in(N=d.event&&F.global)&&d.active++==0&&d.event.trigger("ajaxStart"),F.type=F.type.toUpperCase(),F.hasContent=!Fc.test(F.type),f=F.url.replace(zc,""),F.hasContent?F.data&&F.processData&&(F.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(F.data=F.data.replace(Ic,"+")):(U=F.url.slice(f.length),F.data&&(F.processData||typeof F.data=="string")&&(f+=(Dr.test(f)?"&":"?")+F.data,delete F.data),F.cache===!1&&(f=f.replace(Nc,"$1"),U=(Dr.test(f)?"&":"?")+"_="+wa.guid+++U),F.url=f+U),F.ifModified&&(d.lastModified[f]&&rt.setRequestHeader("If-Modified-Since",d.lastModified[f]),d.etag[f]&&rt.setRequestHeader("If-None-Match",d.etag[f])),(F.data&&F.hasContent&&F.contentType!==!1||a.contentType)&&rt.setRequestHeader("Content-Type",F.contentType),rt.setRequestHeader("Accept",F.dataTypes[0]&&F.accepts[F.dataTypes[0]]?F.accepts[F.dataTypes[0]]+(F.dataTypes[0]!=="*"?", "+Ta+"; q=0.01":""):F.accepts["*"]),F.headers)rt.setRequestHeader(P,F.headers[P]);if(F.beforeSend&&(F.beforeSend.call(D,rt,F)===!1||C))return rt.abort();if(Tt="abort",J.add(F.complete),rt.done(F.success),rt.fail(F.error),l=Sa(Br,F,a,rt)){if(rt.readyState=1,N&&Z.trigger("ajaxSend",[rt,F]),C)return rt;F.async&&0<F.timeout&&(A=m.setTimeout(function(){rt.abort("timeout")},F.timeout));try{C=!1,l.send(Ut,re)}catch(xt){if(C)throw xt;re(-1,xt)}}else re(-1,"No Transport");function re(xt,Rt,Yi,Rs){var pe,Gn,ai,oe,hi,Se=Rt;C||(C=!0,A&&m.clearTimeout(A),l=void 0,g=Rs||"",rt.readyState=0<xt?4:0,pe=200<=xt&&xt<300||xt===304,Yi&&(oe=function(kt,me,ye){for(var Je,at,wt,Vt,ge=kt.contents,Bt=kt.dataTypes;Bt[0]==="*";)Bt.shift(),Je===void 0&&(Je=kt.mimeType||me.getResponseHeader("Content-Type"));if(Je){for(at in ge)if(ge[at]&&ge[at].test(Je)){Bt.unshift(at);break}}if(Bt[0]in ye)wt=Bt[0];else{for(at in ye){if(!Bt[0]||kt.converters[at+" "+Bt[0]]){wt=at;break}Vt||(Vt=at)}wt=wt||Vt}if(wt)return wt!==Bt[0]&&Bt.unshift(wt),ye[wt]}(F,rt,Yi)),!pe&&-1<d.inArray("script",F.dataTypes)&&(F.converters["text script"]=function(){}),oe=function(kt,me,ye,Je){var at,wt,Vt,ge,Bt,xe={},ci=kt.dataTypes.slice();if(ci[1])for(Vt in kt.converters)xe[Vt.toLowerCase()]=kt.converters[Vt];for(wt=ci.shift();wt;)if(kt.responseFields[wt]&&(ye[kt.responseFields[wt]]=me),!Bt&&Je&&kt.dataFilter&&(me=kt.dataFilter(me,kt.dataType)),Bt=wt,wt=ci.shift()){if(wt==="*")wt=Bt;else if(Bt!=="*"&&Bt!==wt){if(!(Vt=xe[Bt+" "+wt]||xe["* "+wt])){for(at in xe)if((ge=at.split(" "))[1]===wt&&(Vt=xe[Bt+" "+ge[0]]||xe["* "+ge[0]])){Vt===!0?Vt=xe[at]:xe[at]!==!0&&(wt=ge[0],ci.unshift(ge[1]));break}}if(Vt!==!0)if(Vt&&kt.throws)me=Vt(me);else try{me=Vt(me)}catch(ks){return{state:"parsererror",error:Vt?ks:"No conversion from "+Bt+" to "+wt}}}}return{state:"success",data:me}}(F,oe,rt,pe),pe?(F.ifModified&&((hi=rt.getResponseHeader("Last-Modified"))&&(d.lastModified[f]=hi),(hi=rt.getResponseHeader("etag"))&&(d.etag[f]=hi)),xt===204||F.type==="HEAD"?Se="nocontent":xt===304?Se="notmodified":(Se=oe.state,Gn=oe.data,pe=!(ai=oe.error))):(ai=Se,!xt&&Se||(Se="error",xt<0&&(xt=0))),rt.status=xt,rt.statusText=(Rt||Se)+"",pe?Q.resolveWith(D,[Gn,Se,rt]):Q.rejectWith(D,[rt,Se,ai]),rt.statusCode(Ct),Ct=void 0,N&&Z.trigger(pe?"ajaxSuccess":"ajaxError",[rt,F,pe?Gn:ai]),J.fireWith(D,[rt,Se]),N&&(Z.trigger("ajaxComplete",[rt,F]),--d.active||d.event.trigger("ajaxStop")))}return rt},getJSON:function(s,a,l){return d.get(s,a,l,"json")},getScript:function(s,a){return d.get(s,void 0,a,"script")}}),d.each(["get","post"],function(s,a){d[a]=function(l,f,g,w){return M(f)&&(w=w||g,g=f,f=void 0),d.ajax(d.extend({url:l,type:a,dataType:w,data:f,success:g},d.isPlainObject(l)&&l))}}),d.ajaxPrefilter(function(s){var a;for(a in s.headers)a.toLowerCase()==="content-type"&&(s.contentType=s.headers[a]||"")}),d._evalUrl=function(s,a,l){return d.ajax({url:s,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(f){d.globalEval(f,a,l)}})},d.fn.extend({wrapAll:function(s){var a;return this[0]&&(M(s)&&(s=s.call(this[0])),a=d(s,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&a.insertBefore(this[0]),a.map(function(){for(var l=this;l.firstElementChild;)l=l.firstElementChild;return l}).append(this)),this},wrapInner:function(s){return M(s)?this.each(function(a){d(this).wrapInner(s.call(this,a))}):this.each(function(){var a=d(this),l=a.contents();l.length?l.wrapAll(s):a.append(s)})},wrap:function(s){var a=M(s);return this.each(function(l){d(this).wrapAll(a?s.call(this,l):s)})},unwrap:function(s){return this.parent(s).not("body").each(function(){d(this).replaceWith(this.childNodes)}),this}}),d.expr.pseudos.hidden=function(s){return!d.expr.pseudos.visible(s)},d.expr.pseudos.visible=function(s){return!!(s.offsetWidth||s.offsetHeight||s.getClientRects().length)},d.ajaxSettings.xhr=function(){try{return new m.XMLHttpRequest}catch{}};var Dc={0:200,1223:204},Xi=d.ajaxSettings.xhr();b.cors=!!Xi&&"withCredentials"in Xi,b.ajax=Xi=!!Xi,d.ajaxTransport(function(s){var a,l;if(b.cors||Xi&&!s.crossDomain)return{send:function(f,g){var w,A=s.xhr();if(A.open(s.type,s.url,s.async,s.username,s.password),s.xhrFields)for(w in s.xhrFields)A[w]=s.xhrFields[w];for(w in s.mimeType&&A.overrideMimeType&&A.overrideMimeType(s.mimeType),s.crossDomain||f["X-Requested-With"]||(f["X-Requested-With"]="XMLHttpRequest"),f)A.setRequestHeader(w,f[w]);a=function(E){return function(){a&&(a=l=A.onload=A.onerror=A.onabort=A.ontimeout=A.onreadystatechange=null,E==="abort"?A.abort():E==="error"?typeof A.status!="number"?g(0,"error"):g(A.status,A.statusText):g(Dc[A.status]||A.status,A.statusText,(A.responseType||"text")!=="text"||typeof A.responseText!="string"?{binary:A.response}:{text:A.responseText},A.getAllResponseHeaders()))}},A.onload=a(),l=A.onerror=A.ontimeout=a("error"),A.onabort!==void 0?A.onabort=l:A.onreadystatechange=function(){A.readyState===4&&m.setTimeout(function(){a&&l()})},a=a("abort");try{A.send(s.hasContent&&s.data||null)}catch(E){if(a)throw E}},abort:function(){a&&a()}}}),d.ajaxPrefilter(function(s){s.crossDomain&&(s.contents.script=!1)}),d.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(s){return d.globalEval(s),s}}}),d.ajaxPrefilter("script",function(s){s.cache===void 0&&(s.cache=!1),s.crossDomain&&(s.type="GET")}),d.ajaxTransport("script",function(s){var a,l;if(s.crossDomain||s.scriptAttrs)return{send:function(f,g){a=d("<script>").attr(s.scriptAttrs||{}).prop({charset:s.scriptCharset,src:s.url}).on("load error",l=function(w){a.remove(),l=null,w&&g(w.type==="error"?404:200,w.type)}),v.head.appendChild(a[0])},abort:function(){l&&l()}}});var _a,Ea=[],Ur=/(=)\?(?=&|$)|\?\?/;d.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var s=Ea.pop()||d.expando+"_"+wa.guid++;return this[s]=!0,s}}),d.ajaxPrefilter("json jsonp",function(s,a,l){var f,g,w,A=s.jsonp!==!1&&(Ur.test(s.url)?"url":typeof s.data=="string"&&(s.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Ur.test(s.data)&&"data");if(A||s.dataTypes[0]==="jsonp")return f=s.jsonpCallback=M(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback,A?s[A]=s[A].replace(Ur,"$1"+f):s.jsonp!==!1&&(s.url+=(Dr.test(s.url)?"&":"?")+s.jsonp+"="+f),s.converters["script json"]=function(){return w||d.error(f+" was not called"),w[0]},s.dataTypes[0]="json",g=m[f],m[f]=function(){w=arguments},l.always(function(){g===void 0?d(m).removeProp(f):m[f]=g,s[f]&&(s.jsonpCallback=a.jsonpCallback,Ea.push(f)),w&&M(g)&&g(w[0]),w=g=void 0}),"script"}),b.createHTMLDocument=((_a=v.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",_a.childNodes.length===2),d.parseHTML=function(s,a,l){return typeof s!="string"?[]:(typeof a=="boolean"&&(l=a,a=!1),a||(b.createHTMLDocument?((f=(a=v.implementation.createHTMLDocument("")).createElement("base")).href=v.location.href,a.head.appendChild(f)):a=v),w=!l&&[],(g=ut.exec(s))?[a.createElement(g[1])]:(g=kr([s],a,w),w&&w.length&&d(w).remove(),d.merge([],g.childNodes)));var f,g,w},d.fn.load=function(s,a,l){var f,g,w,A=this,E=s.indexOf(" ");return-1<E&&(f=qn(s.slice(E)),s=s.slice(0,E)),M(a)?(l=a,a=void 0):a&&typeof a=="object"&&(g="POST"),0<A.length&&d.ajax({url:s,type:g||"GET",dataType:"html",data:a}).done(function(C){w=arguments,A.html(f?d("<div>").append(d.parseHTML(C)).find(f):C)}).always(l&&function(C,N){A.each(function(){l.apply(this,w||[C.responseText,N,C])})}),this},d.expr.pseudos.animated=function(s){return d.grep(d.timers,function(a){return s===a.elem}).length},d.offset={setOffset:function(s,a,l){var f,g,w,A,E,C,N=d.css(s,"position"),P=d(s),U={};N==="static"&&(s.style.position="relative"),E=P.offset(),w=d.css(s,"top"),C=d.css(s,"left"),(N==="absolute"||N==="fixed")&&-1<(w+C).indexOf("auto")?(A=(f=P.position()).top,g=f.left):(A=parseFloat(w)||0,g=parseFloat(C)||0),M(a)&&(a=a.call(s,l,d.extend({},E))),a.top!=null&&(U.top=a.top-E.top+A),a.left!=null&&(U.left=a.left-E.left+g),"using"in a?a.using.call(s,U):(typeof U.top=="number"&&(U.top+="px"),typeof U.left=="number"&&(U.left+="px"),P.css(U))}},d.fn.extend({offset:function(s){if(arguments.length)return s===void 0?this:this.each(function(g){d.offset.setOffset(this,s,g)});var a,l,f=this[0];return f?f.getClientRects().length?(a=f.getBoundingClientRect(),l=f.ownerDocument.defaultView,{top:a.top+l.pageYOffset,left:a.left+l.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var s,a,l,f=this[0],g={top:0,left:0};if(d.css(f,"position")==="fixed")a=f.getBoundingClientRect();else{for(a=this.offset(),l=f.ownerDocument,s=f.offsetParent||l.documentElement;s&&(s===l.body||s===l.documentElement)&&d.css(s,"position")==="static";)s=s.parentNode;s&&s!==f&&s.nodeType===1&&((g=d(s).offset()).top+=d.css(s,"borderTopWidth",!0),g.left+=d.css(s,"borderLeftWidth",!0))}return{top:a.top-g.top-d.css(f,"marginTop",!0),left:a.left-g.left-d.css(f,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var s=this.offsetParent;s&&d.css(s,"position")==="static";)s=s.offsetParent;return s||de})}}),d.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(s,a){var l=a==="pageYOffset";d.fn[s]=function(f){return Ne(this,function(g,w,A){var E;if(S(g)?E=g:g.nodeType===9&&(E=g.defaultView),A===void 0)return E?E[a]:g[w];E?E.scrollTo(l?E.pageXOffset:A,l?A:E.pageYOffset):g[w]=A},s,f,arguments.length)}}),d.each(["top","left"],function(s,a){d.cssHooks[a]=oa(b.pixelPosition,function(l,f){if(f)return f=qi(l,a),zr.test(f)?d(l).position()[a]+"px":f})}),d.each({Height:"height",Width:"width"},function(s,a){d.each({padding:"inner"+s,content:a,"":"outer"+s},function(l,f){d.fn[f]=function(g,w){var A=arguments.length&&(l||typeof g!="boolean"),E=l||(g===!0||w===!0?"margin":"border");return Ne(this,function(C,N,P){var U;return S(C)?f.indexOf("outer")===0?C["inner"+s]:C.document.documentElement["client"+s]:C.nodeType===9?(U=C.documentElement,Math.max(C.body["scroll"+s],U["scroll"+s],C.body["offset"+s],U["offset"+s],U["client"+s])):P===void 0?d.css(C,N,E):d.style(C,N,P,E)},a,A?g:void 0,A)}})}),d.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(s,a){d.fn[a]=function(l){return this.on(a,l)}}),d.fn.extend({bind:function(s,a,l){return this.on(s,null,a,l)},unbind:function(s,a){return this.off(s,null,a)},delegate:function(s,a,l,f){return this.on(a,s,l,f)},undelegate:function(s,a,l){return arguments.length===1?this.off(s,"**"):this.off(a,s||"**",l)},hover:function(s,a){return this.mouseenter(s).mouseleave(a||s)}}),d.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(s,a){d.fn[a]=function(l,f){return 0<arguments.length?this.on(a,null,l,f):this.trigger(a)}});var Oc=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;d.proxy=function(s,a){var l,f,g;if(typeof a=="string"&&(l=s[a],a=s,s=l),M(s))return f=i.call(arguments,2),(g=function(){return s.apply(a||this,f.concat(i.call(arguments)))}).guid=s.guid=s.guid||d.guid++,g},d.holdReady=function(s){s?d.readyWait++:d.ready(!0)},d.isArray=Array.isArray,d.parseJSON=JSON.parse,d.nodeName=ot,d.isFunction=M,d.isWindow=S,d.camelCase=le,d.type=H,d.now=Date.now,d.isNumeric=function(s){var a=d.type(s);return(a==="number"||a==="string")&&!isNaN(s-parseFloat(s))},d.trim=function(s){return s==null?"":(s+"").replace(Oc,"")},typeof define=="function"&&define.amd&&define("jquery",[],function(){return d});var Bc=m.jQuery,jc=m.$;return d.noConflict=function(s){return m.$===d&&(m.$=jc),s&&m.jQuery===d&&(m.jQuery=Bc),d},typeof t>"u"&&(m.jQuery=m.$=d),d});/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Xh="167",li={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},ui={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},mr=0,Qc=1,Oo=2,Pa=1,Da=100,Oa=204,Ba=205,ja=3,tl=0,Ha="attached",el="detached",Yh=300,ni=1e3,os=1001,_o=1002,yr=1003,nl=1004,il=1005,Bo=1006,sl=1007,jo=1008,rl=1009,Ho=1015,$h=1023,ol=1028,us=2300,ds=2301,$r=2302,Ua=2400,Va=2401,qa=2402,al=2500,hl=0,Kh=1,Eo=2,cl=0,Zh="",Ae="srgb",ke="srgb-linear",ll="display-p3",Jh="display-p3-linear",Co="linear",Wa="srgb",Ga="rec709",Xa="p3",di=7680,Ya=519,Ro=35044,ti=2e3,ko=2001;class ms{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[t]===void 0&&(n[t]=[]),n[t].indexOf(e)===-1&&n[t].push(e)}hasEventListener(t,e){if(this._listeners===void 0)return!1;const n=this._listeners;return n[t]!==void 0&&n[t].indexOf(e)!==-1}removeEventListener(t,e){if(this._listeners===void 0)return;const i=this._listeners[t];if(i!==void 0){const r=i.indexOf(e);r!==-1&&i.splice(r,1)}}dispatchEvent(t){if(this._listeners===void 0)return;const n=this._listeners[t.type];if(n!==void 0){t.target=this;const i=n.slice(0);for(let r=0,o=i.length;r<o;r++)i[r].call(this,t);t.target=null}}}const Qt=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let $a=1234567;const ki=Math.PI/180,fs=180/Math.PI;function $e(){const m=Math.random()*4294967295|0,t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Qt[m&255]+Qt[m>>8&255]+Qt[m>>16&255]+Qt[m>>24&255]+"-"+Qt[t&255]+Qt[t>>8&255]+"-"+Qt[t>>16&15|64]+Qt[t>>24&255]+"-"+Qt[e&63|128]+Qt[e>>8&255]+"-"+Qt[e>>16&255]+Qt[e>>24&255]+Qt[n&255]+Qt[n>>8&255]+Qt[n>>16&255]+Qt[n>>24&255]).toLowerCase()}function $t(m,t,e){return Math.max(t,Math.min(e,m))}function Uo(m,t){return(m%t+t)%t}function ul(m,t,e,n,i){return n+(m-t)*(i-n)/(e-t)}function dl(m,t,e){return m!==t?(e-m)/(t-m):0}function as(m,t,e){return(1-e)*m+e*t}function fl(m,t,e,n){return as(m,t,1-Math.exp(-e*n))}function pl(m,t=1){return t-Math.abs(Uo(m,t*2)-t)}function ml(m,t,e){return m<=t?0:m>=e?1:(m=(m-t)/(e-t),m*m*(3-2*m))}function yl(m,t,e){return m<=t?0:m>=e?1:(m=(m-t)/(e-t),m*m*m*(m*(m*6-15)+10))}function gl(m,t){return m+Math.floor(Math.random()*(t-m+1))}function xl(m,t){return m+Math.random()*(t-m)}function bl(m){return m*(.5-Math.random())}function wl(m){m!==void 0&&($a=m);let t=$a+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function Ml(m){return m*ki}function Al(m){return m*fs}function Tl(m){return(m&m-1)===0&&m!==0}function vl(m){return Math.pow(2,Math.ceil(Math.log(m)/Math.LN2))}function Sl(m){return Math.pow(2,Math.floor(Math.log(m)/Math.LN2))}function _l(m,t,e,n,i){const r=Math.cos,o=Math.sin,h=r(e/2),c=o(e/2),u=r((t+n)/2),p=o((t+n)/2),y=r((t-n)/2),x=o((t-n)/2),b=r((n-t)/2),M=o((n-t)/2);switch(i){case"XYX":m.set(h*p,c*y,c*x,h*u);break;case"YZY":m.set(c*x,h*p,c*y,h*u);break;case"ZXZ":m.set(c*y,c*x,h*p,h*u);break;case"XZX":m.set(h*p,c*M,c*b,h*u);break;case"YXY":m.set(c*b,h*p,c*M,h*u);break;case"ZYZ":m.set(c*M,c*b,h*p,h*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Xe(m,t){switch(t.constructor){case Float32Array:return m;case Uint32Array:return m/4294967295;case Uint16Array:return m/65535;case Uint8Array:return m/255;case Int32Array:return Math.max(m/2147483647,-1);case Int16Array:return Math.max(m/32767,-1);case Int8Array:return Math.max(m/127,-1);default:throw new Error("Invalid component type.")}}function Mt(m,t){switch(t.constructor){case Float32Array:return m;case Uint32Array:return Math.round(m*4294967295);case Uint16Array:return Math.round(m*65535);case Uint8Array:return Math.round(m*255);case Int32Array:return Math.round(m*2147483647);case Int16Array:return Math.round(m*32767);case Int8Array:return Math.round(m*127);default:throw new Error("Invalid component type.")}}const ae={DEG2RAD:ki,RAD2DEG:fs,generateUUID:$e,clamp:$t,euclideanModulo:Uo,mapLinear:ul,inverseLerp:dl,lerp:as,damp:fl,pingpong:pl,smoothstep:ml,smootherstep:yl,randInt:gl,randFloat:xl,randFloatSpread:bl,seededRandom:wl,degToRad:Ml,radToDeg:Al,isPowerOfTwo:Tl,ceilPowerOfTwo:vl,floorPowerOfTwo:Sl,setQuaternionFromProperEuler:_l,normalize:Mt,denormalize:Xe};class ft{constructor(t=0,e=0){ft.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6],this.y=i[1]*e+i[4]*n+i[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const n=this.dot(t)/e;return Math.acos($t(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),i=Math.sin(e),r=this.x-t.x,o=this.y-t.y;return this.x=r*n-o*i+t.x,this.y=r*i+o*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Mn{constructor(t,e,n,i,r,o,h,c,u){Mn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&&this.set(t,e,n,i,r,o,h,c,u)}set(t,e,n,i,r,o,h,c,u){const p=this.elements;return p[0]=t,p[1]=i,p[2]=h,p[3]=e,p[4]=r,p[5]=c,p[6]=n,p[7]=o,p[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,i=e.elements,r=this.elements,o=n[0],h=n[3],c=n[6],u=n[1],p=n[4],y=n[7],x=n[2],b=n[5],M=n[8],S=i[0],v=i[3],k=i[6],B=i[1],H=i[4],O=i[7],d=i[2],Y=i[5],q=i[8];return r[0]=o*S+h*B+c*d,r[3]=o*v+h*H+c*Y,r[6]=o*k+h*O+c*q,r[1]=u*S+p*B+y*d,r[4]=u*v+p*H+y*Y,r[7]=u*k+p*O+y*q,r[2]=x*S+b*B+M*d,r[5]=x*v+b*H+M*Y,r[8]=x*k+b*O+M*q,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],h=t[5],c=t[6],u=t[7],p=t[8];return e*o*p-e*h*u-n*r*p+n*h*c+i*r*u-i*o*c}invert(){const t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],h=t[5],c=t[6],u=t[7],p=t[8],y=p*o-h*u,x=h*c-p*r,b=u*r-o*c,M=e*y+n*x+i*b;if(M===0)return this.set(0,0,0,0,0,0,0,0,0);const S=1/M;return t[0]=y*S,t[1]=(i*u-p*n)*S,t[2]=(h*n-i*o)*S,t[3]=x*S,t[4]=(p*e-i*c)*S,t[5]=(i*r-h*e)*S,t[6]=b*S,t[7]=(n*c-u*e)*S,t[8]=(o*e-n*r)*S,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,i,r,o,h){const c=Math.cos(r),u=Math.sin(r);return this.set(n*c,n*u,-n*(c*o+u*h)+o+t,-i*u,i*c,-i*(-u*o+c*h)+h+e,0,0,1),this}scale(t,e){return this.premultiply(Kr.makeScale(t,e)),this}rotate(t){return this.premultiply(Kr.makeRotation(-t)),this}translate(t,e){return this.premultiply(Kr.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,n,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,n=t.elements;for(let i=0;i<9;i++)if(e[i]!==n[i])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return new this.constructor().fromArray(this.elements)}}const Kr=new Mn;function El(m){for(let t=m.length-1;t>=0;--t)if(m[t]>=65535)return!0;return!1}function Io(m){return document.createElementNS("http://www.w3.org/1999/xhtml",m)}const Ka={};function Qh(m){m in Ka||(Ka[m]=!0,console.warn(m))}const Za=new Mn().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),Ja=new Mn().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Ki={[ke]:{transfer:Co,primaries:Ga,luminanceCoefficients:[.2126,.7152,.0722],toReference:m=>m,fromReference:m=>m},[Ae]:{transfer:Wa,primaries:Ga,luminanceCoefficients:[.2126,.7152,.0722],toReference:m=>m.convertSRGBToLinear(),fromReference:m=>m.convertLinearToSRGB()},[Jh]:{transfer:Co,primaries:Xa,luminanceCoefficients:[.2289,.6917,.0793],toReference:m=>m.applyMatrix3(Ja),fromReference:m=>m.applyMatrix3(Za)},[ll]:{transfer:Wa,primaries:Xa,luminanceCoefficients:[.2289,.6917,.0793],toReference:m=>m.convertSRGBToLinear().applyMatrix3(Ja),fromReference:m=>m.applyMatrix3(Za).convertLinearToSRGB()}},Cl=new Set([ke,Jh]),Me={enabled:!0,_workingColorSpace:ke,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(m){if(!Cl.has(m))throw new Error(`Unsupported working color space, "${m}".`);this._workingColorSpace=m},convert:function(m,t,e){if(this.enabled===!1||t===e||!t||!e)return m;const n=Ki[t].toReference,i=Ki[e].fromReference;return i(n(m))},fromWorkingColorSpace:function(m,t){return this.convert(m,this._workingColorSpace,t)},toWorkingColorSpace:function(m,t){return this.convert(m,t,this._workingColorSpace)},getPrimaries:function(m){return Ki[m].primaries},getTransfer:function(m){return m===Zh?Co:Ki[m].transfer},getLuminanceCoefficients:function(m,t=this._workingColorSpace){return m.fromArray(Ki[t].luminanceCoefficients)}};function Ii(m){return m<.04045?m*.0773993808:Math.pow(m*.9478672986+.0521327014,2.4)}function Zr(m){return m<.0031308?m*12.92:1.055*Math.pow(m,.41666)-.055}let fi;class Rl{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{fi===void 0&&(fi=Io("canvas")),fi.width=t.width,fi.height=t.height;const n=fi.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=fi}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const e=Io("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const i=n.getImageData(0,0,t.width,t.height),r=i.data;for(let o=0;o<r.length;o++)r[o]=Ii(r[o]/255)*255;return n.putImageData(i,0,0),e}else if(t.data){const e=t.data.slice(0);for(let n=0;n<e.length;n++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[n]=Math.floor(Ii(e[n]/255)*255):e[n]=Ii(e[n]);return{data:e,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let kl=0;class Il{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:kl++}),this.uuid=$e(),this.data=t,this.dataReady=!0,this.version=0}set needsUpdate(t){t===!0&&this.version++}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.images[this.uuid]!==void 0)return t.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(i!==null){let r;if(Array.isArray(i)){r=[];for(let o=0,h=i.length;o<h;o++)i[o].isDataTexture?r.push(Jr(i[o].image)):r.push(Jr(i[o]))}else r=Jr(i);n.url=r}return e||(t.images[this.uuid]=n),n}}function Jr(m){return typeof HTMLImageElement<"u"&&m instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&m instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&m instanceof ImageBitmap?Rl.getDataURL(m):m.data?{data:Array.from(m.data),width:m.width,height:m.height,type:m.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let zl=0;class Re extends ms{constructor(t=Re.DEFAULT_IMAGE,e=Re.DEFAULT_MAPPING,n=os,i=os,r=Bo,o=jo,h=$h,c=rl,u=Re.DEFAULT_ANISOTROPY,p=Zh){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:zl++}),this.uuid=$e(),this.name="",this.source=new Il(t),this.mipmaps=[],this.mapping=e,this.channel=0,this.wrapS=n,this.wrapT=i,this.magFilter=r,this.minFilter=o,this.anisotropy=u,this.format=h,this.internalFormat=null,this.type=c,this.offset=new ft(0,0),this.repeat=new ft(1,1),this.center=new ft(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Mn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=p,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),e||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==Yh)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case ni:t.x=t.x-Math.floor(t.x);break;case os:t.x=t.x<0?0:1;break;case _o:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case ni:t.y=t.y-Math.floor(t.y);break;case os:t.y=t.y<0?0:1;break;case _o:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}}Re.DEFAULT_IMAGE=null;Re.DEFAULT_MAPPING=Yh;Re.DEFAULT_ANISOTROPY=1;class Ce{constructor(t=0,e=0,n=0,i=1){Ce.prototype.isVector4=!0,this.x=t,this.y=e,this.z=n,this.w=i}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,i=this.z,r=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*i+o[12]*r,this.y=o[1]*e+o[5]*n+o[9]*i+o[13]*r,this.z=o[2]*e+o[6]*n+o[10]*i+o[14]*r,this.w=o[3]*e+o[7]*n+o[11]*i+o[15]*r,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,i,r;const c=t.elements,u=c[0],p=c[4],y=c[8],x=c[1],b=c[5],M=c[9],S=c[2],v=c[6],k=c[10];if(Math.abs(p-x)<.01&&Math.abs(y-S)<.01&&Math.abs(M-v)<.01){if(Math.abs(p+x)<.1&&Math.abs(y+S)<.1&&Math.abs(M+v)<.1&&Math.abs(u+b+k-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const H=(u+1)/2,O=(b+1)/2,d=(k+1)/2,Y=(p+x)/4,q=(y+S)/4,X=(M+v)/4;return H>O&&H>d?H<.01?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(H),i=Y/n,r=q/n):O>d?O<.01?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(O),n=Y/i,r=X/i):d<.01?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(d),n=q/r,i=X/r),this.set(n,i,r,e),this}let B=Math.sqrt((v-M)*(v-M)+(y-S)*(y-S)+(x-p)*(x-p));return Math.abs(B)<.001&&(B=1),this.x=(v-M)/B,this.y=(y-S)/B,this.z=(x-p)/B,this.w=Math.acos((u+b+k-1)/2),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this.w=e[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class en{constructor(t=0,e=0,n=0,i=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=i}static slerpFlat(t,e,n,i,r,o,h){let c=n[i+0],u=n[i+1],p=n[i+2],y=n[i+3];const x=r[o+0],b=r[o+1],M=r[o+2],S=r[o+3];if(h===0){t[e+0]=c,t[e+1]=u,t[e+2]=p,t[e+3]=y;return}if(h===1){t[e+0]=x,t[e+1]=b,t[e+2]=M,t[e+3]=S;return}if(y!==S||c!==x||u!==b||p!==M){let v=1-h;const k=c*x+u*b+p*M+y*S,B=k>=0?1:-1,H=1-k*k;if(H>Number.EPSILON){const d=Math.sqrt(H),Y=Math.atan2(d,k*B);v=Math.sin(v*Y)/d,h=Math.sin(h*Y)/d}const O=h*B;if(c=c*v+x*O,u=u*v+b*O,p=p*v+M*O,y=y*v+S*O,v===1-h){const d=1/Math.sqrt(c*c+u*u+p*p+y*y);c*=d,u*=d,p*=d,y*=d}}t[e]=c,t[e+1]=u,t[e+2]=p,t[e+3]=y}static multiplyQuaternionsFlat(t,e,n,i,r,o){const h=n[i],c=n[i+1],u=n[i+2],p=n[i+3],y=r[o],x=r[o+1],b=r[o+2],M=r[o+3];return t[e]=h*M+p*y+c*b-u*x,t[e+1]=c*M+p*x+u*y-h*b,t[e+2]=u*M+p*b+h*x-c*y,t[e+3]=p*M-h*y-c*x-u*b,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){const n=t._x,i=t._y,r=t._z,o=t._order,h=Math.cos,c=Math.sin,u=h(n/2),p=h(i/2),y=h(r/2),x=c(n/2),b=c(i/2),M=c(r/2);switch(o){case"XYZ":this._x=x*p*y+u*b*M,this._y=u*b*y-x*p*M,this._z=u*p*M+x*b*y,this._w=u*p*y-x*b*M;break;case"YXZ":this._x=x*p*y+u*b*M,this._y=u*b*y-x*p*M,this._z=u*p*M-x*b*y,this._w=u*p*y+x*b*M;break;case"ZXY":this._x=x*p*y-u*b*M,this._y=u*b*y+x*p*M,this._z=u*p*M+x*b*y,this._w=u*p*y-x*b*M;break;case"ZYX":this._x=x*p*y-u*b*M,this._y=u*b*y+x*p*M,this._z=u*p*M-x*b*y,this._w=u*p*y+x*b*M;break;case"YZX":this._x=x*p*y+u*b*M,this._y=u*b*y+x*p*M,this._z=u*p*M-x*b*y,this._w=u*p*y-x*b*M;break;case"XZY":this._x=x*p*y-u*b*M,this._y=u*b*y-x*p*M,this._z=u*p*M+x*b*y,this._w=u*p*y+x*b*M;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return e===!0&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],i=e[4],r=e[8],o=e[1],h=e[5],c=e[9],u=e[2],p=e[6],y=e[10],x=n+h+y;if(x>0){const b=.5/Math.sqrt(x+1);this._w=.25/b,this._x=(p-c)*b,this._y=(r-u)*b,this._z=(o-i)*b}else if(n>h&&n>y){const b=2*Math.sqrt(1+n-h-y);this._w=(p-c)/b,this._x=.25*b,this._y=(i+o)/b,this._z=(r+u)/b}else if(h>y){const b=2*Math.sqrt(1+h-n-y);this._w=(r-u)/b,this._x=(i+o)/b,this._y=.25*b,this._z=(c+p)/b}else{const b=2*Math.sqrt(1+y-n-h);this._w=(o-i)/b,this._x=(r+u)/b,this._y=(c+p)/b,this._z=.25*b}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs($t(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(n===0)return this;const i=Math.min(1,e/n);return this.slerp(t,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,i=t._y,r=t._z,o=t._w,h=e._x,c=e._y,u=e._z,p=e._w;return this._x=n*p+o*h+i*u-r*c,this._y=i*p+o*c+r*h-n*u,this._z=r*p+o*u+n*c-i*h,this._w=o*p-n*h-i*c-r*u,this._onChangeCallback(),this}slerp(t,e){if(e===0)return this;if(e===1)return this.copy(t);const n=this._x,i=this._y,r=this._z,o=this._w;let h=o*t._w+n*t._x+i*t._y+r*t._z;if(h<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,h=-h):this.copy(t),h>=1)return this._w=o,this._x=n,this._y=i,this._z=r,this;const c=1-h*h;if(c<=Number.EPSILON){const b=1-e;return this._w=b*o+e*this._w,this._x=b*n+e*this._x,this._y=b*i+e*this._y,this._z=b*r+e*this._z,this.normalize(),this}const u=Math.sqrt(c),p=Math.atan2(u,h),y=Math.sin((1-e)*p)/u,x=Math.sin(e*p)/u;return this._w=o*y+this._w*x,this._x=n*y+this._x*x,this._y=i*y+this._y*x,this._z=r*y+this._z*x,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),n=Math.random(),i=Math.sqrt(1-n),r=Math.sqrt(n);return this.set(i*Math.sin(t),i*Math.cos(t),r*Math.sin(e),r*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class z{constructor(t=0,e=0,n=0){z.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return n===void 0&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(Qa.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(Qa.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*i,this.y=r[1]*e+r[4]*n+r[7]*i,this.z=r[2]*e+r[5]*n+r[8]*i,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,i=this.z,r=t.elements,o=1/(r[3]*e+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*i+r[12])*o,this.y=(r[1]*e+r[5]*n+r[9]*i+r[13])*o,this.z=(r[2]*e+r[6]*n+r[10]*i+r[14])*o,this}applyQuaternion(t){const e=this.x,n=this.y,i=this.z,r=t.x,o=t.y,h=t.z,c=t.w,u=2*(o*i-h*n),p=2*(h*e-r*i),y=2*(r*n-o*e);return this.x=e+c*u+o*y-h*p,this.y=n+c*p+h*u-r*y,this.z=i+c*y+r*p-o*u,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i,this.y=r[1]*e+r[5]*n+r[9]*i,this.z=r[2]*e+r[6]*n+r[10]*i,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,i=t.y,r=t.z,o=e.x,h=e.y,c=e.z;return this.x=i*c-r*h,this.y=r*o-n*c,this.z=n*h-i*o,this}projectOnVector(t){const e=t.lengthSq();if(e===0)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return Qr.copy(this).projectOnVector(t),this.sub(Qr)}reflect(t){return this.sub(Qr.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const n=this.dot(t)/e;return Math.acos($t(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const i=Math.sin(e)*t;return this.x=i*Math.sin(n),this.y=Math.cos(e)*t,this.z=i*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,e*4)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,e*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,e=Math.random()*2-1,n=Math.sqrt(1-e*e);return this.x=n*Math.cos(t),this.y=e,this.z=n*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Qr=new z,Qa=new en;class nn{constructor(t=new z(1/0,1/0,1/0),e=new z(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e+=3)this.expandByPoint(Ve.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,n=t.count;e<n;e++)this.expandByPoint(Ve.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=Ve.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const n=t.geometry;if(n!==void 0){const r=n.getAttribute("position");if(e===!0&&r!==void 0&&t.isInstancedMesh!==!0)for(let o=0,h=r.count;o<h;o++)t.isMesh===!0?t.getVertexPosition(o,Ve):Ve.fromBufferAttribute(r,o),Ve.applyMatrix4(t.matrixWorld),this.expandByPoint(Ve);else t.boundingBox!==void 0?(t.boundingBox===null&&t.computeBoundingBox(),Ds.copy(t.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),Ds.copy(n.boundingBox)),Ds.applyMatrix4(t.matrixWorld),this.union(Ds)}const i=t.children;for(let r=0,o=i.length;r<o;r++)this.expandByObject(i[r],e);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,Ve),Ve.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Zi),Os.subVectors(this.max,Zi),pi.subVectors(t.a,Zi),mi.subVectors(t.b,Zi),yi.subVectors(t.c,Zi),En.subVectors(mi,pi),Cn.subVectors(yi,mi),Yn.subVectors(pi,yi);let e=[0,-En.z,En.y,0,-Cn.z,Cn.y,0,-Yn.z,Yn.y,En.z,0,-En.x,Cn.z,0,-Cn.x,Yn.z,0,-Yn.x,-En.y,En.x,0,-Cn.y,Cn.x,0,-Yn.y,Yn.x,0];return!to(e,pi,mi,yi,Os)||(e=[1,0,0,0,1,0,0,0,1],!to(e,pi,mi,yi,Os))?!1:(Bs.crossVectors(En,Cn),e=[Bs.x,Bs.y,Bs.z],to(e,pi,mi,yi,Os))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,Ve).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=this.getSize(Ve).length()*.5),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(dn[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),dn[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),dn[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),dn[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),dn[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),dn[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),dn[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),dn[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(dn),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const dn=[new z,new z,new z,new z,new z,new z,new z,new z],Ve=new z,Ds=new nn,pi=new z,mi=new z,yi=new z,En=new z,Cn=new z,Yn=new z,Zi=new z,Os=new z,Bs=new z,$n=new z;function to(m,t,e,n,i){for(let r=0,o=m.length-3;r<=o;r+=3){$n.fromArray(m,r);const h=i.x*Math.abs($n.x)+i.y*Math.abs($n.y)+i.z*Math.abs($n.z),c=t.dot($n),u=e.dot($n),p=n.dot($n);if(Math.max(-Math.max(c,u,p),Math.min(c,u,p))>h)return!1}return!0}const Nl=new nn,Ji=new z,eo=new z;class sn{constructor(t=new z,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;e!==void 0?n.copy(e):Nl.setFromPoints(t).getCenter(n);let i=0;for(let r=0,o=t.length;r<o;r++)i=Math.max(i,n.distanceToSquared(t[r]));return this.radius=Math.sqrt(i),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;Ji.subVectors(t,this.center);const e=Ji.lengthSq();if(e>this.radius*this.radius){const n=Math.sqrt(e),i=(n-this.radius)*.5;this.center.addScaledVector(Ji,i/n),this.radius+=i}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(eo.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(Ji.copy(t.center).add(eo)),this.expandByPoint(Ji.copy(t.center).sub(eo))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}}const fn=new z,no=new z,js=new z,Rn=new z,io=new z,Hs=new z,so=new z;class Pi{constructor(t=new z,e=new z(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,fn)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=fn.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(fn.copy(this.origin).addScaledVector(this.direction,e),fn.distanceToSquared(t))}distanceSqToSegment(t,e,n,i){no.copy(t).add(e).multiplyScalar(.5),js.copy(e).sub(t).normalize(),Rn.copy(this.origin).sub(no);const r=t.distanceTo(e)*.5,o=-this.direction.dot(js),h=Rn.dot(this.direction),c=-Rn.dot(js),u=Rn.lengthSq(),p=Math.abs(1-o*o);let y,x,b,M;if(p>0)if(y=o*c-h,x=o*h-c,M=r*p,y>=0)if(x>=-M)if(x<=M){const S=1/p;y*=S,x*=S,b=y*(y+o*x+2*h)+x*(o*y+x+2*c)+u}else x=r,y=Math.max(0,-(o*x+h)),b=-y*y+x*(x+2*c)+u;else x=-r,y=Math.max(0,-(o*x+h)),b=-y*y+x*(x+2*c)+u;else x<=-M?(y=Math.max(0,-(-o*r+h)),x=y>0?-r:Math.min(Math.max(-r,-c),r),b=-y*y+x*(x+2*c)+u):x<=M?(y=0,x=Math.min(Math.max(-r,-c),r),b=x*(x+2*c)+u):(y=Math.max(0,-(o*r+h)),x=y>0?r:Math.min(Math.max(-r,-c),r),b=-y*y+x*(x+2*c)+u);else x=o>0?-r:r,y=Math.max(0,-(o*x+h)),b=-y*y+x*(x+2*c)+u;return n&&n.copy(this.origin).addScaledVector(this.direction,y),i&&i.copy(no).addScaledVector(js,x),b}intersectSphere(t,e){fn.subVectors(t.center,this.origin);const n=fn.dot(this.direction),i=fn.dot(fn)-n*n,r=t.radius*t.radius;if(i>r)return null;const o=Math.sqrt(r-i),h=n-o,c=n+o;return c<0?null:h<0?this.at(c,e):this.at(h,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(e===0)return t.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return n===null?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return e===0||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,i,r,o,h,c;const u=1/this.direction.x,p=1/this.direction.y,y=1/this.direction.z,x=this.origin;return u>=0?(n=(t.min.x-x.x)*u,i=(t.max.x-x.x)*u):(n=(t.max.x-x.x)*u,i=(t.min.x-x.x)*u),p>=0?(r=(t.min.y-x.y)*p,o=(t.max.y-x.y)*p):(r=(t.max.y-x.y)*p,o=(t.min.y-x.y)*p),n>o||r>i||((r>n||isNaN(n))&&(n=r),(o<i||isNaN(i))&&(i=o),y>=0?(h=(t.min.z-x.z)*y,c=(t.max.z-x.z)*y):(h=(t.max.z-x.z)*y,c=(t.min.z-x.z)*y),n>c||h>i)||((h>n||n!==n)&&(n=h),(c<i||i!==i)&&(i=c),i<0)?null:this.at(n>=0?n:i,e)}intersectsBox(t){return this.intersectBox(t,fn)!==null}intersectTriangle(t,e,n,i,r){io.subVectors(e,t),Hs.subVectors(n,t),so.crossVectors(io,Hs);let o=this.direction.dot(so),h;if(o>0){if(i)return null;h=1}else if(o<0)h=-1,o=-o;else return null;Rn.subVectors(this.origin,t);const c=h*this.direction.dot(Hs.crossVectors(Rn,Hs));if(c<0)return null;const u=h*this.direction.dot(io.cross(Rn));if(u<0||c+u>o)return null;const p=-h*Rn.dot(so);return p<0?null:this.at(p/o,r)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class mt{constructor(t,e,n,i,r,o,h,c,u,p,y,x,b,M,S,v){mt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,e,n,i,r,o,h,c,u,p,y,x,b,M,S,v)}set(t,e,n,i,r,o,h,c,u,p,y,x,b,M,S,v){const k=this.elements;return k[0]=t,k[4]=e,k[8]=n,k[12]=i,k[1]=r,k[5]=o,k[9]=h,k[13]=c,k[2]=u,k[6]=p,k[10]=y,k[14]=x,k[3]=b,k[7]=M,k[11]=S,k[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new mt().fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,i=1/gi.setFromMatrixColumn(t,0).length(),r=1/gi.setFromMatrixColumn(t,1).length(),o=1/gi.setFromMatrixColumn(t,2).length();return e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[3]=0,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[7]=0,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,n=t.x,i=t.y,r=t.z,o=Math.cos(n),h=Math.sin(n),c=Math.cos(i),u=Math.sin(i),p=Math.cos(r),y=Math.sin(r);if(t.order==="XYZ"){const x=o*p,b=o*y,M=h*p,S=h*y;e[0]=c*p,e[4]=-c*y,e[8]=u,e[1]=b+M*u,e[5]=x-S*u,e[9]=-h*c,e[2]=S-x*u,e[6]=M+b*u,e[10]=o*c}else if(t.order==="YXZ"){const x=c*p,b=c*y,M=u*p,S=u*y;e[0]=x+S*h,e[4]=M*h-b,e[8]=o*u,e[1]=o*y,e[5]=o*p,e[9]=-h,e[2]=b*h-M,e[6]=S+x*h,e[10]=o*c}else if(t.order==="ZXY"){const x=c*p,b=c*y,M=u*p,S=u*y;e[0]=x-S*h,e[4]=-o*y,e[8]=M+b*h,e[1]=b+M*h,e[5]=o*p,e[9]=S-x*h,e[2]=-o*u,e[6]=h,e[10]=o*c}else if(t.order==="ZYX"){const x=o*p,b=o*y,M=h*p,S=h*y;e[0]=c*p,e[4]=M*u-b,e[8]=x*u+S,e[1]=c*y,e[5]=S*u+x,e[9]=b*u-M,e[2]=-u,e[6]=h*c,e[10]=o*c}else if(t.order==="YZX"){const x=o*c,b=o*u,M=h*c,S=h*u;e[0]=c*p,e[4]=S-x*y,e[8]=M*y+b,e[1]=y,e[5]=o*p,e[9]=-h*p,e[2]=-u*p,e[6]=b*y+M,e[10]=x-S*y}else if(t.order==="XZY"){const x=o*c,b=o*u,M=h*c,S=h*u;e[0]=c*p,e[4]=-y,e[8]=u*p,e[1]=x*y+S,e[5]=o*p,e[9]=b*y-M,e[2]=M*y-b,e[6]=h*p,e[10]=S*y+x}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Ll,t,Fl)}lookAt(t,e,n){const i=this.elements;return be.subVectors(t,e),be.lengthSq()===0&&(be.z=1),be.normalize(),kn.crossVectors(n,be),kn.lengthSq()===0&&(Math.abs(n.z)===1?be.x+=1e-4:be.z+=1e-4,be.normalize(),kn.crossVectors(n,be)),kn.normalize(),Us.crossVectors(be,kn),i[0]=kn.x,i[4]=Us.x,i[8]=be.x,i[1]=kn.y,i[5]=Us.y,i[9]=be.y,i[2]=kn.z,i[6]=Us.z,i[10]=be.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,i=e.elements,r=this.elements,o=n[0],h=n[4],c=n[8],u=n[12],p=n[1],y=n[5],x=n[9],b=n[13],M=n[2],S=n[6],v=n[10],k=n[14],B=n[3],H=n[7],O=n[11],d=n[15],Y=i[0],q=i[4],X=i[8],tt=i[12],ct=i[1],ot=i[5],ut=i[9],dt=i[13],vt=i[2],Lt=i[6],Ft=i[10],ce=i[14],ie=i[3],bt=i[7],St=i[11],Pt=i[15];return r[0]=o*Y+h*ct+c*vt+u*ie,r[4]=o*q+h*ot+c*Lt+u*bt,r[8]=o*X+h*ut+c*Ft+u*St,r[12]=o*tt+h*dt+c*ce+u*Pt,r[1]=p*Y+y*ct+x*vt+b*ie,r[5]=p*q+y*ot+x*Lt+b*bt,r[9]=p*X+y*ut+x*Ft+b*St,r[13]=p*tt+y*dt+x*ce+b*Pt,r[2]=M*Y+S*ct+v*vt+k*ie,r[6]=M*q+S*ot+v*Lt+k*bt,r[10]=M*X+S*ut+v*Ft+k*St,r[14]=M*tt+S*dt+v*ce+k*Pt,r[3]=B*Y+H*ct+O*vt+d*ie,r[7]=B*q+H*ot+O*Lt+d*bt,r[11]=B*X+H*ut+O*Ft+d*St,r[15]=B*tt+H*dt+O*ce+d*Pt,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],o=t[1],h=t[5],c=t[9],u=t[13],p=t[2],y=t[6],x=t[10],b=t[14],M=t[3],S=t[7],v=t[11],k=t[15];return M*(+r*c*y-i*u*y-r*h*x+n*u*x+i*h*b-n*c*b)+S*(+e*c*b-e*u*x+r*o*x-i*o*b+i*u*p-r*c*p)+v*(+e*u*y-e*h*b-r*o*y+n*o*b+r*h*p-n*u*p)+k*(-i*h*p-e*c*y+e*h*x+i*o*y-n*o*x+n*c*p)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],h=t[5],c=t[6],u=t[7],p=t[8],y=t[9],x=t[10],b=t[11],M=t[12],S=t[13],v=t[14],k=t[15],B=y*v*u-S*x*u+S*c*b-h*v*b-y*c*k+h*x*k,H=M*x*u-p*v*u-M*c*b+o*v*b+p*c*k-o*x*k,O=p*S*u-M*y*u+M*h*b-o*S*b-p*h*k+o*y*k,d=M*y*c-p*S*c-M*h*x+o*S*x+p*h*v-o*y*v,Y=e*B+n*H+i*O+r*d;if(Y===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const q=1/Y;return t[0]=B*q,t[1]=(S*x*r-y*v*r-S*i*b+n*v*b+y*i*k-n*x*k)*q,t[2]=(h*v*r-S*c*r+S*i*u-n*v*u-h*i*k+n*c*k)*q,t[3]=(y*c*r-h*x*r-y*i*u+n*x*u+h*i*b-n*c*b)*q,t[4]=H*q,t[5]=(p*v*r-M*x*r+M*i*b-e*v*b-p*i*k+e*x*k)*q,t[6]=(M*c*r-o*v*r-M*i*u+e*v*u+o*i*k-e*c*k)*q,t[7]=(o*x*r-p*c*r+p*i*u-e*x*u-o*i*b+e*c*b)*q,t[8]=O*q,t[9]=(M*y*r-p*S*r-M*n*b+e*S*b+p*n*k-e*y*k)*q,t[10]=(o*S*r-M*h*r+M*n*u-e*S*u-o*n*k+e*h*k)*q,t[11]=(p*h*r-o*y*r-p*n*u+e*y*u+o*n*b-e*h*b)*q,t[12]=d*q,t[13]=(p*S*i-M*y*i+M*n*x-e*S*x-p*n*v+e*y*v)*q,t[14]=(M*h*i-o*S*i-M*n*c+e*S*c+o*n*v-e*h*v)*q,t[15]=(o*y*i-p*h*i+p*n*c-e*y*c-o*n*x+e*h*x)*q,this}scale(t){const e=this.elements,n=t.x,i=t.y,r=t.z;return e[0]*=n,e[4]*=i,e[8]*=r,e[1]*=n,e[5]*=i,e[9]*=r,e[2]*=n,e[6]*=i,e[10]*=r,e[3]*=n,e[7]*=i,e[11]*=r,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,i))}makeTranslation(t,e,n){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),i=Math.sin(e),r=1-n,o=t.x,h=t.y,c=t.z,u=r*o,p=r*h;return this.set(u*o+n,u*h-i*c,u*c+i*h,0,u*h+i*c,p*h+n,p*c-i*o,0,u*c-i*h,p*c+i*o,r*c*c+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,i,r,o){return this.set(1,n,r,0,t,1,o,0,e,i,1,0,0,0,0,1),this}compose(t,e,n){const i=this.elements,r=e._x,o=e._y,h=e._z,c=e._w,u=r+r,p=o+o,y=h+h,x=r*u,b=r*p,M=r*y,S=o*p,v=o*y,k=h*y,B=c*u,H=c*p,O=c*y,d=n.x,Y=n.y,q=n.z;return i[0]=(1-(S+k))*d,i[1]=(b+O)*d,i[2]=(M-H)*d,i[3]=0,i[4]=(b-O)*Y,i[5]=(1-(x+k))*Y,i[6]=(v+B)*Y,i[7]=0,i[8]=(M+H)*q,i[9]=(v-B)*q,i[10]=(1-(x+S))*q,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this}decompose(t,e,n){const i=this.elements;let r=gi.set(i[0],i[1],i[2]).length();const o=gi.set(i[4],i[5],i[6]).length(),h=gi.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),t.x=i[12],t.y=i[13],t.z=i[14],qe.copy(this);const u=1/r,p=1/o,y=1/h;return qe.elements[0]*=u,qe.elements[1]*=u,qe.elements[2]*=u,qe.elements[4]*=p,qe.elements[5]*=p,qe.elements[6]*=p,qe.elements[8]*=y,qe.elements[9]*=y,qe.elements[10]*=y,e.setFromRotationMatrix(qe),n.x=r,n.y=o,n.z=h,this}makePerspective(t,e,n,i,r,o,h=ti){const c=this.elements,u=2*r/(e-t),p=2*r/(n-i),y=(e+t)/(e-t),x=(n+i)/(n-i);let b,M;if(h===ti)b=-(o+r)/(o-r),M=-2*o*r/(o-r);else if(h===ko)b=-o/(o-r),M=-o*r/(o-r);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+h);return c[0]=u,c[4]=0,c[8]=y,c[12]=0,c[1]=0,c[5]=p,c[9]=x,c[13]=0,c[2]=0,c[6]=0,c[10]=b,c[14]=M,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(t,e,n,i,r,o,h=ti){const c=this.elements,u=1/(e-t),p=1/(n-i),y=1/(o-r),x=(e+t)*u,b=(n+i)*p;let M,S;if(h===ti)M=(o+r)*y,S=-2*y;else if(h===ko)M=r*y,S=-1*y;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+h);return c[0]=2*u,c[4]=0,c[8]=0,c[12]=-x,c[1]=0,c[5]=2*p,c[9]=0,c[13]=-b,c[2]=0,c[6]=0,c[10]=S,c[14]=-M,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let i=0;i<16;i++)if(e[i]!==n[i])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const gi=new z,qe=new mt,Ll=new z(0,0,0),Fl=new z(1,1,1),kn=new z,Us=new z,be=new z,th=new mt,eh=new en;class Pn{constructor(t=0,e=0,n=0,i=Pn.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=n,this._order=i}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,i=this._order){return this._x=t,this._y=e,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,n=!0){const i=t.elements,r=i[0],o=i[4],h=i[8],c=i[1],u=i[5],p=i[9],y=i[2],x=i[6],b=i[10];switch(e){case"XYZ":this._y=Math.asin($t(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-p,b),this._z=Math.atan2(-o,r)):(this._x=Math.atan2(x,u),this._z=0);break;case"YXZ":this._x=Math.asin(-$t(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(h,b),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-y,r),this._z=0);break;case"ZXY":this._x=Math.asin($t(x,-1,1)),Math.abs(x)<.9999999?(this._y=Math.atan2(-y,b),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(c,r));break;case"ZYX":this._y=Math.asin(-$t(y,-1,1)),Math.abs(y)<.9999999?(this._x=Math.atan2(x,b),this._z=Math.atan2(c,r)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin($t(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-p,u),this._y=Math.atan2(-y,r)):(this._x=0,this._y=Math.atan2(h,b));break;case"XZY":this._z=Math.asin(-$t(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(x,u),this._y=Math.atan2(h,r)):(this._x=Math.atan2(-p,b),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,n===!0&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return th.makeRotationFromQuaternion(t),this.setFromRotationMatrix(th,e,n)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return eh.setFromEuler(this),this.setFromQuaternion(eh,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Pn.DEFAULT_ORDER="XYZ";class tc{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}}let Pl=0;const nh=new z,xi=new en,pn=new mt,Vs=new z,Qi=new z,Dl=new z,Ol=new en,ih=new z(1,0,0),sh=new z(0,1,0),rh=new z(0,0,1),oh={type:"added"},Bl={type:"removed"},bi={type:"childadded",child:null},ro={type:"childremoved",child:null};class Nt extends ms{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Pl++}),this.uuid=$e(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Nt.DEFAULT_UP.clone();const t=new z,e=new Pn,n=new en,i=new z(1,1,1);function r(){n.setFromEuler(e,!1)}function o(){e.setFromQuaternion(n,void 0,!1)}e._onChange(r),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new mt},normalMatrix:{value:new Mn}}),this.matrix=new mt,this.matrixWorld=new mt,this.matrixAutoUpdate=Nt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Nt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new tc,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return xi.setFromAxisAngle(t,e),this.quaternion.multiply(xi),this}rotateOnWorldAxis(t,e){return xi.setFromAxisAngle(t,e),this.quaternion.premultiply(xi),this}rotateX(t){return this.rotateOnAxis(ih,t)}rotateY(t){return this.rotateOnAxis(sh,t)}rotateZ(t){return this.rotateOnAxis(rh,t)}translateOnAxis(t,e){return nh.copy(t).applyQuaternion(this.quaternion),this.position.add(nh.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(ih,t)}translateY(t){return this.translateOnAxis(sh,t)}translateZ(t){return this.translateOnAxis(rh,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(pn.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?Vs.copy(t):Vs.set(t,e,n);const i=this.parent;this.updateWorldMatrix(!0,!1),Qi.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?pn.lookAt(Qi,Vs,this.up):pn.lookAt(Vs,Qi,this.up),this.quaternion.setFromRotationMatrix(pn),i&&(pn.extractRotation(i.matrixWorld),xi.setFromRotationMatrix(pn),this.quaternion.premultiply(xi.invert()))}add(t){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(oh),bi.child=t,this.dispatchEvent(bi),bi.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const e=this.children.indexOf(t);return e!==-1&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(Bl),ro.child=t,this.dispatchEvent(ro),ro.child=null),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),pn.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),pn.multiply(t.parent.matrixWorld)),t.applyMatrix4(pn),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(oh),bi.child=t,this.dispatchEvent(bi),bi.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let n=0,i=this.children.length;n<i;n++){const o=this.children[n].getObjectByProperty(t,e);if(o!==void 0)return o}}getObjectsByProperty(t,e,n=[]){this[t]===e&&n.push(this);const i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].getObjectsByProperty(t,e,n);return n}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Qi,t,Dl),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Qi,Ol,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverseVisible(t)}traverseAncestors(t){const e=this.parent;e!==null&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].updateMatrixWorld(t)}updateWorldMatrix(t,e){const n=this.parent;if(t===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),e===!0){const i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].updateWorldMatrix(!1,!0)}}toJSON(t){const e=t===void 0||typeof t=="string",n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(h=>({boxInitialized:h.boxInitialized,boxMin:h.box.min.toArray(),boxMax:h.box.max.toArray(),sphereInitialized:h.sphereInitialized,sphereRadius:h.sphere.radius,sphereCenter:h.sphere.center.toArray()})),i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(t),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(t)),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function r(h,c){return h[c.uuid]===void 0&&(h[c.uuid]=c.toJSON(t)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(t.geometries,this.geometry);const h=this.geometry.parameters;if(h!==void 0&&h.shapes!==void 0){const c=h.shapes;if(Array.isArray(c))for(let u=0,p=c.length;u<p;u++){const y=c[u];r(t.shapes,y)}else r(t.shapes,c)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(t.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const h=[];for(let c=0,u=this.material.length;c<u;c++)h.push(r(t.materials,this.material[c]));i.material=h}else i.material=r(t.materials,this.material);if(this.children.length>0){i.children=[];for(let h=0;h<this.children.length;h++)i.children.push(this.children[h].toJSON(t).object)}if(this.animations.length>0){i.animations=[];for(let h=0;h<this.animations.length;h++){const c=this.animations[h];i.animations.push(r(t.animations,c))}}if(e){const h=o(t.geometries),c=o(t.materials),u=o(t.textures),p=o(t.images),y=o(t.shapes),x=o(t.skeletons),b=o(t.animations),M=o(t.nodes);h.length>0&&(n.geometries=h),c.length>0&&(n.materials=c),u.length>0&&(n.textures=u),p.length>0&&(n.images=p),y.length>0&&(n.shapes=y),x.length>0&&(n.skeletons=x),b.length>0&&(n.animations=b),M.length>0&&(n.nodes=M)}return n.object=i,n;function o(h){const c=[];for(const u in h){const p=h[u];delete p.metadata,c.push(p)}return c}}clone(t){return new this.constructor().copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(let n=0;n<t.children.length;n++){const i=t.children[n];this.add(i.clone())}return this}}Nt.DEFAULT_UP=new z(0,1,0);Nt.DEFAULT_MATRIX_AUTO_UPDATE=!0;Nt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const We=new z,mn=new z,oo=new z,yn=new z,wi=new z,Mi=new z,ah=new z,ao=new z,ho=new z,co=new z;class Ye{constructor(t=new z,e=new z,n=new z){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,i){i.subVectors(n,e),We.subVectors(t,e),i.cross(We);const r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(t,e,n,i,r){We.subVectors(i,e),mn.subVectors(n,e),oo.subVectors(t,e);const o=We.dot(We),h=We.dot(mn),c=We.dot(oo),u=mn.dot(mn),p=mn.dot(oo),y=o*u-h*h;if(y===0)return r.set(0,0,0),null;const x=1/y,b=(u*c-h*p)*x,M=(o*p-h*c)*x;return r.set(1-b-M,M,b)}static containsPoint(t,e,n,i){return this.getBarycoord(t,e,n,i,yn)===null?!1:yn.x>=0&&yn.y>=0&&yn.x+yn.y<=1}static getInterpolation(t,e,n,i,r,o,h,c){return this.getBarycoord(t,e,n,i,yn)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(r,yn.x),c.addScaledVector(o,yn.y),c.addScaledVector(h,yn.z),c)}static isFrontFacing(t,e,n,i){return We.subVectors(n,e),mn.subVectors(t,e),We.cross(mn).dot(i)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,i){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[i]),this}setFromAttributeAndIndices(t,e,n,i){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,i),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return We.subVectors(this.c,this.b),mn.subVectors(this.a,this.b),We.cross(mn).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Ye.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return Ye.getBarycoord(t,this.a,this.b,this.c,e)}getInterpolation(t,e,n,i,r){return Ye.getInterpolation(t,this.a,this.b,this.c,e,n,i,r)}containsPoint(t){return Ye.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Ye.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,i=this.b,r=this.c;let o,h;wi.subVectors(i,n),Mi.subVectors(r,n),ao.subVectors(t,n);const c=wi.dot(ao),u=Mi.dot(ao);if(c<=0&&u<=0)return e.copy(n);ho.subVectors(t,i);const p=wi.dot(ho),y=Mi.dot(ho);if(p>=0&&y<=p)return e.copy(i);const x=c*y-p*u;if(x<=0&&c>=0&&p<=0)return o=c/(c-p),e.copy(n).addScaledVector(wi,o);co.subVectors(t,r);const b=wi.dot(co),M=Mi.dot(co);if(M>=0&&b<=M)return e.copy(r);const S=b*u-c*M;if(S<=0&&u>=0&&M<=0)return h=u/(u-M),e.copy(n).addScaledVector(Mi,h);const v=p*M-b*y;if(v<=0&&y-p>=0&&b-M>=0)return ah.subVectors(r,i),h=(y-p)/(y-p+(b-M)),e.copy(i).addScaledVector(ah,h);const k=1/(v+S+x);return o=S*k,h=x*k,e.copy(n).addScaledVector(wi,o).addScaledVector(Mi,h)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const ec={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},In={h:0,s:0,l:0},qs={h:0,s:0,l:0};function lo(m,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?m+(t-m)*6*e:e<1/2?t:e<2/3?m+(t-m)*6*(2/3-e):m}class It{constructor(t,e,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,n)}set(t,e,n){if(e===void 0&&n===void 0){const i=t;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(t,e,n);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=Ae){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,Me.toWorkingColorSpace(this,e),this}setRGB(t,e,n,i=Me.workingColorSpace){return this.r=t,this.g=e,this.b=n,Me.toWorkingColorSpace(this,i),this}setHSL(t,e,n,i=Me.workingColorSpace){if(t=Uo(t,1),e=$t(e,0,1),n=$t(n,0,1),e===0)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+e):n+e-n*e,o=2*n-r;this.r=lo(o,r,t+1/3),this.g=lo(o,r,t),this.b=lo(o,r,t-1/3)}return Me.toWorkingColorSpace(this,i),this}setStyle(t,e=Ae){function n(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(t)){let r;const o=i[1],h=i[2];switch(o){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return n(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,e);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return n(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,e);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return n(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,e);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(t)){const r=i[1],o=r.length;if(o===3)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,e);if(o===6)return this.setHex(parseInt(r,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=Ae){const n=ec[t.toLowerCase()];return n!==void 0?this.setHex(n,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Ii(t.r),this.g=Ii(t.g),this.b=Ii(t.b),this}copyLinearToSRGB(t){return this.r=Zr(t.r),this.g=Zr(t.g),this.b=Zr(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Ae){return Me.fromWorkingColorSpace(te.copy(this),t),Math.round($t(te.r*255,0,255))*65536+Math.round($t(te.g*255,0,255))*256+Math.round($t(te.b*255,0,255))}getHexString(t=Ae){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=Me.workingColorSpace){Me.fromWorkingColorSpace(te.copy(this),e);const n=te.r,i=te.g,r=te.b,o=Math.max(n,i,r),h=Math.min(n,i,r);let c,u;const p=(h+o)/2;if(h===o)c=0,u=0;else{const y=o-h;switch(u=p<=.5?y/(o+h):y/(2-o-h),o){case n:c=(i-r)/y+(i<r?6:0);break;case i:c=(r-n)/y+2;break;case r:c=(n-i)/y+4;break}c/=6}return t.h=c,t.s=u,t.l=p,t}getRGB(t,e=Me.workingColorSpace){return Me.fromWorkingColorSpace(te.copy(this),e),t.r=te.r,t.g=te.g,t.b=te.b,t}getStyle(t=Ae){Me.fromWorkingColorSpace(te.copy(this),t);const e=te.r,n=te.g,i=te.b;return t!==Ae?`color(${t} ${e.toFixed(3)} ${n.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(e*255)},${Math.round(n*255)},${Math.round(i*255)})`}offsetHSL(t,e,n){return this.getHSL(In),this.setHSL(In.h+t,In.s+e,In.l+n)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(In),t.getHSL(qs);const n=as(In.h,qs.h,e),i=as(In.s,qs.s,e),r=as(In.l,qs.l,e);return this.setHSL(n,i,r),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,n=this.g,i=this.b,r=t.elements;return this.r=r[0]*e+r[3]*n+r[6]*i,this.g=r[1]*e+r[4]*n+r[7]*i,this.b=r[2]*e+r[5]*n+r[8]*i,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const te=new It;It.NAMES=ec;let jl=0;class ei extends ms{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:jl++}),this.uuid=$e(),this.name="",this.type="Material",this.blending=Pa,this.side=mr,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Oa,this.blendDst=Ba,this.blendEquation=Da,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new It(0,0,0),this.blendAlpha=0,this.depthFunc=ja,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Ya,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=di,this.stencilZFail=di,this.stencilZPass=di,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(const e in t){const n=t[e];if(n===void 0){console.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}const i=this[e];if(i===void 0){console.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[e]=n}}toJSON(t){const e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Pa&&(n.blending=this.blending),this.side!==mr&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==Oa&&(n.blendSrc=this.blendSrc),this.blendDst!==Ba&&(n.blendDst=this.blendDst),this.blendEquation!==Da&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==ja&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Ya&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==di&&(n.stencilFail=this.stencilFail),this.stencilZFail!==di&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==di&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function i(r){const o=[];for(const h in r){const c=r[h];delete c.metadata,o.push(c)}return o}if(e){const r=i(t.textures),o=i(t.images);r.length>0&&(n.textures=r),o.length>0&&(n.images=o)}return n}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(e!==null){const i=e.length;n=new Array(i);for(let r=0;r!==i;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}onBeforeRender(){console.warn("Material: onBeforeRender() has been removed.")}}class tn extends ei{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new It(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Pn,this.combine=tl,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const Ht=new z,Ws=new ft;class Ke{constructor(t,e,n=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=n,this.usage=Ro,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=Ho,this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}get updateRange(){return Qh("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[t+i]=e.array[n+i];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let e=0,n=this.count;e<n;e++)Ws.fromBufferAttribute(this,e),Ws.applyMatrix3(t),this.setXY(e,Ws.x,Ws.y);else if(this.itemSize===3)for(let e=0,n=this.count;e<n;e++)Ht.fromBufferAttribute(this,e),Ht.applyMatrix3(t),this.setXYZ(e,Ht.x,Ht.y,Ht.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)Ht.fromBufferAttribute(this,e),Ht.applyMatrix4(t),this.setXYZ(e,Ht.x,Ht.y,Ht.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)Ht.fromBufferAttribute(this,e),Ht.applyNormalMatrix(t),this.setXYZ(e,Ht.x,Ht.y,Ht.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)Ht.fromBufferAttribute(this,e),Ht.transformDirection(t),this.setXYZ(e,Ht.x,Ht.y,Ht.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let n=this.array[t*this.itemSize+e];return this.normalized&&(n=Xe(n,this.array)),n}setComponent(t,e,n){return this.normalized&&(n=Mt(n,this.array)),this.array[t*this.itemSize+e]=n,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=Xe(e,this.array)),e}setX(t,e){return this.normalized&&(e=Mt(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=Xe(e,this.array)),e}setY(t,e){return this.normalized&&(e=Mt(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=Xe(e,this.array)),e}setZ(t,e){return this.normalized&&(e=Mt(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=Xe(e,this.array)),e}setW(t,e){return this.normalized&&(e=Mt(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=Mt(e,this.array),n=Mt(n,this.array)),this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,i){return t*=this.itemSize,this.normalized&&(e=Mt(e,this.array),n=Mt(n,this.array),i=Mt(i,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this}setXYZW(t,e,n,i,r){return t*=this.itemSize,this.normalized&&(e=Mt(e,this.array),n=Mt(n,this.array),i=Mt(i,this.array),r=Mt(r,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=r,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==Ro&&(t.usage=this.usage),t}}class Hl extends Ke{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class Ul extends Ke{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class Xt extends Ke{constructor(t,e,n){super(new Float32Array(t),e,n)}}let Vl=0;const _e=new mt,uo=new Nt,Ai=new z,we=new nn,ts=new nn,Gt=new z;class Ie extends ms{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Vl++}),this.uuid=$e(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(El(t)?Ul:Hl)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const r=new Mn().getNormalMatrix(t);n.applyNormalMatrix(r),n.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(t),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return _e.makeRotationFromQuaternion(t),this.applyMatrix4(_e),this}rotateX(t){return _e.makeRotationX(t),this.applyMatrix4(_e),this}rotateY(t){return _e.makeRotationY(t),this.applyMatrix4(_e),this}rotateZ(t){return _e.makeRotationZ(t),this.applyMatrix4(_e),this}translate(t,e,n){return _e.makeTranslation(t,e,n),this.applyMatrix4(_e),this}scale(t,e,n){return _e.makeScale(t,e,n),this.applyMatrix4(_e),this}lookAt(t){return uo.lookAt(t),uo.updateMatrix(),this.applyMatrix4(uo.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ai).negate(),this.translate(Ai.x,Ai.y,Ai.z),this}setFromPoints(t){const e=[];for(let n=0,i=t.length;n<i;n++){const r=t[n];e.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new Xt(e,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new nn);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new z(-1/0,-1/0,-1/0),new z(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(let n=0,i=e.length;n<i;n++){const r=e[n];we.setFromBufferAttribute(r),this.morphTargetsRelative?(Gt.addVectors(this.boundingBox.min,we.min),this.boundingBox.expandByPoint(Gt),Gt.addVectors(this.boundingBox.max,we.max),this.boundingBox.expandByPoint(Gt)):(this.boundingBox.expandByPoint(we.min),this.boundingBox.expandByPoint(we.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new sn);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new z,1/0);return}if(t){const n=this.boundingSphere.center;if(we.setFromBufferAttribute(t),e)for(let r=0,o=e.length;r<o;r++){const h=e[r];ts.setFromBufferAttribute(h),this.morphTargetsRelative?(Gt.addVectors(we.min,ts.min),we.expandByPoint(Gt),Gt.addVectors(we.max,ts.max),we.expandByPoint(Gt)):(we.expandByPoint(ts.min),we.expandByPoint(ts.max))}we.getCenter(n);let i=0;for(let r=0,o=t.count;r<o;r++)Gt.fromBufferAttribute(t,r),i=Math.max(i,n.distanceToSquared(Gt));if(e)for(let r=0,o=e.length;r<o;r++){const h=e[r],c=this.morphTargetsRelative;for(let u=0,p=h.count;u<p;u++)Gt.fromBufferAttribute(h,u),c&&(Ai.fromBufferAttribute(t,u),Gt.add(Ai)),i=Math.max(i,n.distanceToSquared(Gt))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(t===null||e.position===void 0||e.normal===void 0||e.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=e.position,i=e.normal,r=e.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Ke(new Float32Array(4*n.count),4));const o=this.getAttribute("tangent"),h=[],c=[];for(let X=0;X<n.count;X++)h[X]=new z,c[X]=new z;const u=new z,p=new z,y=new z,x=new ft,b=new ft,M=new ft,S=new z,v=new z;function k(X,tt,ct){u.fromBufferAttribute(n,X),p.fromBufferAttribute(n,tt),y.fromBufferAttribute(n,ct),x.fromBufferAttribute(r,X),b.fromBufferAttribute(r,tt),M.fromBufferAttribute(r,ct),p.sub(u),y.sub(u),b.sub(x),M.sub(x);const ot=1/(b.x*M.y-M.x*b.y);isFinite(ot)&&(S.copy(p).multiplyScalar(M.y).addScaledVector(y,-b.y).multiplyScalar(ot),v.copy(y).multiplyScalar(b.x).addScaledVector(p,-M.x).multiplyScalar(ot),h[X].add(S),h[tt].add(S),h[ct].add(S),c[X].add(v),c[tt].add(v),c[ct].add(v))}let B=this.groups;B.length===0&&(B=[{start:0,count:t.count}]);for(let X=0,tt=B.length;X<tt;++X){const ct=B[X],ot=ct.start,ut=ct.count;for(let dt=ot,vt=ot+ut;dt<vt;dt+=3)k(t.getX(dt+0),t.getX(dt+1),t.getX(dt+2))}const H=new z,O=new z,d=new z,Y=new z;function q(X){d.fromBufferAttribute(i,X),Y.copy(d);const tt=h[X];H.copy(tt),H.sub(d.multiplyScalar(d.dot(tt))).normalize(),O.crossVectors(Y,tt);const ot=O.dot(c[X])<0?-1:1;o.setXYZW(X,H.x,H.y,H.z,ot)}for(let X=0,tt=B.length;X<tt;++X){const ct=B[X],ot=ct.start,ut=ct.count;for(let dt=ot,vt=ot+ut;dt<vt;dt+=3)q(t.getX(dt+0)),q(t.getX(dt+1)),q(t.getX(dt+2))}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(e!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new Ke(new Float32Array(e.count*3),3),this.setAttribute("normal",n);else for(let x=0,b=n.count;x<b;x++)n.setXYZ(x,0,0,0);const i=new z,r=new z,o=new z,h=new z,c=new z,u=new z,p=new z,y=new z;if(t)for(let x=0,b=t.count;x<b;x+=3){const M=t.getX(x+0),S=t.getX(x+1),v=t.getX(x+2);i.fromBufferAttribute(e,M),r.fromBufferAttribute(e,S),o.fromBufferAttribute(e,v),p.subVectors(o,r),y.subVectors(i,r),p.cross(y),h.fromBufferAttribute(n,M),c.fromBufferAttribute(n,S),u.fromBufferAttribute(n,v),h.add(p),c.add(p),u.add(p),n.setXYZ(M,h.x,h.y,h.z),n.setXYZ(S,c.x,c.y,c.z),n.setXYZ(v,u.x,u.y,u.z)}else for(let x=0,b=e.count;x<b;x+=3)i.fromBufferAttribute(e,x+0),r.fromBufferAttribute(e,x+1),o.fromBufferAttribute(e,x+2),p.subVectors(o,r),y.subVectors(i,r),p.cross(y),n.setXYZ(x+0,p.x,p.y,p.z),n.setXYZ(x+1,p.x,p.y,p.z),n.setXYZ(x+2,p.x,p.y,p.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)Gt.fromBufferAttribute(t,e),Gt.normalize(),t.setXYZ(e,Gt.x,Gt.y,Gt.z)}toNonIndexed(){function t(h,c){const u=h.array,p=h.itemSize,y=h.normalized,x=new u.constructor(c.length*p);let b=0,M=0;for(let S=0,v=c.length;S<v;S++){h.isInterleavedBufferAttribute?b=c[S]*h.data.stride+h.offset:b=c[S]*p;for(let k=0;k<p;k++)x[M++]=u[b++]}return new Ke(x,p,y)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new Ie,n=this.index.array,i=this.attributes;for(const h in i){const c=i[h],u=t(c,n);e.setAttribute(h,u)}const r=this.morphAttributes;for(const h in r){const c=[],u=r[h];for(let p=0,y=u.length;p<y;p++){const x=u[p],b=t(x,n);c.push(b)}e.morphAttributes[h]=c}e.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let h=0,c=o.length;h<c;h++){const u=o[h];e.addGroup(u.start,u.count,u.materialIndex)}return e}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const u in c)c[u]!==void 0&&(t[u]=c[u]);return t}t.data={attributes:{}};const e=this.index;e!==null&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const c in n){const u=n[c];t.data.attributes[c]=u.toJSON(t.data)}const i={};let r=!1;for(const c in this.morphAttributes){const u=this.morphAttributes[c],p=[];for(let y=0,x=u.length;y<x;y++){const b=u[y];p.push(b.toJSON(t.data))}p.length>0&&(i[c]=p,r=!0)}r&&(t.data.morphAttributes=i,t.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));const h=this.boundingSphere;return h!==null&&(t.data.boundingSphere={center:h.center.toArray(),radius:h.radius}),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;n!==null&&this.setIndex(n.clone(e));const i=t.attributes;for(const u in i){const p=i[u];this.setAttribute(u,p.clone(e))}const r=t.morphAttributes;for(const u in r){const p=[],y=r[u];for(let x=0,b=y.length;x<b;x++)p.push(y[x].clone(e));this.morphAttributes[u]=p}this.morphTargetsRelative=t.morphTargetsRelative;const o=t.groups;for(let u=0,p=o.length;u<p;u++){const y=o[u];this.addGroup(y.start,y.count,y.materialIndex)}const h=t.boundingBox;h!==null&&(this.boundingBox=h.clone());const c=t.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const hh=new mt,Kn=new Pi,Gs=new sn,ch=new z,Ti=new z,vi=new z,Si=new z,fo=new z,Xs=new z,Ys=new ft,$s=new ft,Ks=new ft,lh=new z,uh=new z,dh=new z,Zs=new z,Js=new z;class ii extends Nt{constructor(t=new Ie,e=new tn){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const i=e[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=i.length;r<o;r++){const h=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=r}}}}getVertexPosition(t,e){const n=this.geometry,i=n.attributes.position,r=n.morphAttributes.position,o=n.morphTargetsRelative;e.fromBufferAttribute(i,t);const h=this.morphTargetInfluences;if(r&&h){Xs.set(0,0,0);for(let c=0,u=r.length;c<u;c++){const p=h[c],y=r[c];p!==0&&(fo.fromBufferAttribute(y,t),o?Xs.addScaledVector(fo,p):Xs.addScaledVector(fo.sub(e),p))}e.add(Xs)}return e}raycast(t,e){const n=this.geometry,i=this.material,r=this.matrixWorld;i!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),Gs.copy(n.boundingSphere),Gs.applyMatrix4(r),Kn.copy(t.ray).recast(t.near),!(Gs.containsPoint(Kn.origin)===!1&&(Kn.intersectSphere(Gs,ch)===null||Kn.origin.distanceToSquared(ch)>(t.far-t.near)**2))&&(hh.copy(r).invert(),Kn.copy(t.ray).applyMatrix4(hh),!(n.boundingBox!==null&&Kn.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(t,e,Kn)))}_computeIntersections(t,e,n){let i;const r=this.geometry,o=this.material,h=r.index,c=r.attributes.position,u=r.attributes.uv,p=r.attributes.uv1,y=r.attributes.normal,x=r.groups,b=r.drawRange;if(h!==null)if(Array.isArray(o))for(let M=0,S=x.length;M<S;M++){const v=x[M],k=o[v.materialIndex],B=Math.max(v.start,b.start),H=Math.min(h.count,Math.min(v.start+v.count,b.start+b.count));for(let O=B,d=H;O<d;O+=3){const Y=h.getX(O),q=h.getX(O+1),X=h.getX(O+2);i=Qs(this,k,t,n,u,p,y,Y,q,X),i&&(i.faceIndex=Math.floor(O/3),i.face.materialIndex=v.materialIndex,e.push(i))}}else{const M=Math.max(0,b.start),S=Math.min(h.count,b.start+b.count);for(let v=M,k=S;v<k;v+=3){const B=h.getX(v),H=h.getX(v+1),O=h.getX(v+2);i=Qs(this,o,t,n,u,p,y,B,H,O),i&&(i.faceIndex=Math.floor(v/3),e.push(i))}}else if(c!==void 0)if(Array.isArray(o))for(let M=0,S=x.length;M<S;M++){const v=x[M],k=o[v.materialIndex],B=Math.max(v.start,b.start),H=Math.min(c.count,Math.min(v.start+v.count,b.start+b.count));for(let O=B,d=H;O<d;O+=3){const Y=O,q=O+1,X=O+2;i=Qs(this,k,t,n,u,p,y,Y,q,X),i&&(i.faceIndex=Math.floor(O/3),i.face.materialIndex=v.materialIndex,e.push(i))}}else{const M=Math.max(0,b.start),S=Math.min(c.count,b.start+b.count);for(let v=M,k=S;v<k;v+=3){const B=v,H=v+1,O=v+2;i=Qs(this,o,t,n,u,p,y,B,H,O),i&&(i.faceIndex=Math.floor(v/3),e.push(i))}}}}function ql(m,t,e,n,i,r,o,h){let c;if(t.side===Qc?c=n.intersectTriangle(o,r,i,!0,h):c=n.intersectTriangle(i,r,o,t.side===mr,h),c===null)return null;Js.copy(h),Js.applyMatrix4(m.matrixWorld);const u=e.ray.origin.distanceTo(Js);return u<e.near||u>e.far?null:{distance:u,point:Js.clone(),object:m}}function Qs(m,t,e,n,i,r,o,h,c,u){m.getVertexPosition(h,Ti),m.getVertexPosition(c,vi),m.getVertexPosition(u,Si);const p=ql(m,t,e,n,Ti,vi,Si,Zs);if(p){i&&(Ys.fromBufferAttribute(i,h),$s.fromBufferAttribute(i,c),Ks.fromBufferAttribute(i,u),p.uv=Ye.getInterpolation(Zs,Ti,vi,Si,Ys,$s,Ks,new ft)),r&&(Ys.fromBufferAttribute(r,h),$s.fromBufferAttribute(r,c),Ks.fromBufferAttribute(r,u),p.uv1=Ye.getInterpolation(Zs,Ti,vi,Si,Ys,$s,Ks,new ft)),o&&(lh.fromBufferAttribute(o,h),uh.fromBufferAttribute(o,c),dh.fromBufferAttribute(o,u),p.normal=Ye.getInterpolation(Zs,Ti,vi,Si,lh,uh,dh,new z),p.normal.dot(n.direction)>0&&p.normal.multiplyScalar(-1));const y={a:h,b:c,c:u,normal:new z,materialIndex:0};Ye.getNormal(Ti,vi,Si,y.normal),p.face=y}return p}class Vo extends Ie{constructor(t=1,e=1,n=1,i=1,r=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:o};const h=this;i=Math.floor(i),r=Math.floor(r),o=Math.floor(o);const c=[],u=[],p=[],y=[];let x=0,b=0;M("z","y","x",-1,-1,n,e,t,o,r,0),M("z","y","x",1,-1,n,e,-t,o,r,1),M("x","z","y",1,1,t,n,e,i,o,2),M("x","z","y",1,-1,t,n,-e,i,o,3),M("x","y","z",1,-1,t,e,n,i,r,4),M("x","y","z",-1,-1,t,e,-n,i,r,5),this.setIndex(c),this.setAttribute("position",new Xt(u,3)),this.setAttribute("normal",new Xt(p,3)),this.setAttribute("uv",new Xt(y,2));function M(S,v,k,B,H,O,d,Y,q,X,tt){const ct=O/q,ot=d/X,ut=O/2,dt=d/2,vt=Y/2,Lt=q+1,Ft=X+1;let ce=0,ie=0;const bt=new z;for(let St=0;St<Ft;St++){const Pt=St*ot-dt;for(let ze=0;ze<Lt;ze++){const an=ze*ct-ut;bt[S]=an*B,bt[v]=Pt*H,bt[k]=vt,u.push(bt.x,bt.y,bt.z),bt[S]=0,bt[v]=0,bt[k]=Y>0?1:-1,p.push(bt.x,bt.y,bt.z),y.push(ze/q),y.push(1-St/X),ce+=1}}for(let St=0;St<X;St++)for(let Pt=0;Pt<q;Pt++){const ze=x+Pt+Lt*St,an=x+Pt+Lt*(St+1),On=x+(Pt+1)+Lt*(St+1),hn=x+(Pt+1)+Lt*St;c.push(ze,an,hn),c.push(an,On,hn),ie+=6}h.addGroup(b,ie,tt),b+=ie,x+=ce}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Vo(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}class nc extends Nt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new mt,this.projectionMatrix=new mt,this.projectionMatrixInverse=new mt,this.coordinateSystem=ti}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const zn=new z,fh=new ft,ph=new ft;class Tr extends nc{constructor(t=50,e=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=fs*2*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(ki*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return fs*2*Math.atan(Math.tan(ki*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,e,n){zn.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),e.set(zn.x,zn.y).multiplyScalar(-t/zn.z),zn.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(zn.x,zn.y).multiplyScalar(-t/zn.z)}getViewSize(t,e){return this.getViewBounds(t,fh,ph),e.subVectors(ph,fh)}setViewOffset(t,e,n,i,r,o){this.aspect=t/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(ki*.5*this.fov)/this.zoom,n=2*e,i=this.aspect*n,r=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const c=o.fullWidth,u=o.fullHeight;r+=o.offsetX*i/c,e-=o.offsetY*n/u,i*=o.width/c,n*=o.height/u}const h=this.filmOffset;h!==0&&(r+=t*h/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,e,e-n,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}const po=new z,Wl=new z,Gl=new Mn;class Qn{constructor(t=new z(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const i=po.subVectors(n,e).cross(Wl.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(i,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){const n=t.delta(po),i=this.normal.dot(n);if(i===0)return this.distanceToPoint(t.start)===0?e.copy(t.start):null;const r=-(t.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:e.copy(t.start).addScaledVector(n,r)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||Gl.getNormalMatrix(t),i=this.coplanarPoint(po).applyMatrix4(t),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Zn=new sn,tr=new z;class Xl{constructor(t=new Qn,e=new Qn,n=new Qn,i=new Qn,r=new Qn,o=new Qn){this.planes=[t,e,n,i,r,o]}set(t,e,n,i,r,o){const h=this.planes;return h[0].copy(t),h[1].copy(e),h[2].copy(n),h[3].copy(i),h[4].copy(r),h[5].copy(o),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t,e=ti){const n=this.planes,i=t.elements,r=i[0],o=i[1],h=i[2],c=i[3],u=i[4],p=i[5],y=i[6],x=i[7],b=i[8],M=i[9],S=i[10],v=i[11],k=i[12],B=i[13],H=i[14],O=i[15];if(n[0].setComponents(c-r,x-u,v-b,O-k).normalize(),n[1].setComponents(c+r,x+u,v+b,O+k).normalize(),n[2].setComponents(c+o,x+p,v+M,O+B).normalize(),n[3].setComponents(c-o,x-p,v-M,O-B).normalize(),n[4].setComponents(c-h,x-y,v-S,O-H).normalize(),e===ti)n[5].setComponents(c+h,x+y,v+S,O+H).normalize();else if(e===ko)n[5].setComponents(h,y,S,H).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);return this}intersectsObject(t){if(t.boundingSphere!==void 0)t.boundingSphere===null&&t.computeBoundingSphere(),Zn.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const e=t.geometry;e.boundingSphere===null&&e.computeBoundingSphere(),Zn.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(Zn)}intersectsSprite(t){return Zn.center.set(0,0,0),Zn.radius=.7071067811865476,Zn.applyMatrix4(t.matrixWorld),this.intersectsSphere(Zn)}intersectsSphere(t){const e=this.planes,n=t.center,i=-t.radius;for(let r=0;r<6;r++)if(e[r].distanceToPoint(n)<i)return!1;return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const i=e[n];if(tr.x=i.normal.x>0?t.max.x:t.min.x,tr.y=i.normal.y>0?t.max.y:t.min.y,tr.z=i.normal.z>0?t.max.z:t.min.z,i.distanceToPoint(tr)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class qo extends Ie{constructor(t=1,e=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i};const r=t/2,o=e/2,h=Math.floor(n),c=Math.floor(i),u=h+1,p=c+1,y=t/h,x=e/c,b=[],M=[],S=[],v=[];for(let k=0;k<p;k++){const B=k*x-o;for(let H=0;H<u;H++){const O=H*y-r;M.push(O,-B,0),S.push(0,0,1),v.push(H/h),v.push(1-k/c)}}for(let k=0;k<c;k++)for(let B=0;B<h;B++){const H=B+u*k,O=B+u*(k+1),d=B+1+u*(k+1),Y=B+1+u*k;b.push(H,O,Y),b.push(O,d,Y)}this.setIndex(b),this.setAttribute("position",new Xt(M,3)),this.setAttribute("normal",new Xt(S,3)),this.setAttribute("uv",new Xt(v,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new qo(t.width,t.height,t.widthSegments,t.heightSegments)}}class ic extends nc{constructor(t=-1,e=1,n=1,i=-1,r=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=i,this.near=r,this.far=o,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,e,n,i,r,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=n-t,o=n+t,h=i+e,c=i-e;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,p=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=u*this.view.offsetX,o=r+u*this.view.width,h-=p*this.view.offsetY,c=h-p*this.view.height}this.projectionMatrix.makeOrthographic(r,o,h,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}}class mo extends Nt{constructor(){super(),this.isGroup=!0,this.type="Group"}}class Yl extends Nt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Pn,this.environmentIntensity=1,this.environmentRotation=new Pn,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return this.fog!==null&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(e.object.backgroundIntensity=this.backgroundIntensity),e.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(e.object.environmentIntensity=this.environmentIntensity),e.object.environmentRotation=this.environmentRotation.toArray(),e}}class $l{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=t!==void 0?t.length/e:0,this.usage=Ro,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=$e()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}get updateRange(){return Qh("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,n){t*=this.stride,n*=e.stride;for(let i=0,r=this.stride;i<r;i++)this.array[t+i]=e.array[n+i];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=$e()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(e,this.stride);return n.setUsage(this.usage),n}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=$e()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ne=new z;class Wo{constructor(t,e,n,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,n=this.data.count;e<n;e++)ne.fromBufferAttribute(this,e),ne.applyMatrix4(t),this.setXYZ(e,ne.x,ne.y,ne.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)ne.fromBufferAttribute(this,e),ne.applyNormalMatrix(t),this.setXYZ(e,ne.x,ne.y,ne.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)ne.fromBufferAttribute(this,e),ne.transformDirection(t),this.setXYZ(e,ne.x,ne.y,ne.z);return this}getComponent(t,e){let n=this.array[t*this.data.stride+this.offset+e];return this.normalized&&(n=Xe(n,this.array)),n}setComponent(t,e,n){return this.normalized&&(n=Mt(n,this.array)),this.data.array[t*this.data.stride+this.offset+e]=n,this}setX(t,e){return this.normalized&&(e=Mt(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=Mt(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=Mt(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=Mt(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=Xe(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=Xe(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=Xe(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=Xe(e,this.array)),e}setXY(t,e,n){return t=t*this.data.stride+this.offset,this.normalized&&(e=Mt(e,this.array),n=Mt(n,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this}setXYZ(t,e,n,i){return t=t*this.data.stride+this.offset,this.normalized&&(e=Mt(e,this.array),n=Mt(n,this.array),i=Mt(i,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this}setXYZW(t,e,n,i,r){return t=t*this.data.stride+this.offset,this.normalized&&(e=Mt(e,this.array),n=Mt(n,this.array),i=Mt(i,this.array),r=Mt(r,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this.data.array[t+3]=r,this}clone(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)e.push(this.data.array[i+r])}return new Ke(new this.array.constructor(e),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new Wo(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)e.push(this.data.array[i+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const mh=new z,yh=new Ce,gh=new Ce,Kl=new z,xh=new mt,er=new z,yo=new sn,bh=new mt,go=new Pi;class Zl extends ii{constructor(t,e){super(t,e),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=Ha,this.bindMatrix=new mt,this.bindMatrixInverse=new mt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const t=this.geometry;this.boundingBox===null&&(this.boundingBox=new nn),this.boundingBox.makeEmpty();const e=t.getAttribute("position");for(let n=0;n<e.count;n++)this.getVertexPosition(n,er),this.boundingBox.expandByPoint(er)}computeBoundingSphere(){const t=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new sn),this.boundingSphere.makeEmpty();const e=t.getAttribute("position");for(let n=0;n<e.count;n++)this.getVertexPosition(n,er),this.boundingSphere.expandByPoint(er)}copy(t,e){return super.copy(t,e),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,e){const n=this.material,i=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),yo.copy(this.boundingSphere),yo.applyMatrix4(i),t.ray.intersectsSphere(yo)!==!1&&(bh.copy(i).invert(),go.copy(t.ray).applyMatrix4(bh),!(this.boundingBox!==null&&go.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(t,e,go)))}getVertexPosition(t,e){return super.getVertexPosition(t,e),this.applyBoneTransform(t,e),e}bind(t,e){this.skeleton=t,e===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new Ce,e=this.geometry.attributes.skinWeight;for(let n=0,i=e.count;n<i;n++){t.fromBufferAttribute(e,n);const r=1/t.manhattanLength();r!==1/0?t.multiplyScalar(r):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode===Ha?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===el?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(t,e){const n=this.skeleton,i=this.geometry;yh.fromBufferAttribute(i.attributes.skinIndex,t),gh.fromBufferAttribute(i.attributes.skinWeight,t),mh.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let r=0;r<4;r++){const o=gh.getComponent(r);if(o!==0){const h=yh.getComponent(r);xh.multiplyMatrices(n.bones[h].matrixWorld,n.boneInverses[h]),e.addScaledVector(Kl.copy(mh).applyMatrix4(xh),o)}}return e.applyMatrix4(this.bindMatrixInverse)}}class sc extends Nt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class rc extends Re{constructor(t=null,e=1,n=1,i,r,o,h,c,u=yr,p=yr,y,x){super(null,o,h,c,u,p,i,r,y,x),this.isDataTexture=!0,this.image={data:t,width:e,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const wh=new mt,Jl=new mt;class Go{constructor(t=[],e=[]){this.uuid=$e(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(t.length*16),e.length===0)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new mt)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const n=new mt;this.bones[t]&&n.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const n=this.bones[t];n&&n.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const n=this.bones[t];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const t=this.bones,e=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let r=0,o=t.length;r<o;r++){const h=t[r]?t[r].matrixWorld:Jl;wh.multiplyMatrices(h,e[r]),wh.toArray(n,r*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new Go(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(this.bones.length*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const n=new rc(e,t,t,$h,Ho);return n.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=n,this}getBoneByName(t){for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];if(i.name===t)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let n=0,i=t.bones.length;n<i;n++){const r=t.bones[n];let o=e[r];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),o=new sc),this.bones.push(o),this.boneInverses.push(new mt().fromArray(t.boneInverses[n]))}return this.init(),this}toJSON(){const t={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,n=this.boneInverses;for(let i=0,r=e.length;i<r;i++){const o=e[i];t.bones.push(o.uuid);const h=n[i];t.boneInverses.push(h.toArray())}return t}}class zo extends Ke{constructor(t,e,n,i=1){super(t,e,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const _i=new mt,Mh=new mt,nr=[],Ah=new nn,Ql=new mt,es=new ii,ns=new sn;class tu extends ii{constructor(t,e,n){super(t,e),this.isInstancedMesh=!0,this.instanceMatrix=new zo(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<n;i++)this.setMatrixAt(i,Ql)}computeBoundingBox(){const t=this.geometry,e=this.count;this.boundingBox===null&&(this.boundingBox=new nn),t.boundingBox===null&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<e;n++)this.getMatrixAt(n,_i),Ah.copy(t.boundingBox).applyMatrix4(_i),this.boundingBox.union(Ah)}computeBoundingSphere(){const t=this.geometry,e=this.count;this.boundingSphere===null&&(this.boundingSphere=new sn),t.boundingSphere===null&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<e;n++)this.getMatrixAt(n,_i),ns.copy(t.boundingSphere).applyMatrix4(_i),this.boundingSphere.union(ns)}copy(t,e){return super.copy(t,e),this.instanceMatrix.copy(t.instanceMatrix),t.morphTexture!==null&&(this.morphTexture=t.morphTexture.clone()),t.instanceColor!==null&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,e){e.fromArray(this.instanceColor.array,t*3)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,t*16)}getMorphAt(t,e){const n=e.morphTargetInfluences,i=this.morphTexture.source.data.data,r=n.length+1,o=t*r+1;for(let h=0;h<n.length;h++)n[h]=i[o+h]}raycast(t,e){const n=this.matrixWorld,i=this.count;if(es.geometry=this.geometry,es.material=this.material,es.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),ns.copy(this.boundingSphere),ns.applyMatrix4(n),t.ray.intersectsSphere(ns)!==!1))for(let r=0;r<i;r++){this.getMatrixAt(r,_i),Mh.multiplyMatrices(n,_i),es.matrixWorld=Mh,es.raycast(t,nr);for(let o=0,h=nr.length;o<h;o++){const c=nr[o];c.instanceId=r,c.object=this,e.push(c)}nr.length=0}}setColorAt(t,e){this.instanceColor===null&&(this.instanceColor=new zo(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),e.toArray(this.instanceColor.array,t*3)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,t*16)}setMorphAt(t,e){const n=e.morphTargetInfluences,i=n.length+1;this.morphTexture===null&&(this.morphTexture=new rc(new Float32Array(i*this.count),i,this.count,ol,Ho));const r=this.morphTexture.source.data.data;let o=0;for(let u=0;u<n.length;u++)o+=n[u];const h=this.geometry.morphTargetsRelative?1:1-o,c=i*t;r[c]=h,r.set(n,c+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}class ps extends ei{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new It(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const gr=new z,xr=new z,Th=new mt,is=new Pi,ir=new sn,xo=new z,vh=new z;class Xo extends Nt{constructor(t=new Ie,e=new ps){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.index===null){const e=t.attributes.position,n=[0];for(let i=1,r=e.count;i<r;i++)gr.fromBufferAttribute(e,i-1),xr.fromBufferAttribute(e,i),n[i]=n[i-1],n[i]+=gr.distanceTo(xr);t.setAttribute("lineDistance",new Xt(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const n=this.geometry,i=this.matrixWorld,r=t.params.Line.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),ir.copy(n.boundingSphere),ir.applyMatrix4(i),ir.radius+=r,t.ray.intersectsSphere(ir)===!1)return;Th.copy(i).invert(),is.copy(t.ray).applyMatrix4(Th);const h=r/((this.scale.x+this.scale.y+this.scale.z)/3),c=h*h,u=this.isLineSegments?2:1,p=n.index,x=n.attributes.position;if(p!==null){const b=Math.max(0,o.start),M=Math.min(p.count,o.start+o.count);for(let S=b,v=M-1;S<v;S+=u){const k=p.getX(S),B=p.getX(S+1),H=sr(this,t,is,c,k,B);H&&e.push(H)}if(this.isLineLoop){const S=p.getX(M-1),v=p.getX(b),k=sr(this,t,is,c,S,v);k&&e.push(k)}}else{const b=Math.max(0,o.start),M=Math.min(x.count,o.start+o.count);for(let S=b,v=M-1;S<v;S+=u){const k=sr(this,t,is,c,S,S+1);k&&e.push(k)}if(this.isLineLoop){const S=sr(this,t,is,c,M-1,b);S&&e.push(S)}}}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const i=e[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=i.length;r<o;r++){const h=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=r}}}}}function sr(m,t,e,n,i,r){const o=m.geometry.attributes.position;if(gr.fromBufferAttribute(o,i),xr.fromBufferAttribute(o,r),e.distanceSqToSegment(gr,xr,xo,vh)>n)return;xo.applyMatrix4(m.matrixWorld);const c=t.ray.origin.distanceTo(xo);if(!(c<t.near||c>t.far))return{distance:c,point:vh.clone().applyMatrix4(m.matrixWorld),index:i,face:null,faceIndex:null,object:m}}const Sh=new z,_h=new z;class br extends Xo{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.index===null){const e=t.attributes.position,n=[];for(let i=0,r=e.count;i<r;i+=2)Sh.fromBufferAttribute(e,i),_h.fromBufferAttribute(e,i+1),n[i]=i===0?0:n[i-1],n[i+1]=n[i]+Sh.distanceTo(_h);t.setAttribute("lineDistance",new Xt(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class eu extends Xo{constructor(t,e){super(t,e),this.isLineLoop=!0,this.type="LineLoop"}}class oc extends ei{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new It(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const Eh=new mt,No=new Pi,rr=new sn,or=new z;class nu extends Nt{constructor(t=new Ie,e=new oc){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}raycast(t,e){const n=this.geometry,i=this.matrixWorld,r=t.params.Points.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),rr.copy(n.boundingSphere),rr.applyMatrix4(i),rr.radius+=r,t.ray.intersectsSphere(rr)===!1)return;Eh.copy(i).invert(),No.copy(t.ray).applyMatrix4(Eh);const h=r/((this.scale.x+this.scale.y+this.scale.z)/3),c=h*h,u=n.index,y=n.attributes.position;if(u!==null){const x=Math.max(0,o.start),b=Math.min(u.count,o.start+o.count);for(let M=x,S=b;M<S;M++){const v=u.getX(M);or.fromBufferAttribute(y,v),Ch(or,v,c,i,t,e,this)}}else{const x=Math.max(0,o.start),b=Math.min(y.count,o.start+o.count);for(let M=x,S=b;M<S;M++)or.fromBufferAttribute(y,M),Ch(or,M,c,i,t,e,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const i=e[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=i.length;r<o;r++){const h=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=r}}}}}function Ch(m,t,e,n,i,r,o){const h=No.distanceSqToPoint(m);if(h<e){const c=new z;No.closestPointToPoint(m,c),c.applyMatrix4(n);const u=i.ray.origin.distanceTo(c);if(u<i.near||u>i.far)return;r.push({distance:u,distanceToRay:Math.sqrt(h),point:c,index:t,face:null,object:o})}}class iu extends Re{constructor(t,e,n,i,r,o,h,c,u){super(t,e,n,i,r,o,h,c,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Yo extends Ie{constructor(t=1,e=1,n=1,i=32,r=1,o=!1,h=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:i,heightSegments:r,openEnded:o,thetaStart:h,thetaLength:c};const u=this;i=Math.floor(i),r=Math.floor(r);const p=[],y=[],x=[],b=[];let M=0;const S=[],v=n/2;let k=0;B(),o===!1&&(t>0&&H(!0),e>0&&H(!1)),this.setIndex(p),this.setAttribute("position",new Xt(y,3)),this.setAttribute("normal",new Xt(x,3)),this.setAttribute("uv",new Xt(b,2));function B(){const O=new z,d=new z;let Y=0;const q=(e-t)/n;for(let X=0;X<=r;X++){const tt=[],ct=X/r,ot=ct*(e-t)+t;for(let ut=0;ut<=i;ut++){const dt=ut/i,vt=dt*c+h,Lt=Math.sin(vt),Ft=Math.cos(vt);d.x=ot*Lt,d.y=-ct*n+v,d.z=ot*Ft,y.push(d.x,d.y,d.z),O.set(Lt,q,Ft).normalize(),x.push(O.x,O.y,O.z),b.push(dt,1-ct),tt.push(M++)}S.push(tt)}for(let X=0;X<i;X++)for(let tt=0;tt<r;tt++){const ct=S[tt][X],ot=S[tt+1][X],ut=S[tt+1][X+1],dt=S[tt][X+1];p.push(ct,ot,dt),p.push(ot,ut,dt),Y+=6}u.addGroup(k,Y,0),k+=Y}function H(O){const d=M,Y=new ft,q=new z;let X=0;const tt=O===!0?t:e,ct=O===!0?1:-1;for(let ut=1;ut<=i;ut++)y.push(0,v*ct,0),x.push(0,ct,0),b.push(.5,.5),M++;const ot=M;for(let ut=0;ut<=i;ut++){const vt=ut/i*c+h,Lt=Math.cos(vt),Ft=Math.sin(vt);q.x=tt*Ft,q.y=v*ct,q.z=tt*Lt,y.push(q.x,q.y,q.z),x.push(0,ct,0),Y.x=Lt*.5+.5,Y.y=Ft*.5*ct+.5,b.push(Y.x,Y.y),M++}for(let ut=0;ut<i;ut++){const dt=d+ut,vt=ot+ut;O===!0?p.push(vt,vt+1,dt):p.push(vt+1,vt,dt),X+=3}u.addGroup(k,X,O===!0?1:2),k+=X}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Yo(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class $o extends Yo{constructor(t=1,e=1,n=32,i=1,r=!1,o=0,h=Math.PI*2){super(0,t,e,n,i,r,o,h),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:o,thetaLength:h}}static fromJSON(t){return new $o(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}const ar=new z,hr=new z,bo=new z,cr=new Ye;class Rh extends Ie{constructor(t=null,e=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:t,thresholdAngle:e},t!==null){const i=Math.pow(10,4),r=Math.cos(ki*e),o=t.getIndex(),h=t.getAttribute("position"),c=o?o.count:h.count,u=[0,0,0],p=["a","b","c"],y=new Array(3),x={},b=[];for(let M=0;M<c;M+=3){o?(u[0]=o.getX(M),u[1]=o.getX(M+1),u[2]=o.getX(M+2)):(u[0]=M,u[1]=M+1,u[2]=M+2);const{a:S,b:v,c:k}=cr;if(S.fromBufferAttribute(h,u[0]),v.fromBufferAttribute(h,u[1]),k.fromBufferAttribute(h,u[2]),cr.getNormal(bo),y[0]=`${Math.round(S.x*i)},${Math.round(S.y*i)},${Math.round(S.z*i)}`,y[1]=`${Math.round(v.x*i)},${Math.round(v.y*i)},${Math.round(v.z*i)}`,y[2]=`${Math.round(k.x*i)},${Math.round(k.y*i)},${Math.round(k.z*i)}`,!(y[0]===y[1]||y[1]===y[2]||y[2]===y[0]))for(let B=0;B<3;B++){const H=(B+1)%3,O=y[B],d=y[H],Y=cr[p[B]],q=cr[p[H]],X=`${O}_${d}`,tt=`${d}_${O}`;tt in x&&x[tt]?(bo.dot(x[tt].normal)<=r&&(b.push(Y.x,Y.y,Y.z),b.push(q.x,q.y,q.z)),x[tt]=null):X in x||(x[X]={index0:u[B],index1:u[H],normal:bo.clone()})}}for(const M in x)if(x[M]){const{index0:S,index1:v}=x[M];ar.fromBufferAttribute(h,S),hr.fromBufferAttribute(h,v),b.push(ar.x,ar.y,ar.z),b.push(hr.x,hr.y,hr.z)}this.setAttribute("position",new Xt(b,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}class Ko extends Ie{constructor(t=1,e=32,n=16,i=0,r=Math.PI*2,o=0,h=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:o,thetaLength:h},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));const c=Math.min(o+h,Math.PI);let u=0;const p=[],y=new z,x=new z,b=[],M=[],S=[],v=[];for(let k=0;k<=n;k++){const B=[],H=k/n;let O=0;k===0&&o===0?O=.5/e:k===n&&c===Math.PI&&(O=-.5/e);for(let d=0;d<=e;d++){const Y=d/e;y.x=-t*Math.cos(i+Y*r)*Math.sin(o+H*h),y.y=t*Math.cos(o+H*h),y.z=t*Math.sin(i+Y*r)*Math.sin(o+H*h),M.push(y.x,y.y,y.z),x.copy(y).normalize(),S.push(x.x,x.y,x.z),v.push(Y+O,1-H),B.push(u++)}p.push(B)}for(let k=0;k<n;k++)for(let B=0;B<e;B++){const H=p[k][B+1],O=p[k][B],d=p[k+1][B],Y=p[k+1][B+1];(k!==0||o>0)&&b.push(H,O,Y),(k!==n-1||c<Math.PI)&&b.push(O,d,Y)}this.setIndex(b),this.setAttribute("position",new Xt(M,3)),this.setAttribute("normal",new Xt(S,3)),this.setAttribute("uv",new Xt(v,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Ko(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class Zo extends ei{constructor(t){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new It(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new It(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=cl,this.normalScale=new ft(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Pn,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class rn extends Zo{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ft(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return $t(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new It(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new It(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new It(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get dispersion(){return this._dispersion}set dispersion(t){this._dispersion>0!=t>0&&this.version++,this._dispersion=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.dispersion=t.dispersion,this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}function lr(m,t,e){return!m||!e&&m.constructor===t?m:typeof t.BYTES_PER_ELEMENT=="number"?new t(m):Array.prototype.slice.call(m)}function su(m){return ArrayBuffer.isView(m)&&!(m instanceof DataView)}function ru(m){function t(i,r){return m[i]-m[r]}const e=m.length,n=new Array(e);for(let i=0;i!==e;++i)n[i]=i;return n.sort(t),n}function kh(m,t,e){const n=m.length,i=new m.constructor(n);for(let r=0,o=0;o!==n;++r){const h=e[r]*t;for(let c=0;c!==t;++c)i[o++]=m[h+c]}return i}function ac(m,t,e,n){let i=1,r=m[0];for(;r!==void 0&&r[n]===void 0;)r=m[i++];if(r===void 0)return;let o=r[n];if(o!==void 0)if(Array.isArray(o))do o=r[n],o!==void 0&&(t.push(r.time),e.push.apply(e,o)),r=m[i++];while(r!==void 0);else if(o.toArray!==void 0)do o=r[n],o!==void 0&&(t.push(r.time),o.toArray(e,e.length)),r=m[i++];while(r!==void 0);else do o=r[n],o!==void 0&&(t.push(r.time),e.push(o)),r=m[i++];while(r!==void 0)}class ys{constructor(t,e,n,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,i=e[n],r=e[n-1];n:{t:{let o;e:{i:if(!(t<i)){for(let h=n+2;;){if(i===void 0){if(t<r)break i;return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===h)break;if(r=i,i=e[++n],t<i)break t}o=e.length;break e}if(!(t>=r)){const h=e[1];t<h&&(n=2,r=h);for(let c=n-2;;){if(r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===c)break;if(i=r,r=e[--n-1],t>=r)break t}o=n,n=0;break e}break n}for(;n<o;){const h=n+o>>>1;t<e[h]?o=h:n=h+1}if(i=e[n],r=e[n-1],r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,t,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=t*i;for(let o=0;o!==i;++o)e[o]=n[r+o];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class ou extends ys{constructor(t,e,n,i){super(t,e,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Ua,endingEnd:Ua}}intervalChanged_(t,e,n){const i=this.parameterPositions;let r=t-2,o=t+1,h=i[r],c=i[o];if(h===void 0)switch(this.getSettings_().endingStart){case Va:r=t,h=2*e-n;break;case qa:r=i.length-2,h=e+i[r]-i[r+1];break;default:r=t,h=n}if(c===void 0)switch(this.getSettings_().endingEnd){case Va:o=t,c=2*n-e;break;case qa:o=1,c=n+i[1]-i[0];break;default:o=t-1,c=e}const u=(n-e)*.5,p=this.valueSize;this._weightPrev=u/(e-h),this._weightNext=u/(c-n),this._offsetPrev=r*p,this._offsetNext=o*p}interpolate_(t,e,n,i){const r=this.resultBuffer,o=this.sampleValues,h=this.valueSize,c=t*h,u=c-h,p=this._offsetPrev,y=this._offsetNext,x=this._weightPrev,b=this._weightNext,M=(n-e)/(i-e),S=M*M,v=S*M,k=-x*v+2*x*S-x*M,B=(1+x)*v+(-1.5-2*x)*S+(-.5+x)*M+1,H=(-1-b)*v+(1.5+b)*S+.5*M,O=b*v-b*S;for(let d=0;d!==h;++d)r[d]=k*o[p+d]+B*o[u+d]+H*o[c+d]+O*o[y+d];return r}}class au extends ys{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t,e,n,i){const r=this.resultBuffer,o=this.sampleValues,h=this.valueSize,c=t*h,u=c-h,p=(n-e)/(i-e),y=1-p;for(let x=0;x!==h;++x)r[x]=o[u+x]*y+o[c+x]*p;return r}}class hu extends ys{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t){return this.copySampleValue_(t-1)}}class on{constructor(t,e,n,i){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(e===void 0||e.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=lr(e,this.TimeBufferType),this.values=lr(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:lr(t.times,Array),values:lr(t.values,Array)};const i=t.getInterpolation();i!==t.DefaultInterpolation&&(n.interpolation=i)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new hu(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new au(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new ou(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case us:e=this.InterpolantFactoryMethodDiscrete;break;case ds:e=this.InterpolantFactoryMethodLinear;break;case $r:e=this.InterpolantFactoryMethodSmooth;break}if(e===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return us;case this.InterpolantFactoryMethodLinear:return ds;case this.InterpolantFactoryMethodSmooth:return $r}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){const e=this.times;for(let n=0,i=e.length;n!==i;++n)e[n]+=t}return this}scale(t){if(t!==1){const e=this.times;for(let n=0,i=e.length;n!==i;++n)e[n]*=t}return this}trim(t,e){const n=this.times,i=n.length;let r=0,o=i-1;for(;r!==i&&n[r]<t;)++r;for(;o!==-1&&n[o]>e;)--o;if(++o,r!==0||o!==i){r>=o&&(o=Math.max(o,1),r=o-1);const h=this.getValueSize();this.times=n.slice(r,o),this.values=this.values.slice(r*h,o*h)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,i=this.values,r=n.length;r===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let o=null;for(let h=0;h!==r;h++){const c=n[h];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,h,c),t=!1;break}if(o!==null&&o>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,h,c,o),t=!1;break}o=c}if(i!==void 0&&su(i))for(let h=0,c=i.length;h!==c;++h){const u=i[h];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,h,u),t=!1;break}}return t}optimize(){const t=this.times.slice(),e=this.values.slice(),n=this.getValueSize(),i=this.getInterpolation()===$r,r=t.length-1;let o=1;for(let h=1;h<r;++h){let c=!1;const u=t[h],p=t[h+1];if(u!==p&&(h!==1||u!==t[0]))if(i)c=!0;else{const y=h*n,x=y-n,b=y+n;for(let M=0;M!==n;++M){const S=e[y+M];if(S!==e[x+M]||S!==e[b+M]){c=!0;break}}}if(c){if(h!==o){t[o]=t[h];const y=h*n,x=o*n;for(let b=0;b!==n;++b)e[x+b]=e[y+b]}++o}}if(r>0){t[o]=t[r];for(let h=r*n,c=o*n,u=0;u!==n;++u)e[c+u]=e[h+u];++o}return o!==t.length?(this.times=t.slice(0,o),this.values=e.slice(0,o*n)):(this.times=t,this.values=e),this}clone(){const t=this.times.slice(),e=this.values.slice(),n=this.constructor,i=new n(this.name,t,e);return i.createInterpolant=this.createInterpolant,i}}on.prototype.TimeBufferType=Float32Array;on.prototype.ValueBufferType=Float32Array;on.prototype.DefaultInterpolation=ds;class Di extends on{constructor(t,e,n){super(t,e,n)}}Di.prototype.ValueTypeName="bool";Di.prototype.ValueBufferType=Array;Di.prototype.DefaultInterpolation=us;Di.prototype.InterpolantFactoryMethodLinear=void 0;Di.prototype.InterpolantFactoryMethodSmooth=void 0;class hc extends on{}hc.prototype.ValueTypeName="color";class Ni extends on{}Ni.prototype.ValueTypeName="number";class cu extends ys{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t,e,n,i){const r=this.resultBuffer,o=this.sampleValues,h=this.valueSize,c=(n-e)/(i-e);let u=t*h;for(let p=u+h;u!==p;u+=4)en.slerpFlat(r,0,o,u-h,o,u,c);return r}}class Li extends on{InterpolantFactoryMethodLinear(t){return new cu(this.times,this.values,this.getValueSize(),t)}}Li.prototype.ValueTypeName="quaternion";Li.prototype.InterpolantFactoryMethodSmooth=void 0;class Oi extends on{constructor(t,e,n){super(t,e,n)}}Oi.prototype.ValueTypeName="string";Oi.prototype.ValueBufferType=Array;Oi.prototype.DefaultInterpolation=us;Oi.prototype.InterpolantFactoryMethodLinear=void 0;Oi.prototype.InterpolantFactoryMethodSmooth=void 0;class Fi extends on{}Fi.prototype.ValueTypeName="vector";class lu{constructor(t="",e=-1,n=[],i=al){this.name=t,this.tracks=n,this.duration=e,this.blendMode=i,this.uuid=$e(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],n=t.tracks,i=1/(t.fps||1);for(let o=0,h=n.length;o!==h;++o)e.push(du(n[o]).scale(i));const r=new this(t.name,t.duration,e,t.blendMode);return r.uuid=t.uuid,r}static toJSON(t){const e=[],n=t.tracks,i={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let r=0,o=n.length;r!==o;++r)e.push(on.toJSON(n[r]));return i}static CreateFromMorphTargetSequence(t,e,n,i){const r=e.length,o=[];for(let h=0;h<r;h++){let c=[],u=[];c.push((h+r-1)%r,h,(h+1)%r),u.push(0,1,0);const p=ru(c);c=kh(c,1,p),u=kh(u,1,p),!i&&c[0]===0&&(c.push(r),u.push(u[0])),o.push(new Ni(".morphTargetInfluences["+e[h].name+"]",c,u).scale(1/n))}return new this(t,-1,o)}static findByName(t,e){let n=t;if(!Array.isArray(t)){const i=t;n=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<n.length;i++)if(n[i].name===e)return n[i];return null}static CreateClipsFromMorphTargetSequences(t,e,n){const i={},r=/^([\w-]*?)([\d]+)$/;for(let h=0,c=t.length;h<c;h++){const u=t[h],p=u.name.match(r);if(p&&p.length>1){const y=p[1];let x=i[y];x||(i[y]=x=[]),x.push(u)}}const o=[];for(const h in i)o.push(this.CreateFromMorphTargetSequence(h,i[h],e,n));return o}static parseAnimation(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(y,x,b,M,S){if(b.length!==0){const v=[],k=[];ac(b,v,k,M),v.length!==0&&S.push(new y(x,v,k))}},i=[],r=t.name||"default",o=t.fps||30,h=t.blendMode;let c=t.length||-1;const u=t.hierarchy||[];for(let y=0;y<u.length;y++){const x=u[y].keys;if(!(!x||x.length===0))if(x[0].morphTargets){const b={};let M;for(M=0;M<x.length;M++)if(x[M].morphTargets)for(let S=0;S<x[M].morphTargets.length;S++)b[x[M].morphTargets[S]]=-1;for(const S in b){const v=[],k=[];for(let B=0;B!==x[M].morphTargets.length;++B){const H=x[M];v.push(H.time),k.push(H.morphTarget===S?1:0)}i.push(new Ni(".morphTargetInfluence["+S+"]",v,k))}c=b.length*o}else{const b=".bones["+e[y].name+"]";n(Fi,b+".position",x,"pos",i),n(Li,b+".quaternion",x,"rot",i),n(Fi,b+".scale",x,"scl",i)}}return i.length===0?null:new this(r,c,i,h)}resetDuration(){const t=this.tracks;let e=0;for(let n=0,i=t.length;n!==i;++n){const r=this.tracks[n];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function uu(m){switch(m.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ni;case"vector":case"vector2":case"vector3":case"vector4":return Fi;case"color":return hc;case"quaternion":return Li;case"bool":case"boolean":return Di;case"string":return Oi}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+m)}function du(m){if(m.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=uu(m.type);if(m.times===void 0){const e=[],n=[];ac(m.keys,e,n,"value"),m.times=e,m.values=n}return t.parse!==void 0?t.parse(m):new t(m.name,m.times,m.values,m.interpolation)}const Fn={enabled:!1,files:{},add:function(m,t){this.enabled!==!1&&(this.files[m]=t)},get:function(m){if(this.enabled!==!1)return this.files[m]},remove:function(m){delete this.files[m]},clear:function(){this.files={}}};class fu{constructor(t,e,n){const i=this;let r=!1,o=0,h=0,c;const u=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(p){h++,r===!1&&i.onStart!==void 0&&i.onStart(p,o,h),r=!0},this.itemEnd=function(p){o++,i.onProgress!==void 0&&i.onProgress(p,o,h),o===h&&(r=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(p){i.onError!==void 0&&i.onError(p)},this.resolveURL=function(p){return c?c(p):p},this.setURLModifier=function(p){return c=p,this},this.addHandler=function(p,y){return u.push(p,y),this},this.removeHandler=function(p){const y=u.indexOf(p);return y!==-1&&u.splice(y,2),this},this.getHandler=function(p){for(let y=0,x=u.length;y<x;y+=2){const b=u[y],M=u[y+1];if(b.global&&(b.lastIndex=0),b.test(p))return M}return null}}}const pu=new fu;class Bi{constructor(t){this.manager=t!==void 0?t:pu,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise(function(i,r){n.load(t,i,e,r)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}Bi.DEFAULT_MATERIAL_NAME="__DEFAULT";const gn={};class mu extends Error{constructor(t,e){super(t),this.response=e}}class cc extends Bi{constructor(t){super(t)}load(t,e,n,i){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const r=Fn.get(t);if(r!==void 0)return this.manager.itemStart(t),setTimeout(()=>{e&&e(r),this.manager.itemEnd(t)},0),r;if(gn[t]!==void 0){gn[t].push({onLoad:e,onProgress:n,onError:i});return}gn[t]=[],gn[t].push({onLoad:e,onProgress:n,onError:i});const o=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),h=this.mimeType,c=this.responseType;fetch(o).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const p=gn[t],y=u.body.getReader(),x=u.headers.get("X-File-Size")||u.headers.get("Content-Length"),b=x?parseInt(x):0,M=b!==0;let S=0;const v=new ReadableStream({start(k){B();function B(){y.read().then(({done:H,value:O})=>{if(H)k.close();else{S+=O.byteLength;const d=new ProgressEvent("progress",{lengthComputable:M,loaded:S,total:b});for(let Y=0,q=p.length;Y<q;Y++){const X=p[Y];X.onProgress&&X.onProgress(d)}k.enqueue(O),B()}},H=>{k.error(H)})}}});return new Response(v)}else throw new mu(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(c){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(p=>new DOMParser().parseFromString(p,h));case"json":return u.json();default:if(h===void 0)return u.text();{const y=/charset="?([^;"\s]*)"?/i.exec(h),x=y&&y[1]?y[1].toLowerCase():void 0,b=new TextDecoder(x);return u.arrayBuffer().then(M=>b.decode(M))}}}).then(u=>{Fn.add(t,u);const p=gn[t];delete gn[t];for(let y=0,x=p.length;y<x;y++){const b=p[y];b.onLoad&&b.onLoad(u)}}).catch(u=>{const p=gn[t];if(p===void 0)throw this.manager.itemError(t),u;delete gn[t];for(let y=0,x=p.length;y<x;y++){const b=p[y];b.onError&&b.onError(u)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class yu extends Bi{constructor(t){super(t)}load(t,e,n,i){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,o=Fn.get(t);if(o!==void 0)return r.manager.itemStart(t),setTimeout(function(){e&&e(o),r.manager.itemEnd(t)},0),o;const h=Io("img");function c(){p(),Fn.add(t,this),e&&e(this),r.manager.itemEnd(t)}function u(y){p(),i&&i(y),r.manager.itemError(t),r.manager.itemEnd(t)}function p(){h.removeEventListener("load",c,!1),h.removeEventListener("error",u,!1)}return h.addEventListener("load",c,!1),h.addEventListener("error",u,!1),t.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(h.crossOrigin=this.crossOrigin),r.manager.itemStart(t),h.src=t,h}}class gu extends Bi{constructor(t){super(t)}load(t,e,n,i){const r=new Re,o=new yu(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,function(h){r.image=h,r.needsUpdate=!0,e!==void 0&&e(r)},n,i),r}}class vr extends Nt{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new It(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&&(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(e.object.distance=this.distance),this.angle!==void 0&&(e.object.angle=this.angle),this.decay!==void 0&&(e.object.decay=this.decay),this.penumbra!==void 0&&(e.object.penumbra=this.penumbra),this.shadow!==void 0&&(e.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(e.object.target=this.target.uuid),e}}const wo=new mt,Ih=new z,zh=new z;class Jo{constructor(t){this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ft(512,512),this.map=null,this.mapPass=null,this.matrix=new mt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Xl,this._frameExtents=new ft(1,1),this._viewportCount=1,this._viewports=[new Ce(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;Ih.setFromMatrixPosition(t.matrixWorld),e.position.copy(Ih),zh.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(zh),e.updateMatrixWorld(),wo.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(wo),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(wo)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.intensity=t.intensity,this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const t={};return this.intensity!==1&&(t.intensity=this.intensity),this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class xu extends Jo{constructor(){super(new Tr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const e=this.camera,n=fs*2*t.angle*this.focus,i=this.mapSize.width/this.mapSize.height,r=t.distance||e.far;(n!==e.fov||i!==e.aspect||r!==e.far)&&(e.fov=n,e.aspect=i,e.far=r,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class bu extends vr{constructor(t,e,n=0,i=Math.PI/3,r=0,o=2){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Nt.DEFAULT_UP),this.updateMatrix(),this.target=new Nt,this.distance=n,this.angle=i,this.penumbra=r,this.decay=o,this.map=null,this.shadow=new xu}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const Nh=new mt,ss=new z,Mo=new z;class wu extends Jo{constructor(){super(new Tr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ft(4,2),this._viewportCount=6,this._viewports=[new Ce(2,1,1,1),new Ce(0,1,1,1),new Ce(3,1,1,1),new Ce(1,1,1,1),new Ce(3,0,1,1),new Ce(1,0,1,1)],this._cubeDirections=[new z(1,0,0),new z(-1,0,0),new z(0,0,1),new z(0,0,-1),new z(0,1,0),new z(0,-1,0)],this._cubeUps=[new z(0,1,0),new z(0,1,0),new z(0,1,0),new z(0,1,0),new z(0,0,1),new z(0,0,-1)]}updateMatrices(t,e=0){const n=this.camera,i=this.matrix,r=t.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),ss.setFromMatrixPosition(t.matrixWorld),n.position.copy(ss),Mo.copy(n.position),Mo.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(Mo),n.updateMatrixWorld(),i.makeTranslation(-ss.x,-ss.y,-ss.z),Nh.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Nh)}}class Sr extends vr{constructor(t,e,n=0,i=2){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new wu}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class Mu extends Jo{constructor(){super(new ic(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Au extends vr{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Nt.DEFAULT_UP),this.updateMatrix(),this.target=new Nt,this.shadow=new Mu}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class Tu extends vr{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}class hs{static decodeText(t){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(t);let e="";for(let n=0,i=t.length;n<i;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch{return e}}static extractUrlBase(t){const e=t.lastIndexOf("/");return e===-1?"./":t.slice(0,e+1)}static resolveURL(t,e){return typeof t!="string"||t===""?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}class vu extends Bi{constructor(t){super(t),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,n,i){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,o=Fn.get(t);if(o!==void 0){if(r.manager.itemStart(t),o.then){o.then(u=>{e&&e(u),r.manager.itemEnd(t)}).catch(u=>{i&&i(u)});return}return setTimeout(function(){e&&e(o),r.manager.itemEnd(t)},0),o}const h={};h.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",h.headers=this.requestHeader;const c=fetch(t,h).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(r.options,{colorSpaceConversion:"none"}))}).then(function(u){return Fn.add(t,u),e&&e(u),r.manager.itemEnd(t),u}).catch(function(u){i&&i(u),Fn.remove(t),r.manager.itemError(t),r.manager.itemEnd(t)});Fn.add(t,c),r.manager.itemStart(t)}}const Qo="\\[\\]\\.:\\/",Su=new RegExp("["+Qo+"]","g"),ta="[^"+Qo+"]",_u="[^"+Qo.replace("\\.","")+"]",Eu=/((?:WC+[\/:])*)/.source.replace("WC",ta),Cu=/(WCOD+)?/.source.replace("WCOD",_u),Ru=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",ta),ku=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",ta),Iu=new RegExp("^"+Eu+Cu+Ru+ku+"$"),zu=["material","materials","bones","map"];class Nu{constructor(t,e,n){const i=n||At.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,i)}getValue(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];i!==void 0&&i.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}class At{constructor(t,e,n){this.path=e,this.parsedPath=n||At.parseTrackName(e),this.node=At.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,n){return t&&t.isAnimationObjectGroup?new At.Composite(t,e,n):new At(t,e,n)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(Su,"")}static parseTrackName(t){const e=Iu.exec(t);if(e===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const r=n.nodeName.substring(i+1);zu.indexOf(r)!==-1&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=r)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}static findNode(t,e){if(e===void 0||e===""||e==="."||e===-1||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(n!==void 0)return n}if(t.children){const n=function(r){for(let o=0;o<r.length;o++){const h=r[o];if(h.name===e||h.uuid===e)return h;const c=n(h.children);if(c)return c}return null},i=n(t.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)t[e++]=n[i]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,n=e.objectName,i=e.propertyName;let r=e.propertyIndex;if(t||(t=At.findNode(this.rootNode,e.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let u=e.objectIndex;switch(n){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let p=0;p<t.length;p++)if(t[p].name===u){u=p;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[n]}if(u!==void 0){if(t[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[u]}}const o=t[i];if(o===void 0){const u=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",t);return}let h=this.Versioning.None;this.targetObject=t,t.needsUpdate!==void 0?h=this.Versioning.NeedsUpdate:t.matrixWorldNeedsUpdate!==void 0&&(h=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(r!==void 0){if(i==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[r]!==void 0&&(r=t.morphTargetDictionary[r])}c=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=r}else o.fromArray!==void 0&&o.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(c=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][h]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}At.Composite=Nu;At.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};At.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};At.prototype.GetterByBindingType=[At.prototype._getValue_direct,At.prototype._getValue_array,At.prototype._getValue_arrayElement,At.prototype._getValue_toArray];At.prototype.SetterByBindingTypeAndVersioning=[[At.prototype._setValue_direct,At.prototype._setValue_direct_setNeedsUpdate,At.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[At.prototype._setValue_array,At.prototype._setValue_array_setNeedsUpdate,At.prototype._setValue_array_setMatrixWorldNeedsUpdate],[At.prototype._setValue_arrayElement,At.prototype._setValue_arrayElement_setNeedsUpdate,At.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[At.prototype._setValue_fromArray,At.prototype._setValue_fromArray_setNeedsUpdate,At.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];const Lh=new mt;class Lu{constructor(t,e,n=0,i=1/0){this.ray=new Pi(t,e),this.near=n,this.far=i,this.camera=null,this.layers=new tc,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}setFromXRController(t){return Lh.identity().extractRotation(t.matrixWorld),this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(Lh),this}intersectObject(t,e=!0,n=[]){return Lo(t,this,n,e),n.sort(Fh),n}intersectObjects(t,e=!0,n=[]){for(let i=0,r=t.length;i<r;i++)Lo(t[i],this,n,e);return n.sort(Fh),n}}function Fh(m,t){return m.distance-t.distance}function Lo(m,t,e,n){let i=!0;if(m.layers.test(t.layers)&&m.raycast(t,e)===!1&&(i=!1),i===!0&&n===!0){const r=m.children;for(let o=0,h=r.length;o<h;o++)Lo(r[o],t,e,!0)}}class Ph{constructor(t=1,e=0,n=0){return this.radius=t,this.phi=e,this.theta=n,this}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos($t(e/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Fu extends br{constructor(t=10,e=10,n=4473924,i=8947848){n=new It(n),i=new It(i);const r=e/2,o=t/e,h=t/2,c=[],u=[];for(let x=0,b=0,M=-h;x<=e;x++,M+=o){c.push(-h,0,M,h,0,M),c.push(M,0,-h,M,0,h);const S=x===r?n:i;S.toArray(u,b),b+=3,S.toArray(u,b),b+=3,S.toArray(u,b),b+=3,S.toArray(u,b),b+=3}const p=new Ie;p.setAttribute("position",new Xt(c,3)),p.setAttribute("color",new Xt(u,3));const y=new ps({vertexColors:!0,toneMapped:!1});super(p,y),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Xh}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Xh);const Dh={type:"change"},Ao={type:"start"},Oh={type:"end"},ur=new Pi,Bh=new Qn,Pu=Math.cos(70*ae.DEG2RAD);class Du extends ms{constructor(t,e){super(),this.object=t,this.domElement=e,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new z,this.cursor=new z,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:li.ROTATE,MIDDLE:li.DOLLY,RIGHT:li.PAN},this.touches={ONE:ui.ROTATE,TWO:ui.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return h.phi},this.getAzimuthalAngle=function(){return h.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(R){R.addEventListener("keydown",Le),this._domElementKeyEvents=R},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",Le),this._domElementKeyEvents=null},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(Dh),n.update(),r=i.NONE},this.update=function(){const R=new z,K=new en().setFromUnitVectors(t.up,new z(0,1,0)),lt=K.clone().invert(),gt=new z,zt=new en,Ze=new z,Zt=2*Math.PI;return function(Ir=null){const Ss=n.object.position;R.copy(Ss).sub(n.target),R.applyQuaternion(K),h.setFromVector3(R),n.autoRotate&&r===i.NONE&&ut(ct(Ir)),n.enableDamping?(h.theta+=c.theta*n.dampingFactor,h.phi+=c.phi*n.dampingFactor):(h.theta+=c.theta,h.phi+=c.phi);let Fe=n.minAzimuthAngle,ve=n.maxAzimuthAngle;isFinite(Fe)&&isFinite(ve)&&(Fe<-Math.PI?Fe+=Zt:Fe>Math.PI&&(Fe-=Zt),ve<-Math.PI?ve+=Zt:ve>Math.PI&&(ve-=Zt),Fe<=ve?h.theta=Math.max(Fe,Math.min(ve,h.theta)):h.theta=h.theta>(Fe+ve)/2?Math.max(Fe,h.theta):Math.min(ve,h.theta)),h.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,h.phi)),h.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(p,n.dampingFactor):n.target.add(p),n.target.sub(n.cursor),n.target.clampLength(n.minTargetRadius,n.maxTargetRadius),n.target.add(n.cursor);let Vn=!1;if(n.zoomToCursor&&Y||n.object.isOrthographicCamera)h.radius=St(h.radius);else{const Pe=h.radius;h.radius=St(h.radius*u),Vn=Pe!=h.radius}if(R.setFromSpherical(h),R.applyQuaternion(lt),Ss.copy(n.target).add(R),n.object.lookAt(n.target),n.enableDamping===!0?(c.theta*=1-n.dampingFactor,c.phi*=1-n.dampingFactor,p.multiplyScalar(1-n.dampingFactor)):(c.set(0,0,0),p.set(0,0,0)),n.zoomToCursor&&Y){let Pe=null;if(n.object.isPerspectiveCamera){const _n=R.length();Pe=St(_n*u);const De=_n-Pe;n.object.position.addScaledVector(O,De),n.object.updateMatrixWorld(),Vn=!!De}else if(n.object.isOrthographicCamera){const _n=new z(d.x,d.y,0);_n.unproject(n.object);const De=n.object.zoom;n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/u)),n.object.updateProjectionMatrix(),Vn=De!==n.object.zoom;const Vi=new z(d.x,d.y,0);Vi.unproject(n.object),n.object.position.sub(Vi).add(_n),n.object.updateMatrixWorld(),Pe=R.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;Pe!==null&&(this.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(Pe).add(n.object.position):(ur.origin.copy(n.object.position),ur.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(ur.direction))<Pu?t.lookAt(n.target):(Bh.setFromNormalAndCoplanarPoint(n.object.up,n.target),ur.intersectPlane(Bh,n.target))))}else if(n.object.isOrthographicCamera){const Pe=n.object.zoom;n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/u)),Pe!==n.object.zoom&&(n.object.updateProjectionMatrix(),Vn=!0)}return u=1,Y=!1,Vn||gt.distanceToSquared(n.object.position)>o||8*(1-zt.dot(n.object.quaternion))>o||Ze.distanceToSquared(n.target)>o?(n.dispatchEvent(Dh),gt.copy(n.object.position),zt.copy(n.object.quaternion),Ze.copy(n.target),!0):!1}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",Hi),n.domElement.removeEventListener("pointerdown",Tn),n.domElement.removeEventListener("pointercancel",de),n.domElement.removeEventListener("wheel",jn),n.domElement.removeEventListener("pointermove",ue),n.domElement.removeEventListener("pointerup",de),n.domElement.getRootNode().removeEventListener("keydown",ji,{capture:!0}),n._domElementKeyEvents!==null&&(n._domElementKeyEvents.removeEventListener("keydown",Le),n._domElementKeyEvents=null)};const n=this,i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let r=i.NONE;const o=1e-6,h=new Ph,c=new Ph;let u=1;const p=new z,y=new ft,x=new ft,b=new ft,M=new ft,S=new ft,v=new ft,k=new ft,B=new ft,H=new ft,O=new z,d=new ft;let Y=!1;const q=[],X={};let tt=!1;function ct(R){return R!==null?2*Math.PI/60*n.autoRotateSpeed*R:2*Math.PI/60/60*n.autoRotateSpeed}function ot(R){const K=Math.abs(R*.01);return Math.pow(.95,n.zoomSpeed*K)}function ut(R){c.theta-=R}function dt(R){c.phi-=R}const vt=function(){const R=new z;return function(lt,gt){R.setFromMatrixColumn(gt,0),R.multiplyScalar(-lt),p.add(R)}}(),Lt=function(){const R=new z;return function(lt,gt){n.screenSpacePanning===!0?R.setFromMatrixColumn(gt,1):(R.setFromMatrixColumn(gt,0),R.crossVectors(n.object.up,R)),R.multiplyScalar(lt),p.add(R)}}(),Ft=function(){const R=new z;return function(lt,gt){const zt=n.domElement;if(n.object.isPerspectiveCamera){const Ze=n.object.position;R.copy(Ze).sub(n.target);let Zt=R.length();Zt*=Math.tan(n.object.fov/2*Math.PI/180),vt(2*lt*Zt/zt.clientHeight,n.object.matrix),Lt(2*gt*Zt/zt.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(vt(lt*(n.object.right-n.object.left)/n.object.zoom/zt.clientWidth,n.object.matrix),Lt(gt*(n.object.top-n.object.bottom)/n.object.zoom/zt.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function ce(R){n.object.isPerspectiveCamera||n.object.isOrthographicCamera?u/=R:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function ie(R){n.object.isPerspectiveCamera||n.object.isOrthographicCamera?u*=R:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function bt(R,K){if(!n.zoomToCursor)return;Y=!0;const lt=n.domElement.getBoundingClientRect(),gt=R-lt.left,zt=K-lt.top,Ze=lt.width,Zt=lt.height;d.x=gt/Ze*2-1,d.y=-(zt/Zt)*2+1,O.set(d.x,d.y,1).unproject(n.object).sub(n.object.position).normalize()}function St(R){return Math.max(n.minDistance,Math.min(n.maxDistance,R))}function Pt(R){y.set(R.clientX,R.clientY)}function ze(R){bt(R.clientX,R.clientX),k.set(R.clientX,R.clientY)}function an(R){M.set(R.clientX,R.clientY)}function On(R){x.set(R.clientX,R.clientY),b.subVectors(x,y).multiplyScalar(n.rotateSpeed);const K=n.domElement;ut(2*Math.PI*b.x/K.clientHeight),dt(2*Math.PI*b.y/K.clientHeight),y.copy(x),n.update()}function hn(R){B.set(R.clientX,R.clientY),H.subVectors(B,k),H.y>0?ce(ot(H.y)):H.y<0&&ie(ot(H.y)),k.copy(B),n.update()}function Ne(R){S.set(R.clientX,R.clientY),v.subVectors(S,M).multiplyScalar(n.panSpeed),Ft(v.x,v.y),M.copy(S),n.update()}function Er(R){bt(R.clientX,R.clientY),R.deltaY<0?ie(ot(R.deltaY)):R.deltaY>0&&ce(ot(R.deltaY)),n.update()}function Cr(R){let K=!1;switch(R.code){case n.keys.UP:R.ctrlKey||R.metaKey||R.shiftKey?dt(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):Ft(0,n.keyPanSpeed),K=!0;break;case n.keys.BOTTOM:R.ctrlKey||R.metaKey||R.shiftKey?dt(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):Ft(0,-n.keyPanSpeed),K=!0;break;case n.keys.LEFT:R.ctrlKey||R.metaKey||R.shiftKey?ut(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):Ft(n.keyPanSpeed,0),K=!0;break;case n.keys.RIGHT:R.ctrlKey||R.metaKey||R.shiftKey?ut(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):Ft(-n.keyPanSpeed,0),K=!0;break}K&&(R.preventDefault(),n.update())}function xs(R){if(q.length===1)y.set(R.pageX,R.pageY);else{const K=Sn(R),lt=.5*(R.pageX+K.x),gt=.5*(R.pageY+K.y);y.set(lt,gt)}}function le(R){if(q.length===1)M.set(R.pageX,R.pageY);else{const K=Sn(R),lt=.5*(R.pageX+K.x),gt=.5*(R.pageY+K.y);M.set(lt,gt)}}function An(R){const K=Sn(R),lt=R.pageX-K.x,gt=R.pageY-K.y,zt=Math.sqrt(lt*lt+gt*gt);k.set(0,zt)}function Bn(R){n.enableZoom&&An(R),n.enablePan&&le(R)}function et(R){n.enableZoom&&An(R),n.enableRotate&&xs(R)}function Yt(R){if(q.length==1)x.set(R.pageX,R.pageY);else{const lt=Sn(R),gt=.5*(R.pageX+lt.x),zt=.5*(R.pageY+lt.y);x.set(gt,zt)}b.subVectors(x,y).multiplyScalar(n.rotateSpeed);const K=n.domElement;ut(2*Math.PI*b.x/K.clientHeight),dt(2*Math.PI*b.y/K.clientHeight),y.copy(x)}function bs(R){if(q.length===1)S.set(R.pageX,R.pageY);else{const K=Sn(R),lt=.5*(R.pageX+K.x),gt=.5*(R.pageY+K.y);S.set(lt,gt)}v.subVectors(S,M).multiplyScalar(n.panSpeed),Ft(v.x,v.y),M.copy(S)}function ws(R){const K=Sn(R),lt=R.pageX-K.x,gt=R.pageY-K.y,zt=Math.sqrt(lt*lt+gt*gt);B.set(0,zt),H.set(0,Math.pow(B.y/k.y,n.zoomSpeed)),ce(H.y),k.copy(B);const Ze=(R.pageX+K.x)*.5,Zt=(R.pageY+K.y)*.5;bt(Ze,Zt)}function Ms(R){n.enableZoom&&ws(R),n.enablePan&&bs(R)}function As(R){n.enableZoom&&ws(R),n.enableRotate&&Yt(R)}function Tn(R){n.enabled!==!1&&(q.length===0&&(n.domElement.setPointerCapture(R.pointerId),n.domElement.addEventListener("pointermove",ue),n.domElement.addEventListener("pointerup",de)),!Kt(R)&&(vs(R),R.pointerType==="touch"?Hn(R):vn(R)))}function ue(R){n.enabled!==!1&&(R.pointerType==="touch"?Un(R):Rr(R))}function de(R){switch(se(R),q.length){case 0:n.domElement.releasePointerCapture(R.pointerId),n.domElement.removeEventListener("pointermove",ue),n.domElement.removeEventListener("pointerup",de),n.dispatchEvent(Oh),r=i.NONE;break;case 1:const K=q[0],lt=X[K];Hn({pointerId:K,pageX:lt.x,pageY:lt.y});break}}function vn(R){let K;switch(R.button){case 0:K=n.mouseButtons.LEFT;break;case 1:K=n.mouseButtons.MIDDLE;break;case 2:K=n.mouseButtons.RIGHT;break;default:K=-1}switch(K){case li.DOLLY:if(n.enableZoom===!1)return;ze(R),r=i.DOLLY;break;case li.ROTATE:if(R.ctrlKey||R.metaKey||R.shiftKey){if(n.enablePan===!1)return;an(R),r=i.PAN}else{if(n.enableRotate===!1)return;Pt(R),r=i.ROTATE}break;case li.PAN:if(R.ctrlKey||R.metaKey||R.shiftKey){if(n.enableRotate===!1)return;Pt(R),r=i.ROTATE}else{if(n.enablePan===!1)return;an(R),r=i.PAN}break;default:r=i.NONE}r!==i.NONE&&n.dispatchEvent(Ao)}function Rr(R){switch(r){case i.ROTATE:if(n.enableRotate===!1)return;On(R);break;case i.DOLLY:if(n.enableZoom===!1)return;hn(R);break;case i.PAN:if(n.enablePan===!1)return;Ne(R);break}}function jn(R){n.enabled===!1||n.enableZoom===!1||r!==i.NONE||(R.preventDefault(),n.dispatchEvent(Ao),Er(Ts(R)),n.dispatchEvent(Oh))}function Ts(R){const K=R.deltaMode,lt={clientX:R.clientX,clientY:R.clientY,deltaY:R.deltaY};switch(K){case 1:lt.deltaY*=16;break;case 2:lt.deltaY*=100;break}return R.ctrlKey&&!tt&&(lt.deltaY*=10),lt}function ji(R){R.key==="Control"&&(tt=!0,n.domElement.getRootNode().addEventListener("keyup",cn,{passive:!0,capture:!0}))}function cn(R){R.key==="Control"&&(tt=!1,n.domElement.getRootNode().removeEventListener("keyup",cn,{passive:!0,capture:!0}))}function Le(R){n.enabled===!1||n.enablePan===!1||Cr(R)}function Hn(R){switch(si(R),q.length){case 1:switch(n.touches.ONE){case ui.ROTATE:if(n.enableRotate===!1)return;xs(R),r=i.TOUCH_ROTATE;break;case ui.PAN:if(n.enablePan===!1)return;le(R),r=i.TOUCH_PAN;break;default:r=i.NONE}break;case 2:switch(n.touches.TWO){case ui.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;Bn(R),r=i.TOUCH_DOLLY_PAN;break;case ui.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;et(R),r=i.TOUCH_DOLLY_ROTATE;break;default:r=i.NONE}break;default:r=i.NONE}r!==i.NONE&&n.dispatchEvent(Ao)}function Un(R){switch(si(R),r){case i.TOUCH_ROTATE:if(n.enableRotate===!1)return;Yt(R),n.update();break;case i.TOUCH_PAN:if(n.enablePan===!1)return;bs(R),n.update();break;case i.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;Ms(R),n.update();break;case i.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;As(R),n.update();break;default:r=i.NONE}}function Hi(R){n.enabled!==!1&&R.preventDefault()}function vs(R){q.push(R.pointerId)}function se(R){delete X[R.pointerId];for(let K=0;K<q.length;K++)if(q[K]==R.pointerId){q.splice(K,1);return}}function Kt(R){for(let K=0;K<q.length;K++)if(q[K]==R.pointerId)return!0;return!1}function si(R){let K=X[R.pointerId];K===void 0&&(K=new ft,X[R.pointerId]=K),K.set(R.pageX,R.pageY)}function Sn(R){const K=R.pointerId===q[0]?q[1]:q[0];return X[K]}n.domElement.addEventListener("contextmenu",Hi),n.domElement.addEventListener("pointerdown",Tn),n.domElement.addEventListener("pointercancel",de),n.domElement.addEventListener("wheel",jn,{passive:!1}),n.domElement.getRootNode().addEventListener("keydown",ji,{passive:!0,capture:!0}),this.update()}}function jh(m,t){if(t===hl)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),m;if(t===Eo||t===Kh){let e=m.getIndex();if(e===null){const o=[],h=m.getAttribute("position");if(h!==void 0){for(let c=0;c<h.count;c++)o.push(c);m.setIndex(o),e=m.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),m}const n=e.count-2,i=[];if(t===Eo)for(let o=1;o<=n;o++)i.push(e.getX(0)),i.push(e.getX(o)),i.push(e.getX(o+1));else for(let o=0;o<n;o++)o%2===0?(i.push(e.getX(o)),i.push(e.getX(o+1)),i.push(e.getX(o+2))):(i.push(e.getX(o+2)),i.push(e.getX(o+1)),i.push(e.getX(o)));i.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const r=m.clone();return r.setIndex(i),r.clearGroups(),r}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),m}class Ou extends Bi{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new Vu(e)}),this.register(function(e){return new qu(e)}),this.register(function(e){return new Qu(e)}),this.register(function(e){return new td(e)}),this.register(function(e){return new ed(e)}),this.register(function(e){return new Gu(e)}),this.register(function(e){return new Xu(e)}),this.register(function(e){return new Yu(e)}),this.register(function(e){return new $u(e)}),this.register(function(e){return new Uu(e)}),this.register(function(e){return new Ku(e)}),this.register(function(e){return new Wu(e)}),this.register(function(e){return new Ju(e)}),this.register(function(e){return new Zu(e)}),this.register(function(e){return new ju(e)}),this.register(function(e){return new nd(e)}),this.register(function(e){return new id(e)})}load(t,e,n,i){const r=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const u=hs.extractUrlBase(t);o=hs.resolveURL(u,this.path)}else o=hs.extractUrlBase(t);this.manager.itemStart(t);const h=function(u){i?i(u):console.error(u),r.manager.itemError(t),r.manager.itemEnd(t)},c=new cc(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(t,function(u){try{r.parse(u,o,function(p){e(p),r.manager.itemEnd(t)},h)}catch(p){h(p)}},n,h)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return this.pluginCallbacks.indexOf(t)===-1&&this.pluginCallbacks.push(t),this}unregister(t){return this.pluginCallbacks.indexOf(t)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,e,n,i){let r;const o={},h={},c=new TextDecoder;if(typeof t=="string")r=JSON.parse(t);else if(t instanceof ArrayBuffer)if(c.decode(new Uint8Array(t,0,4))===lc){try{o[pt.KHR_BINARY_GLTF]=new sd(t)}catch(y){i&&i(y);return}r=JSON.parse(o[pt.KHR_BINARY_GLTF].content)}else r=JSON.parse(c.decode(t));else r=t;if(r.asset===void 0||r.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const u=new gd(r,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(let p=0;p<this.pluginCallbacks.length;p++){const y=this.pluginCallbacks[p](u);y.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),h[y.name]=y,o[y.name]=!0}if(r.extensionsUsed)for(let p=0;p<r.extensionsUsed.length;++p){const y=r.extensionsUsed[p],x=r.extensionsRequired||[];switch(y){case pt.KHR_MATERIALS_UNLIT:o[y]=new Hu;break;case pt.KHR_DRACO_MESH_COMPRESSION:o[y]=new rd(r,this.dracoLoader);break;case pt.KHR_TEXTURE_TRANSFORM:o[y]=new od;break;case pt.KHR_MESH_QUANTIZATION:o[y]=new ad;break;default:x.indexOf(y)>=0&&h[y]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+y+'".')}}u.setExtensions(o),u.setPlugins(h),u.parse(n,i)}parseAsync(t,e){const n=this;return new Promise(function(i,r){n.parse(t,e,i,r)})}}function Bu(){let m={};return{get:function(t){return m[t]},add:function(t,e){m[t]=e},remove:function(t){delete m[t]},removeAll:function(){m={}}}}const pt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class ju{constructor(t){this.parser=t,this.name=pt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,e=this.parser.json.nodes||[];for(let n=0,i=e.length;n<i;n++){const r=e[n];r.extensions&&r.extensions[this.name]&&r.extensions[this.name].light!==void 0&&t._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(t){const e=this.parser,n="light:"+t;let i=e.cache.get(n);if(i)return i;const r=e.json,c=((r.extensions&&r.extensions[this.name]||{}).lights||[])[t];let u;const p=new It(16777215);c.color!==void 0&&p.setRGB(c.color[0],c.color[1],c.color[2],ke);const y=c.range!==void 0?c.range:0;switch(c.type){case"directional":u=new Au(p),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new Sr(p),u.distance=y;break;case"spot":u=new bu(p),u.distance=y,c.spot=c.spot||{},c.spot.innerConeAngle=c.spot.innerConeAngle!==void 0?c.spot.innerConeAngle:0,c.spot.outerConeAngle=c.spot.outerConeAngle!==void 0?c.spot.outerConeAngle:Math.PI/4,u.angle=c.spot.outerConeAngle,u.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return u.position.set(0,0,0),u.decay=2,bn(u,c),c.intensity!==void 0&&(u.intensity=c.intensity),u.name=e.createUniqueName(c.name||"light_"+t),i=Promise.resolve(u),e.cache.add(n,i),i}getDependency(t,e){if(t==="light")return this._loadLight(e)}createNodeAttachment(t){const e=this,n=this.parser,r=n.json.nodes[t],h=(r.extensions&&r.extensions[this.name]||{}).light;return h===void 0?null:this._loadLight(h).then(function(c){return n._getNodeRef(e.cache,h,c)})}}class Hu{constructor(){this.name=pt.KHR_MATERIALS_UNLIT}getMaterialType(){return tn}extendParams(t,e,n){const i=[];t.color=new It(1,1,1),t.opacity=1;const r=e.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const o=r.baseColorFactor;t.color.setRGB(o[0],o[1],o[2],ke),t.opacity=o[3]}r.baseColorTexture!==void 0&&i.push(n.assignTexture(t,"map",r.baseColorTexture,Ae))}return Promise.all(i)}}class Uu{constructor(t){this.parser=t,this.name=pt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,e){const i=this.parser.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=i.extensions[this.name].emissiveStrength;return r!==void 0&&(e.emissiveIntensity=r),Promise.resolve()}}class Vu{constructor(t){this.parser=t,this.name=pt.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:rn}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];if(o.clearcoatFactor!==void 0&&(e.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&r.push(n.assignTexture(e,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(e.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&r.push(n.assignTexture(e,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(r.push(n.assignTexture(e,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const h=o.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new ft(h,h)}return Promise.all(r)}}class qu{constructor(t){this.parser=t,this.name=pt.KHR_MATERIALS_DISPERSION}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:rn}extendMaterialParams(t,e){const i=this.parser.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=i.extensions[this.name];return e.dispersion=r.dispersion!==void 0?r.dispersion:0,Promise.resolve()}}class Wu{constructor(t){this.parser=t,this.name=pt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:rn}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];return o.iridescenceFactor!==void 0&&(e.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&r.push(n.assignTexture(e,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(e.iridescenceIOR=o.iridescenceIor),e.iridescenceThicknessRange===void 0&&(e.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(e.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(e.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&r.push(n.assignTexture(e,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(r)}}class Gu{constructor(t){this.parser=t,this.name=pt.KHR_MATERIALS_SHEEN}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:rn}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[];e.sheenColor=new It(0,0,0),e.sheenRoughness=0,e.sheen=1;const o=i.extensions[this.name];if(o.sheenColorFactor!==void 0){const h=o.sheenColorFactor;e.sheenColor.setRGB(h[0],h[1],h[2],ke)}return o.sheenRoughnessFactor!==void 0&&(e.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&r.push(n.assignTexture(e,"sheenColorMap",o.sheenColorTexture,Ae)),o.sheenRoughnessTexture!==void 0&&r.push(n.assignTexture(e,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(r)}}class Xu{constructor(t){this.parser=t,this.name=pt.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:rn}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];return o.transmissionFactor!==void 0&&(e.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&r.push(n.assignTexture(e,"transmissionMap",o.transmissionTexture)),Promise.all(r)}}class Yu{constructor(t){this.parser=t,this.name=pt.KHR_MATERIALS_VOLUME}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:rn}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];e.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&r.push(n.assignTexture(e,"thicknessMap",o.thicknessTexture)),e.attenuationDistance=o.attenuationDistance||1/0;const h=o.attenuationColor||[1,1,1];return e.attenuationColor=new It().setRGB(h[0],h[1],h[2],ke),Promise.all(r)}}class $u{constructor(t){this.parser=t,this.name=pt.KHR_MATERIALS_IOR}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:rn}extendMaterialParams(t,e){const i=this.parser.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=i.extensions[this.name];return e.ior=r.ior!==void 0?r.ior:1.5,Promise.resolve()}}class Ku{constructor(t){this.parser=t,this.name=pt.KHR_MATERIALS_SPECULAR}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:rn}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];e.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&r.push(n.assignTexture(e,"specularIntensityMap",o.specularTexture));const h=o.specularColorFactor||[1,1,1];return e.specularColor=new It().setRGB(h[0],h[1],h[2],ke),o.specularColorTexture!==void 0&&r.push(n.assignTexture(e,"specularColorMap",o.specularColorTexture,Ae)),Promise.all(r)}}class Zu{constructor(t){this.parser=t,this.name=pt.EXT_MATERIALS_BUMP}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:rn}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];return e.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&r.push(n.assignTexture(e,"bumpMap",o.bumpTexture)),Promise.all(r)}}class Ju{constructor(t){this.parser=t,this.name=pt.KHR_MATERIALS_ANISOTROPY}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:rn}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];return o.anisotropyStrength!==void 0&&(e.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(e.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&r.push(n.assignTexture(e,"anisotropyMap",o.anisotropyTexture)),Promise.all(r)}}class Qu{constructor(t){this.parser=t,this.name=pt.KHR_TEXTURE_BASISU}loadTexture(t){const e=this.parser,n=e.json,i=n.textures[t];if(!i.extensions||!i.extensions[this.name])return null;const r=i.extensions[this.name],o=e.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return e.loadTextureImage(t,r.source,o)}}class td{constructor(t){this.parser=t,this.name=pt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const e=this.name,n=this.parser,i=n.json,r=i.textures[t];if(!r.extensions||!r.extensions[e])return null;const o=r.extensions[e],h=i.images[o.source];let c=n.textureLoader;if(h.uri){const u=n.options.manager.getHandler(h.uri);u!==null&&(c=u)}return this.detectSupport().then(function(u){if(u)return n.loadTextureImage(t,o.source,c);if(i.extensionsRequired&&i.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const e=new Image;e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.onload=e.onerror=function(){t(e.height===1)}})),this.isSupported}}class ed{constructor(t){this.parser=t,this.name=pt.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(t){const e=this.name,n=this.parser,i=n.json,r=i.textures[t];if(!r.extensions||!r.extensions[e])return null;const o=r.extensions[e],h=i.images[o.source];let c=n.textureLoader;if(h.uri){const u=n.options.manager.getHandler(h.uri);u!==null&&(c=u)}return this.detectSupport().then(function(u){if(u)return n.loadTextureImage(t,o.source,c);if(i.extensionsRequired&&i.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const e=new Image;e.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",e.onload=e.onerror=function(){t(e.height===1)}})),this.isSupported}}class nd{constructor(t){this.name=pt.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const e=this.parser.json,n=e.bufferViews[t];if(n.extensions&&n.extensions[this.name]){const i=n.extensions[this.name],r=this.parser.getDependency("buffer",i.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then(function(h){const c=i.byteOffset||0,u=i.byteLength||0,p=i.count,y=i.byteStride,x=new Uint8Array(h,c,u);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(p,y,x,i.mode,i.filter).then(function(b){return b.buffer}):o.ready.then(function(){const b=new ArrayBuffer(p*y);return o.decodeGltfBuffer(new Uint8Array(b),p,y,x,i.mode,i.filter),b})})}else return null}}class id{constructor(t){this.name=pt.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){const e=this.parser.json,n=e.nodes[t];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const i=e.meshes[n.mesh];for(const u of i.primitives)if(u.mode!==Ee.TRIANGLES&&u.mode!==Ee.TRIANGLE_STRIP&&u.mode!==Ee.TRIANGLE_FAN&&u.mode!==void 0)return null;const o=n.extensions[this.name].attributes,h=[],c={};for(const u in o)h.push(this.parser.getDependency("accessor",o[u]).then(p=>(c[u]=p,c[u])));return h.length<1?null:(h.push(this.parser.createNodeMesh(t)),Promise.all(h).then(u=>{const p=u.pop(),y=p.isGroup?p.children:[p],x=u[0].count,b=[];for(const M of y){const S=new mt,v=new z,k=new en,B=new z(1,1,1),H=new tu(M.geometry,M.material,x);for(let O=0;O<x;O++)c.TRANSLATION&&v.fromBufferAttribute(c.TRANSLATION,O),c.ROTATION&&k.fromBufferAttribute(c.ROTATION,O),c.SCALE&&B.fromBufferAttribute(c.SCALE,O),H.setMatrixAt(O,S.compose(v,k,B));for(const O in c)if(O==="_COLOR_0"){const d=c[O];H.instanceColor=new zo(d.array,d.itemSize,d.normalized)}else O!=="TRANSLATION"&&O!=="ROTATION"&&O!=="SCALE"&&M.geometry.setAttribute(O,c[O]);Nt.prototype.copy.call(H,M),this.parser.assignFinalMaterial(H),b.push(H)}return p.isGroup?(p.clear(),p.add(...b),p):b[0]}))}}const lc="glTF",rs=12,Hh={JSON:1313821514,BIN:5130562};class sd{constructor(t){this.name=pt.KHR_BINARY_GLTF,this.content=null,this.body=null;const e=new DataView(t,0,rs),n=new TextDecoder;if(this.header={magic:n.decode(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==lc)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-rs,r=new DataView(t,rs);let o=0;for(;o<i;){const h=r.getUint32(o,!0);o+=4;const c=r.getUint32(o,!0);if(o+=4,c===Hh.JSON){const u=new Uint8Array(t,rs+o,h);this.content=n.decode(u)}else if(c===Hh.BIN){const u=rs+o;this.body=t.slice(u,u+h)}o+=h}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class rd{constructor(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=pt.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e,this.dracoLoader.preload()}decodePrimitive(t,e){const n=this.json,i=this.dracoLoader,r=t.extensions[this.name].bufferView,o=t.extensions[this.name].attributes,h={},c={},u={};for(const p in o){const y=Fo[p]||p.toLowerCase();h[y]=o[p]}for(const p in t.attributes){const y=Fo[p]||p.toLowerCase();if(o[p]!==void 0){const x=n.accessors[t.attributes[p]],b=zi[x.componentType];u[y]=b.name,c[y]=x.normalized===!0}}return e.getDependency("bufferView",r).then(function(p){return new Promise(function(y,x){i.decodeDracoFile(p,function(b){for(const M in b.attributes){const S=b.attributes[M],v=c[M];v!==void 0&&(S.normalized=v)}y(b)},h,u,ke,x)})})}}class od{constructor(){this.name=pt.KHR_TEXTURE_TRANSFORM}extendTexture(t,e){return(e.texCoord===void 0||e.texCoord===t.channel)&&e.offset===void 0&&e.rotation===void 0&&e.scale===void 0||(t=t.clone(),e.texCoord!==void 0&&(t.channel=e.texCoord),e.offset!==void 0&&t.offset.fromArray(e.offset),e.rotation!==void 0&&(t.rotation=e.rotation),e.scale!==void 0&&t.repeat.fromArray(e.scale),t.needsUpdate=!0),t}}class ad{constructor(){this.name=pt.KHR_MESH_QUANTIZATION}}class uc extends ys{constructor(t,e,n,i){super(t,e,n,i)}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=t*i*3+i;for(let o=0;o!==i;o++)e[o]=n[r+o];return e}interpolate_(t,e,n,i){const r=this.resultBuffer,o=this.sampleValues,h=this.valueSize,c=h*2,u=h*3,p=i-e,y=(n-e)/p,x=y*y,b=x*y,M=t*u,S=M-u,v=-2*b+3*x,k=b-x,B=1-v,H=k-x+y;for(let O=0;O!==h;O++){const d=o[S+O+h],Y=o[S+O+c]*p,q=o[M+O+h],X=o[M+O]*p;r[O]=B*d+H*Y+v*q+k*X}return r}}const hd=new en;class cd extends uc{interpolate_(t,e,n,i){const r=super.interpolate_(t,e,n,i);return hd.fromArray(r).normalize().toArray(r),r}}const Ee={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},zi={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Uh={9728:yr,9729:Bo,9984:nl,9985:sl,9986:il,9987:jo},Vh={33071:os,33648:_o,10497:ni},To={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Fo={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Nn={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},ld={CUBICSPLINE:void 0,LINEAR:ds,STEP:us},vo={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function ud(m){return m.DefaultMaterial===void 0&&(m.DefaultMaterial=new Zo({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:mr})),m.DefaultMaterial}function Jn(m,t,e){for(const n in e.extensions)m[n]===void 0&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[n]=e.extensions[n])}function bn(m,t){t.extras!==void 0&&(typeof t.extras=="object"?Object.assign(m.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function dd(m,t,e){let n=!1,i=!1,r=!1;for(let u=0,p=t.length;u<p;u++){const y=t[u];if(y.POSITION!==void 0&&(n=!0),y.NORMAL!==void 0&&(i=!0),y.COLOR_0!==void 0&&(r=!0),n&&i&&r)break}if(!n&&!i&&!r)return Promise.resolve(m);const o=[],h=[],c=[];for(let u=0,p=t.length;u<p;u++){const y=t[u];if(n){const x=y.POSITION!==void 0?e.getDependency("accessor",y.POSITION):m.attributes.position;o.push(x)}if(i){const x=y.NORMAL!==void 0?e.getDependency("accessor",y.NORMAL):m.attributes.normal;h.push(x)}if(r){const x=y.COLOR_0!==void 0?e.getDependency("accessor",y.COLOR_0):m.attributes.color;c.push(x)}}return Promise.all([Promise.all(o),Promise.all(h),Promise.all(c)]).then(function(u){const p=u[0],y=u[1],x=u[2];return n&&(m.morphAttributes.position=p),i&&(m.morphAttributes.normal=y),r&&(m.morphAttributes.color=x),m.morphTargetsRelative=!0,m})}function fd(m,t){if(m.updateMorphTargets(),t.weights!==void 0)for(let e=0,n=t.weights.length;e<n;e++)m.morphTargetInfluences[e]=t.weights[e];if(t.extras&&Array.isArray(t.extras.targetNames)){const e=t.extras.targetNames;if(m.morphTargetInfluences.length===e.length){m.morphTargetDictionary={};for(let n=0,i=e.length;n<i;n++)m.morphTargetDictionary[e[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function pd(m){let t;const e=m.extensions&&m.extensions[pt.KHR_DRACO_MESH_COMPRESSION];if(e?t="draco:"+e.bufferView+":"+e.indices+":"+So(e.attributes):t=m.indices+":"+So(m.attributes)+":"+m.mode,m.targets!==void 0)for(let n=0,i=m.targets.length;n<i;n++)t+=":"+So(m.targets[n]);return t}function So(m){let t="";const e=Object.keys(m).sort();for(let n=0,i=e.length;n<i;n++)t+=e[n]+":"+m[e[n]]+";";return t}function Po(m){switch(m){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function md(m){return m.search(/\.jpe?g($|\?)/i)>0||m.search(/^data\:image\/jpeg/)===0?"image/jpeg":m.search(/\.webp($|\?)/i)>0||m.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const yd=new mt;class gd{constructor(t={},e={}){this.json=t,this.extensions={},this.plugins={},this.options=e,this.cache=new Bu,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,i=-1,r=!1,o=-1;if(typeof navigator<"u"){const h=navigator.userAgent;n=/^((?!chrome|android).)*safari/i.test(h)===!0;const c=h.match(/Version\/(\d+)/);i=n&&c?parseInt(c[1],10):-1,r=h.indexOf("Firefox")>-1,o=r?h.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||n&&i<17||r&&o<98?this.textureLoader=new gu(this.options.manager):this.textureLoader=new vu(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new cc(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,e){const n=this,i=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(o){const h={scene:o[0][i.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:i.asset,parser:n,userData:{}};return Jn(r,h,i),bn(h,i),Promise.all(n._invokeAll(function(c){return c.afterRoot&&c.afterRoot(h)})).then(function(){for(const c of h.scenes)c.updateMatrixWorld();t(h)})}).catch(e)}_markDefs(){const t=this.json.nodes||[],e=this.json.skins||[],n=this.json.meshes||[];for(let i=0,r=e.length;i<r;i++){const o=e[i].joints;for(let h=0,c=o.length;h<c;h++)t[o[h]].isBone=!0}for(let i=0,r=t.length;i<r;i++){const o=t[i];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(n[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(t,e){e!==void 0&&(t.refs[e]===void 0&&(t.refs[e]=t.uses[e]=0),t.refs[e]++)}_getNodeRef(t,e,n){if(t.refs[e]<=1)return n;const i=n.clone(),r=(o,h)=>{const c=this.associations.get(o);c!=null&&this.associations.set(h,c);for(const[u,p]of o.children.entries())r(p,h.children[u])};return r(n,i),i.name+="_instance_"+t.uses[e]++,i}_invokeOne(t){const e=Object.values(this.plugins);e.push(this);for(let n=0;n<e.length;n++){const i=t(e[n]);if(i)return i}return null}_invokeAll(t){const e=Object.values(this.plugins);e.unshift(this);const n=[];for(let i=0;i<e.length;i++){const r=t(e[i]);r&&n.push(r)}return n}getDependency(t,e){const n=t+":"+e;let i=this.cache.get(n);if(!i){switch(t){case"scene":i=this.loadScene(e);break;case"node":i=this._invokeOne(function(r){return r.loadNode&&r.loadNode(e)});break;case"mesh":i=this._invokeOne(function(r){return r.loadMesh&&r.loadMesh(e)});break;case"accessor":i=this.loadAccessor(e);break;case"bufferView":i=this._invokeOne(function(r){return r.loadBufferView&&r.loadBufferView(e)});break;case"buffer":i=this.loadBuffer(e);break;case"material":i=this._invokeOne(function(r){return r.loadMaterial&&r.loadMaterial(e)});break;case"texture":i=this._invokeOne(function(r){return r.loadTexture&&r.loadTexture(e)});break;case"skin":i=this.loadSkin(e);break;case"animation":i=this._invokeOne(function(r){return r.loadAnimation&&r.loadAnimation(e)});break;case"camera":i=this.loadCamera(e);break;default:if(i=this._invokeOne(function(r){return r!=this&&r.getDependency&&r.getDependency(t,e)}),!i)throw new Error("Unknown type: "+t);break}this.cache.add(n,i)}return i}getDependencies(t){let e=this.cache.get(t);if(!e){const n=this,i=this.json[t+(t==="mesh"?"es":"s")]||[];e=Promise.all(i.map(function(r,o){return n.getDependency(t,o)})),this.cache.add(t,e)}return e}loadBuffer(t){const e=this.json.buffers[t],n=this.fileLoader;if(e.type&&e.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(e.uri===void 0&&t===0)return Promise.resolve(this.extensions[pt.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(r,o){n.load(hs.resolveURL(e.uri,i.path),r,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))})})}loadBufferView(t){const e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then(function(n){const i=e.byteLength||0,r=e.byteOffset||0;return n.slice(r,r+i)})}loadAccessor(t){const e=this,n=this.json,i=this.json.accessors[t];if(i.bufferView===void 0&&i.sparse===void 0){const o=To[i.type],h=zi[i.componentType],c=i.normalized===!0,u=new h(i.count*o);return Promise.resolve(new Ke(u,o,c))}const r=[];return i.bufferView!==void 0?r.push(this.getDependency("bufferView",i.bufferView)):r.push(null),i.sparse!==void 0&&(r.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(r).then(function(o){const h=o[0],c=To[i.type],u=zi[i.componentType],p=u.BYTES_PER_ELEMENT,y=p*c,x=i.byteOffset||0,b=i.bufferView!==void 0?n.bufferViews[i.bufferView].byteStride:void 0,M=i.normalized===!0;let S,v;if(b&&b!==y){const k=Math.floor(x/b),B="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+k+":"+i.count;let H=e.cache.get(B);H||(S=new u(h,k*b,i.count*b/p),H=new $l(S,b/p),e.cache.add(B,H)),v=new Wo(H,c,x%b/p,M)}else h===null?S=new u(i.count*c):S=new u(h,x,i.count*c),v=new Ke(S,c,M);if(i.sparse!==void 0){const k=To.SCALAR,B=zi[i.sparse.indices.componentType],H=i.sparse.indices.byteOffset||0,O=i.sparse.values.byteOffset||0,d=new B(o[1],H,i.sparse.count*k),Y=new u(o[2],O,i.sparse.count*c);h!==null&&(v=new Ke(v.array.slice(),v.itemSize,v.normalized));for(let q=0,X=d.length;q<X;q++){const tt=d[q];if(v.setX(tt,Y[q*c]),c>=2&&v.setY(tt,Y[q*c+1]),c>=3&&v.setZ(tt,Y[q*c+2]),c>=4&&v.setW(tt,Y[q*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return v})}loadTexture(t){const e=this.json,n=this.options,r=e.textures[t].source,o=e.images[r];let h=this.textureLoader;if(o.uri){const c=n.manager.getHandler(o.uri);c!==null&&(h=c)}return this.loadTextureImage(t,r,h)}loadTextureImage(t,e,n){const i=this,r=this.json,o=r.textures[t],h=r.images[e],c=(h.uri||h.bufferView)+":"+o.sampler;if(this.textureCache[c])return this.textureCache[c];const u=this.loadImageSource(e,n).then(function(p){p.flipY=!1,p.name=o.name||h.name||"",p.name===""&&typeof h.uri=="string"&&h.uri.startsWith("data:image/")===!1&&(p.name=h.uri);const x=(r.samplers||{})[o.sampler]||{};return p.magFilter=Uh[x.magFilter]||Bo,p.minFilter=Uh[x.minFilter]||jo,p.wrapS=Vh[x.wrapS]||ni,p.wrapT=Vh[x.wrapT]||ni,i.associations.set(p,{textures:t}),p}).catch(function(){return null});return this.textureCache[c]=u,u}loadImageSource(t,e){const n=this,i=this.json,r=this.options;if(this.sourceCache[t]!==void 0)return this.sourceCache[t].then(y=>y.clone());const o=i.images[t],h=self.URL||self.webkitURL;let c=o.uri||"",u=!1;if(o.bufferView!==void 0)c=n.getDependency("bufferView",o.bufferView).then(function(y){u=!0;const x=new Blob([y],{type:o.mimeType});return c=h.createObjectURL(x),c});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const p=Promise.resolve(c).then(function(y){return new Promise(function(x,b){let M=x;e.isImageBitmapLoader===!0&&(M=function(S){const v=new Re(S);v.needsUpdate=!0,x(v)}),e.load(hs.resolveURL(y,r.path),M,void 0,b)})}).then(function(y){return u===!0&&h.revokeObjectURL(c),bn(y,o),y.userData.mimeType=o.mimeType||md(o.uri),y}).catch(function(y){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),y});return this.sourceCache[t]=p,p}assignTexture(t,e,n,i){const r=this;return this.getDependency("texture",n.index).then(function(o){if(!o)return null;if(n.texCoord!==void 0&&n.texCoord>0&&(o=o.clone(),o.channel=n.texCoord),r.extensions[pt.KHR_TEXTURE_TRANSFORM]){const h=n.extensions!==void 0?n.extensions[pt.KHR_TEXTURE_TRANSFORM]:void 0;if(h){const c=r.associations.get(o);o=r.extensions[pt.KHR_TEXTURE_TRANSFORM].extendTexture(o,h),r.associations.set(o,c)}}return i!==void 0&&(o.colorSpace=i),t[e]=o,o})}assignFinalMaterial(t){const e=t.geometry;let n=t.material;const i=e.attributes.tangent===void 0,r=e.attributes.color!==void 0,o=e.attributes.normal===void 0;if(t.isPoints){const h="PointsMaterial:"+n.uuid;let c=this.cache.get(h);c||(c=new oc,ei.prototype.copy.call(c,n),c.color.copy(n.color),c.map=n.map,c.sizeAttenuation=!1,this.cache.add(h,c)),n=c}else if(t.isLine){const h="LineBasicMaterial:"+n.uuid;let c=this.cache.get(h);c||(c=new ps,ei.prototype.copy.call(c,n),c.color.copy(n.color),c.map=n.map,this.cache.add(h,c)),n=c}if(i||r||o){let h="ClonedMaterial:"+n.uuid+":";i&&(h+="derivative-tangents:"),r&&(h+="vertex-colors:"),o&&(h+="flat-shading:");let c=this.cache.get(h);c||(c=n.clone(),r&&(c.vertexColors=!0),o&&(c.flatShading=!0),i&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(h,c),this.associations.set(c,this.associations.get(n))),n=c}t.material=n}getMaterialType(){return Zo}loadMaterial(t){const e=this,n=this.json,i=this.extensions,r=n.materials[t];let o;const h={},c=r.extensions||{},u=[];if(c[pt.KHR_MATERIALS_UNLIT]){const y=i[pt.KHR_MATERIALS_UNLIT];o=y.getMaterialType(),u.push(y.extendParams(h,r,e))}else{const y=r.pbrMetallicRoughness||{};if(h.color=new It(1,1,1),h.opacity=1,Array.isArray(y.baseColorFactor)){const x=y.baseColorFactor;h.color.setRGB(x[0],x[1],x[2],ke),h.opacity=x[3]}y.baseColorTexture!==void 0&&u.push(e.assignTexture(h,"map",y.baseColorTexture,Ae)),h.metalness=y.metallicFactor!==void 0?y.metallicFactor:1,h.roughness=y.roughnessFactor!==void 0?y.roughnessFactor:1,y.metallicRoughnessTexture!==void 0&&(u.push(e.assignTexture(h,"metalnessMap",y.metallicRoughnessTexture)),u.push(e.assignTexture(h,"roughnessMap",y.metallicRoughnessTexture))),o=this._invokeOne(function(x){return x.getMaterialType&&x.getMaterialType(t)}),u.push(Promise.all(this._invokeAll(function(x){return x.extendMaterialParams&&x.extendMaterialParams(t,h)})))}r.doubleSided===!0&&(h.side=Oo);const p=r.alphaMode||vo.OPAQUE;if(p===vo.BLEND?(h.transparent=!0,h.depthWrite=!1):(h.transparent=!1,p===vo.MASK&&(h.alphaTest=r.alphaCutoff!==void 0?r.alphaCutoff:.5)),r.normalTexture!==void 0&&o!==tn&&(u.push(e.assignTexture(h,"normalMap",r.normalTexture)),h.normalScale=new ft(1,1),r.normalTexture.scale!==void 0)){const y=r.normalTexture.scale;h.normalScale.set(y,y)}if(r.occlusionTexture!==void 0&&o!==tn&&(u.push(e.assignTexture(h,"aoMap",r.occlusionTexture)),r.occlusionTexture.strength!==void 0&&(h.aoMapIntensity=r.occlusionTexture.strength)),r.emissiveFactor!==void 0&&o!==tn){const y=r.emissiveFactor;h.emissive=new It().setRGB(y[0],y[1],y[2],ke)}return r.emissiveTexture!==void 0&&o!==tn&&u.push(e.assignTexture(h,"emissiveMap",r.emissiveTexture,Ae)),Promise.all(u).then(function(){const y=new o(h);return r.name&&(y.name=r.name),bn(y,r),e.associations.set(y,{materials:t}),r.extensions&&Jn(i,y,r),y})}createUniqueName(t){const e=At.sanitizeNodeName(t||"");return e in this.nodeNamesUsed?e+"_"+ ++this.nodeNamesUsed[e]:(this.nodeNamesUsed[e]=0,e)}loadGeometries(t){const e=this,n=this.extensions,i=this.primitiveCache;function r(h){return n[pt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(h,e).then(function(c){return qh(c,h,e)})}const o=[];for(let h=0,c=t.length;h<c;h++){const u=t[h],p=pd(u),y=i[p];if(y)o.push(y.promise);else{let x;u.extensions&&u.extensions[pt.KHR_DRACO_MESH_COMPRESSION]?x=r(u):x=qh(new Ie,u,e),i[p]={primitive:u,promise:x},o.push(x)}}return Promise.all(o)}loadMesh(t){const e=this,n=this.json,i=this.extensions,r=n.meshes[t],o=r.primitives,h=[];for(let c=0,u=o.length;c<u;c++){const p=o[c].material===void 0?ud(this.cache):this.getDependency("material",o[c].material);h.push(p)}return h.push(e.loadGeometries(o)),Promise.all(h).then(function(c){const u=c.slice(0,c.length-1),p=c[c.length-1],y=[];for(let b=0,M=p.length;b<M;b++){const S=p[b],v=o[b];let k;const B=u[b];if(v.mode===Ee.TRIANGLES||v.mode===Ee.TRIANGLE_STRIP||v.mode===Ee.TRIANGLE_FAN||v.mode===void 0)k=r.isSkinnedMesh===!0?new Zl(S,B):new ii(S,B),k.isSkinnedMesh===!0&&k.normalizeSkinWeights(),v.mode===Ee.TRIANGLE_STRIP?k.geometry=jh(k.geometry,Kh):v.mode===Ee.TRIANGLE_FAN&&(k.geometry=jh(k.geometry,Eo));else if(v.mode===Ee.LINES)k=new br(S,B);else if(v.mode===Ee.LINE_STRIP)k=new Xo(S,B);else if(v.mode===Ee.LINE_LOOP)k=new eu(S,B);else if(v.mode===Ee.POINTS)k=new nu(S,B);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+v.mode);Object.keys(k.geometry.morphAttributes).length>0&&fd(k,r),k.name=e.createUniqueName(r.name||"mesh_"+t),bn(k,r),v.extensions&&Jn(i,k,v),e.assignFinalMaterial(k),y.push(k)}for(let b=0,M=y.length;b<M;b++)e.associations.set(y[b],{meshes:t,primitives:b});if(y.length===1)return r.extensions&&Jn(i,y[0],r),y[0];const x=new mo;r.extensions&&Jn(i,x,r),e.associations.set(x,{meshes:t});for(let b=0,M=y.length;b<M;b++)x.add(y[b]);return x})}loadCamera(t){let e;const n=this.json.cameras[t],i=n[n.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?e=new Tr(ae.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):n.type==="orthographic"&&(e=new ic(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(e.name=this.createUniqueName(n.name)),bn(e,n),Promise.resolve(e)}loadSkin(t){const e=this.json.skins[t],n=[];for(let i=0,r=e.joints.length;i<r;i++)n.push(this._loadNodeShallow(e.joints[i]));return e.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",e.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(i){const r=i.pop(),o=i,h=[],c=[];for(let u=0,p=o.length;u<p;u++){const y=o[u];if(y){h.push(y);const x=new mt;r!==null&&x.fromArray(r.array,u*16),c.push(x)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',e.joints[u])}return new Go(h,c)})}loadAnimation(t){const e=this.json,n=this,i=e.animations[t],r=i.name?i.name:"animation_"+t,o=[],h=[],c=[],u=[],p=[];for(let y=0,x=i.channels.length;y<x;y++){const b=i.channels[y],M=i.samplers[b.sampler],S=b.target,v=S.node,k=i.parameters!==void 0?i.parameters[M.input]:M.input,B=i.parameters!==void 0?i.parameters[M.output]:M.output;S.node!==void 0&&(o.push(this.getDependency("node",v)),h.push(this.getDependency("accessor",k)),c.push(this.getDependency("accessor",B)),u.push(M),p.push(S))}return Promise.all([Promise.all(o),Promise.all(h),Promise.all(c),Promise.all(u),Promise.all(p)]).then(function(y){const x=y[0],b=y[1],M=y[2],S=y[3],v=y[4],k=[];for(let B=0,H=x.length;B<H;B++){const O=x[B],d=b[B],Y=M[B],q=S[B],X=v[B];if(O===void 0)continue;O.updateMatrix&&O.updateMatrix();const tt=n._createAnimationTracks(O,d,Y,q,X);if(tt)for(let ct=0;ct<tt.length;ct++)k.push(tt[ct])}return new lu(r,void 0,k)})}createNodeMesh(t){const e=this.json,n=this,i=e.nodes[t];return i.mesh===void 0?null:n.getDependency("mesh",i.mesh).then(function(r){const o=n._getNodeRef(n.meshCache,i.mesh,r);return i.weights!==void 0&&o.traverse(function(h){if(h.isMesh)for(let c=0,u=i.weights.length;c<u;c++)h.morphTargetInfluences[c]=i.weights[c]}),o})}loadNode(t){const e=this.json,n=this,i=e.nodes[t],r=n._loadNodeShallow(t),o=[],h=i.children||[];for(let u=0,p=h.length;u<p;u++)o.push(n.getDependency("node",h[u]));const c=i.skin===void 0?Promise.resolve(null):n.getDependency("skin",i.skin);return Promise.all([r,Promise.all(o),c]).then(function(u){const p=u[0],y=u[1],x=u[2];x!==null&&p.traverse(function(b){b.isSkinnedMesh&&b.bind(x,yd)});for(let b=0,M=y.length;b<M;b++)p.add(y[b]);return p})}_loadNodeShallow(t){const e=this.json,n=this.extensions,i=this;if(this.nodeCache[t]!==void 0)return this.nodeCache[t];const r=e.nodes[t],o=r.name?i.createUniqueName(r.name):"",h=[],c=i._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(t)});return c&&h.push(c),r.camera!==void 0&&h.push(i.getDependency("camera",r.camera).then(function(u){return i._getNodeRef(i.cameraCache,r.camera,u)})),i._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(t)}).forEach(function(u){h.push(u)}),this.nodeCache[t]=Promise.all(h).then(function(u){let p;if(r.isBone===!0?p=new sc:u.length>1?p=new mo:u.length===1?p=u[0]:p=new Nt,p!==u[0])for(let y=0,x=u.length;y<x;y++)p.add(u[y]);if(r.name&&(p.userData.name=r.name,p.name=o),bn(p,r),r.extensions&&Jn(n,p,r),r.matrix!==void 0){const y=new mt;y.fromArray(r.matrix),p.applyMatrix4(y)}else r.translation!==void 0&&p.position.fromArray(r.translation),r.rotation!==void 0&&p.quaternion.fromArray(r.rotation),r.scale!==void 0&&p.scale.fromArray(r.scale);return i.associations.has(p)||i.associations.set(p,{}),i.associations.get(p).nodes=t,p}),this.nodeCache[t]}loadScene(t){const e=this.extensions,n=this.json.scenes[t],i=this,r=new mo;n.name&&(r.name=i.createUniqueName(n.name)),bn(r,n),n.extensions&&Jn(e,r,n);const o=n.nodes||[],h=[];for(let c=0,u=o.length;c<u;c++)h.push(i.getDependency("node",o[c]));return Promise.all(h).then(function(c){for(let p=0,y=c.length;p<y;p++)r.add(c[p]);const u=p=>{const y=new Map;for(const[x,b]of i.associations)(x instanceof ei||x instanceof Re)&&y.set(x,b);return p.traverse(x=>{const b=i.associations.get(x);b!=null&&y.set(x,b)}),y};return i.associations=u(r),r})}_createAnimationTracks(t,e,n,i,r){const o=[],h=t.name?t.name:t.uuid,c=[];Nn[r.path]===Nn.weights?t.traverse(function(x){x.morphTargetInfluences&&c.push(x.name?x.name:x.uuid)}):c.push(h);let u;switch(Nn[r.path]){case Nn.weights:u=Ni;break;case Nn.rotation:u=Li;break;case Nn.position:case Nn.scale:u=Fi;break;default:switch(n.itemSize){case 1:u=Ni;break;case 2:case 3:default:u=Fi;break}break}const p=i.interpolation!==void 0?ld[i.interpolation]:ds,y=this._getArrayFromAccessor(n);for(let x=0,b=c.length;x<b;x++){const M=new u(c[x]+"."+Nn[r.path],e.array,y,p);i.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(M),o.push(M)}return o}_getArrayFromAccessor(t){let e=t.array;if(t.normalized){const n=Po(e.constructor),i=new Float32Array(e.length);for(let r=0,o=e.length;r<o;r++)i[r]=e[r]*n;e=i}return e}_createCubicSplineTrackInterpolant(t){t.createInterpolant=function(n){const i=this instanceof Li?cd:uc;return new i(this.times,this.values,this.getValueSize()/3,n)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function xd(m,t,e){const n=t.attributes,i=new nn;if(n.POSITION!==void 0){const h=e.json.accessors[n.POSITION],c=h.min,u=h.max;if(c!==void 0&&u!==void 0){if(i.set(new z(c[0],c[1],c[2]),new z(u[0],u[1],u[2])),h.normalized){const p=Po(zi[h.componentType]);i.min.multiplyScalar(p),i.max.multiplyScalar(p)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const r=t.targets;if(r!==void 0){const h=new z,c=new z;for(let u=0,p=r.length;u<p;u++){const y=r[u];if(y.POSITION!==void 0){const x=e.json.accessors[y.POSITION],b=x.min,M=x.max;if(b!==void 0&&M!==void 0){if(c.setX(Math.max(Math.abs(b[0]),Math.abs(M[0]))),c.setY(Math.max(Math.abs(b[1]),Math.abs(M[1]))),c.setZ(Math.max(Math.abs(b[2]),Math.abs(M[2]))),x.normalized){const S=Po(zi[x.componentType]);c.multiplyScalar(S)}h.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(h)}m.boundingBox=i;const o=new sn;i.getCenter(o.center),o.radius=i.min.distanceTo(i.max)/2,m.boundingSphere=o}function qh(m,t,e){const n=t.attributes,i=[];function r(o,h){return e.getDependency("accessor",o).then(function(c){m.setAttribute(h,c)})}for(const o in n){const h=Fo[o]||o.toLowerCase();h in m.attributes||i.push(r(n[o],h))}if(t.indices!==void 0&&!m.index){const o=e.getDependency("accessor",t.indices).then(function(h){m.setIndex(h)});i.push(o)}return Me.workingColorSpace!==ke&&"COLOR_0"in n&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${Me.workingColorSpace}" not supported.`),bn(m,t),xd(m,t,e),Promise.all(i).then(function(){return t.targets!==void 0?dd(m,t.targets,e):m})}function wr(m){const t=new Map,e=new Map,n=m.clone();return dc(m,n,function(i,r){t.set(r,i),e.set(i,r)}),n.traverse(function(i){if(!i.isSkinnedMesh)return;const r=i,o=t.get(i),h=o.skeleton.bones;r.skeleton=o.skeleton.clone(),r.bindMatrix.copy(o.bindMatrix),r.skeleton.bones=h.map(function(c){return e.get(c)}),r.bind(r.skeleton,r.bindMatrix)}),n}function dc(m,t,e){e(m,t);for(let n=0;n<m.children.length;n++)dc(m.children[n],t.children[n],e)}const Ot=new Yl,wn=new Tr(75,window.innerWidth/innerHeight,.1,1e3);let Dn=new(void 0)({canvas:document.querySelector("#bg")});Dn.setPixelRatio(window.devicePixelRatio);Dn.setSize(window.innerWidth,innerHeight);wn.position.setZ(800);wn.position.setY(5);const bd=new Tu(16777215),wd=new Fu(2e3,800),_r=new Du(wn,Dn.domElement);_r.enableZoom=!1;_r.noZoom=!0;_r.enabled=!1;Ot.add(bd);Ot.add(wd);let he=new z(5,800,0);const Wh=4500;let cs=null;const fc=document.querySelector(".swiper-slide-num"),Mr=document.querySelectorAll(".heading"),pc=1500;var Ci=null;const Te=new Gh(".swiper",{direction:"vertical",loop:!0,speed:pc,mousewheel:!1,keyboard:{enabled:!0},pagination:{el:".swiper-pagination-custom",loop:!0,bulletClass:"swiper-bullet-custom",bulletActiveClass:"is-active",bulletElement:"button",clickable:!0}}),Ge=new Gh(".Swiper_Portfolio",{direction:"horizontal",slidesPerView:1,spaceBetween:30,speed:pc,mousewheel:!1,pagination:{el:".swiper-pagination_2",clickable:!0}});document.body.addEventListener("wheel",m=>{m.preventDefault(),Te.realIndex==3?Ge.realIndex==4&&m.wheelDeltaY<0||Ge.realIndex==0&&m.wheelDeltaY>0?m.wheelDeltaY<0?Te.slideNext():Te.slidePrev():m.wheelDeltaY<0?Ge.slideNext():Ge.slidePrev():m.wheelDeltaY<0?Te.slideNext():Te.slidePrev(),Ge.realIndex==0&&(Te.slidePrev(),Ge.slideNext()),Ge.realIndex==4&&(Te.slideNext(),Ge.slidePrev()),Ge.realIndex==2&&(Ot.background=new It(16777215)),(Ge.realIndex==1||Ge.realIndex==3)&&(Ot.background=new It(0))});Te.on("slideNextTransitionStart",()=>{let m=Te.realIndex;switch(fc.textContent=m+1,Mr.forEach(t=>t.classList.remove("is-active")),Mr[m].classList.add("is-active"),m){case 0:he=new z(0,5,800),document.querySelector(".navbar").style.display="grid";break;case 1:he=new z(0,5,400),document.querySelector(".navbar").style.display="none";break;case 2:he=new z(-400,5,200),document.querySelector(".navbar").style.display="none";break;case 3:he=new z(0,5,100),document.querySelector(".navbar").style.display="none";break;case 4:he=new z(0,100,0),document.querySelector(".navbar").style.display="none";break;default:he=new z(0,200,200),document.querySelector(".navbar").style.display="none";break}cs=null,Ci=he,gsap.timeline({defaults:{duration:ea/5e3}}).to(".front",{translateY:"100%"}).set(".front",{translateY:"-100%"}).to(".front",{translateY:"0%"})});Te.on("slidePrevTransitionStart",()=>{let m=Te.realIndex;switch(fc.textContent=m+1,Mr.forEach(t=>t.classList.remove("is-active")),Mr[m].classList.add("is-active"),m){case 0:he=new z(0,5,800),document.querySelector(".navbar").style.display="grid";break;case 1:he=new z(0,5,400),document.querySelector(".navbar").style.display="none";break;case 2:he=new z(-400,5,200),document.querySelector(".navbar").style.display="none";break;case 3:he=new z(0,5,100),document.querySelector(".navbar").style.display="none";break;case 4:he=new z(0,100,0),document.querySelector(".navbar").style.display="none";break;default:he=new z(0,5,800),document.querySelector(".navbar").style.display="none";break}cs=null,Ci=he,gsap.timeline({defaults:{duration:ea/2e3}}).to(".front",{translateY:"-100%"}).set(".front",{translateY:"100%"}).to(".front",{translateY:"0%"})});document.getElementById("go_To_Contacts").addEventListener("click",function(){Te.slideTo(4)});document.getElementById("w-node-_475191de-f6e8-9024-5d0a-bd63c5d18fb7-67f9e306").addEventListener("click",function(){Te.slideTo(1)});const Ln=[],ls=[],ea=.03;let dr=0;function mc(m){if(requestAnimationFrame(mc),Ci!=null){cs||(cs=m);const t=m-cs;if(t>=Wh)wn.position.copy(Ci),Ci=null;else{const e=t/Wh;wn.position.lerp(Ci,e)}}yc.forEach((t,e)=>{t.rotation.x+=Do[e][0],t.rotation.y+=Do[e][1]}),dr+=ea;for(let t=0;t<Ri.length;t++){let e=Ln[t]+(ls[t]-Ln[t])*Math.sin(dr);t%2,Ln[t]+(ls[t]-Ln[t])*Math.sin(dr),Ri[t].position.y=e}_r.update(),Dn.setSize(window.innerWidth,innerHeight),Dn.render(Ot,wn)}const Ar=new Lu;Dn.domElement.addEventListener("mousemove",Md);let Ei;function Md(m){const t=new ft;t.x=m.clientX/window.innerWidth*2-1,t.y=-(m.clientY/window.innerHeight)*2+1,Ar.setFromCamera(t,wn);const e=Ar.intersectObjects(Ot.children,!0);if(e.length>0){e[0].object.name=="Space_Invader"?e[0].object.material.color.set(2223626):e[0].object.name=="Moon"||e[0].object.name=="Space_Invader_kill"||(e[0].object.name.indexOf("Ð¡ÑÐµÑÐ°")==0?e[0].object.material.color.set(268435455):e[0].object.name.indexOf("Object")==0||e[0].object.type!="GridHelper"&&(e[0].object.material.color.set(16711680),document.getElementById("bg").style.cursor="default"));try{Ei.object.id!=e[0].object.id&&Ei.object.name=="Space_Invader"&&Ei.object.material.color.set(16777215)}catch{Ei=e[0]}if(e[0].object.name!="world")try{Ot.getObjectByName("world").material.color.set(65793)}catch{Ei=e[0]}Ei=e[0],e[0].object.name.indexOf("Object")==0?document.getElementById("bg").style.cursor="pointer":document.getElementById("bg").style.cursor="default"}else document.getElementById("bg").style.cursor="default"}Dn.domElement.addEventListener("click",Ad);function Ad(m){const t=new ft;t.x=m.clientX/window.innerWidth*2-1,t.y=-(m.clientY/window.innerHeight)*2+1,Ar.setFromCamera(t,wn);const e=Ar.intersectObjects(Ot.children,!0);e.length>0&&e[0].object.name=="Space_Invader"&&(e[0].object.name="Space_Invader_kill",e[0].object.material.color.set(16711680))}function Td(){const m=new Ko(1,32,16),t=new tn({color:16777215}),e=new ii(m,t),n=ae.randFloatSpread(800),i=ae.randFloat(0,800),r=ae.randFloatSpread(800);e.position.set(n,i,r),Ot.add(e)}Array(1e3).fill().forEach(Td);const vd=new qo(150,80),Sd=new tn({color:0,side:Oo}),na=new ii(vd,Sd);na.rotation.x=90*Math.PI/180;na.position.set(0,-1,350);Ot.add(na);const yc=[],Do=[];function _d(){const m=new Vo(20,20,20),t=new Rh(m),e=new ps({color:16777215});e.linewidth=5;const n=new br(t,e),i=ae.randFloat(2,10),r=ae.randFloat(0,10),o=ae.randFloat(3,7),h=1,c=!1,u=0,p=ae.randFloat(3.8786724068467,6.283185307179586),y=new $o(i,r,o,h,c,u,p),x=new tn({color:16777215}),b=new ii(y,x),M=new Rh(y),S=new ps({color:0,linewidth:2}),v=new br(M,S),k=ae.randFloatSpread(1e3),B=ae.randFloat(0,1e3),H=ae.randFloatSpread(1e3);let O=ae.randFloat(0,.01),d=ae.randFloat(0,.01);n.position.set(k,B,H),b.position.set(k,B,H),v.position.set(k,B,H),Do.push([O,d]),yc.push(n),Ot.add(n),Ot.add(b),Ot.add(v)}Array(1050).fill().forEach(_d);const ia=new Ou;var Ri=[];ia.load("imgs/3d_space_invader.glb",function(m){let t=-60,e=0;for(let n=0;n<40;n+=10)for(let i=10;i<120;i+=10)i=i%50===0?i+31:i,Ri[Ri.length]=wr(m.scene),Ln[Ln.length]=n-5,ls[ls.length]=n+5,Cd(Ri[Ri.length-1],t+i,e+n,350);mc()});const xn={color:16777215,transmission:1,opacity:1,metalness:0,roughness:.26,ior:1.5,thickness:3.59,specularIntensity:0,specularColor:16777215,envMapIntensity:1,lightIntensity:1,exposure:1};function Ed(){const m=document.createElement("canvas");m.width=2,m.height=2;const t=m.getContext("2d");return t.fillStyle="white",t.fillRect(0,1,2,1),m}const gs=new iu(Ed());gs.magFilter=yr;gs.wrapT=ni;gs.wrapS=ni;gs.repeat.set(1,3.5);function Cd(m,t,e,n){const r=sa(m);m.scale.set(10/r,10/r,10/r);const o=new z(t,e,n);m.position.copy(o),m.traverse(h=>{h.isMesh&&(h.material=new tn({color:xn.color,metalness:xn.metalness,roughness:xn.roughness,ior:xn.ior,alphaMap:gs,envMapIntensity:xn.envMapIntensity,transmission:xn.transmission,specularIntensity:xn.specularIntensity,specularColor:xn.specularColor,opacity:xn.opacity,side:Oo,transparent:!0}))}),Ot.add(m)}function sa(m){const t=new nn().setFromObject(m),e=new z;return t.getSize(e),e.length()}const gc=new Sr(16777215,1,500);gc.position.set(0,35,70);Ot.add(gc);ia.load("imgs/world.glb",function(m){var t=wr(m.scene);const e=120,n=sa(t);t.scale.set(e/n,e/n,e/n);const i=new z(0,35,0);t.position.copy(i),t.rotation.y=.01,Ot.add(t);function r(){requestAnimationFrame(r),t.rotation.y+=.01,Dn.render(Ot,wn)}r()});const xc=new Sr("#ffffff",4,500);xc.position.set(0,26,780);Ot.add(xc);const bc=new Sr("#ffffff",4,500);bc.position.set(0,26,580);Ot.add(bc);var fr=[];ia.load("imgs/asteroide.glb",function(m){[[-15,40,720],[11,35,750],[15,10,800],[17,9,750],[15,15,500],[37,12,730],[24,14,630],[23,10,670],[30,10,520],[15,5,570],[20,15,450],[27,25,744],[23,11,666],[18,17,550],[32,20,654],[0,30,611],[-40,10,760],[-15,5,750],[-15,15,500],[-30,12,730],[-20,18,630],[-20,10,670],[-30,7,520],[-15,5,570],[-20,15,450],[-27,25,744],[-23,11,666],[-18,17,550],[-32,20,654],[-1,20,711]].forEach(n=>{fr[fr.length]=wr(m.scene),Rd(fr[fr.length-1],n[0],n[1],n[2])});var e=wr(m.scene);Ot.add(e)});function Rd(m,t,e,n){const r=sa(m);m.scale.set(40/r,40/r,40/r),m.traverse(h=>{h.isMesh&&(h.material.color.set("#ffffff"),h.material.wireframe=!0)});const o=new z(t,e,n);m.position.copy(o),Ot.add(m)}document.getElementById("downloadcv").addEventListener("click",function(){var m=document.createElement("a");m.href="imgs/Docs/CV-Luis Carvalho.pdf",m.download="CV-Luis Carvalho.pdf",m.dispatchEvent(new MouseEvent("click"))})});export default kd();
